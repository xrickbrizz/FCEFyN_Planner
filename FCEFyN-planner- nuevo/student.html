<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Panel del Estudiante</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles/global.css">
  <link rel="stylesheet" href="styles/ui/saas-theme.css">
  <link rel="stylesheet" href="styles/study.css">
  <link rel="stylesheet" href="styles/widgets/weather-widget.css">
  <link rel="stylesheet" href="assets/css/mobile.css">
  <link rel="stylesheet" href="assets/css/mobile-home.css">
  <script src="scripts/ui/theme-toggle.js" defer></script>
  <script src="scripts/ui/disable-form-tooltips.js" defer></script>
    <script src="scripts/ui/user-panel.js" defer></script>
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="brand" id="logoPanel"> <!-- curso : point (none corregir despues logica link) -->
      <img class="logo" src="assets/fcefyn-logo.svg" alt="Logo FCEFyN" id="logoFcefyn" style="cursor: pointer"/>
      <div class="brand-txt"></div>
    </div>
    <div class="header-left">
      <div class="header-title">Panel del Estudiante</div>
      <div class="header-sub">Calendario de estudio ‚Äî FCEFyN</div>
    </div>
    <div class="header-right">
      <button class="theme-toggle" id="themeToggleBtn" data-theme-toggle type="button">
        <span class="ico"></span>
      </button>
      <button class="header-msg-btn" type="button" data-section="mensajes" aria-label="Abrir mensajer√≠a" onclick="window.showTab && window.showTab('mensajes')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M21 14a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
      </button>
      <div id="user-panel"></div>
    </div>
  </header>
  <div class="mobile-topbar" aria-label="Navegaci√≥n m√≥vil">
    <div class="mobile-brand">
      <img src="assets/fcefyn-logo.svg" alt="Logo FCEFyN" />
      <span>FCEFyN</span>
    </div>
    <div class="mobile-topbar-actions">
      <button class="theme-toggle mobile-theme-toggle" data-theme-toggle type="button" aria-label="Cambiar tema">
        <span class="ico"></span>
      </button>
      <button class="mobile-icon-btn" type="button" data-section="mensajes" aria-label="Avisos">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 8a6 6 0 1 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"/><path d="M13.7 21a2 2 0 0 1-3.4 0"/></svg>
      </button>
      <div class="mobile-avatar" id="user-panel-mobile"></div>
    </div>
  </div>
  <div class="page-layout sidebar-collapsed" id="pageLayout">
    <div id="quickSidebarMount"></div>
    <div class="page-content">
      <div class="content-header mobile-quickbar">
        <div class="top-actions">
          <button class="quick-toggle-btn" id="sidebarToggle" type="button" aria-label="Abrir accesos r√°pidos">‚ò∞</button>
        </div>
        <div class="section-label mqb-home" id="currentSectionLabel"><span>Inicio</span></div>
        <button class="help-btn mqb-help" id="helpButton" type="button" aria-label="Ayuda contextual">?</button>
      </div>
      <!-- MAIN -->
      <main class="main-shell">
        
    <div id="tab-inicio" class="tab-card">
      <div class="mobile-home-header">
        <h1>Panel del Estudiante</h1>
        <p>Calendario de estudio ‚Äì FCEFyN</p>
        <span>Tu punto de partida</span>
      </div>
      <div class="home-layout">
        <section class="home-left">
          <div class="eyebrow">FCEFyN Planner</div>
          <h2 class="home-title">Tu punto de partida</h2>
          <p class="home-sub">
            Todo lo que necesit√°s para organizar tu cursada en FCEFyN, ahora en m√≥dulos independientes y conectados.
          </p>
          <div class="home-cards" id="homeModulesGrid"></div>
          <section id="weatherWidget" class="weather-widget" aria-live="polite"></section>
        </section>

        <aside class="home-notices-panel" id="homeNoticesPanel" data-mode="list">
          <div class="home-notices-header">
            <button class="home-notices-back" id="homeNoticesBack" type="button" hidden>‚Üê Volver</button>
            <div class="home-notices-title">Avisos</div>
            <label class="home-notices-search" id="homeNoticesSearchWrap" aria-label="Buscar aviso">
              <span class="home-search-icon" aria-hidden="true"></span>
              <input id="homeNoticesSearch" type="search" placeholder="Buscar aviso..." />
            </label>
            <div class="home-notices-nav" id="homeNoticesNav">
              <span class="home-notices-range" id="homeNoticesRange">0‚Äì0</span>
              <button class="home-notices-btn" id="homeNoticesPrev" type="button" aria-label="Avisos anteriores">‚Äπ</button>
              <button class="home-notices-btn" id="homeNoticesNext" type="button" aria-label="Avisos siguientes">‚Ä∫</button>
            </div>
          </div>
          <div class="home-notices-listing" id="homeNoticesListing">
            <div class="home-notices-content">
              <div class="home-notices-list" id="homeNoticesList"></div>
              <div class="home-notices-empty" id="homeNoticesEmpty" hidden>No hay avisos para mostrar.</div>
            </div>
          </div>

          <div class="home-notices-detail" id="homeNoticesDetail" hidden>
            <div class="home-notices-detail-body" id="homeNoticesDetailBody"></div>
          </div>
        </aside>
      </div>
    </div>

    <div id="tab-estudio" class="tab-card" style="display:none;">
      <div class="tab-estudio-layout">
        <div class="study-main-column study-top-layout">
          <section class="study-stats-grid study-top-left" aria-label="Resumen de estudio">
            <article class="study-stat-card">
              <div class="study-stat-label">‚è± Horas hoy</div>
              <div class="study-stat-value" id="studyTodayHoursValue">0 h 0 m</div>
            </article>
            <article class="study-stat-card study-stat-card-clickable study-top-item" id="studyWeeklyGoalCard" role="button" tabindex="0" aria-label="Editar meta semanal">
              <div class="study-stat-label">üéØ Meta semanal</div>
              <div class="study-stat-value" id="studyWeeklyGoalValue">0%</div>
            </article>
          </section>
          <section id="studyTimerWidget" class="widget-card study-timer-card study-top-right">
            <div class="widget-title">Temporizador de estudio</div>
            <div class="study-timer-status" id="studyTimerStatus">Estado: listo para comenzar</div>
            <div class="timer-header timer-header-dashboard">
              <div class="timer-display timer-display-dashboard" id="studyTimerDisplay">00:00:00</div>
              <div class="timer-controls timer-controls-dashboard" aria-label="Controles del temporizador">
                <button class="icon-btn" id="studyTimerReset" type="button" aria-label="Reiniciar">‚ü≤</button>
                <button class="icon-btn" id="studyTimerStart" type="button" aria-label="Iniciar">‚ñ∂</button>
                <button class="icon-btn" id="studyTimerPause" type="button" aria-label="Detener">‚è∏</button>
              </div>
            </div>
            <div class="widget-grid">
              <div class="widget-field">
                <label for="studyTimerMateria">Materia</label>
                <select id="studyTimerMateria"></select>
              </div>
              <div class="widget-field">
                <label for="studyTimerTema">Tema (opcional)</label>
                <input id="studyTimerTema" type="text" placeholder="Tema opcional" />
              </div>
            </div>
            <div class="timer-actions timer-actions-dashboard">
              <button class="btn-dark btn-small" id="studyTimerRegister" type="button">Registrar sesi√≥n</button>
            </div>
          </section>

          <section class="study-detail-panel" id="studyDetailPanel">
          <div class="study-detail-header">
            <div>
              <div class="study-detail-day" id="studyDetailTitle">Detalle del d√≠a</div>
              <div class="study-detail-date" id="studyDetailDate">‚Äî</div>
            </div>
          <div class="study-detail-time" id="studyDetailTime">‚Äî</div>
          </div>
          <div class="study-events" id="studyDetailList"></div>
          <button class="btn-dark" id="studyNewEntry" type="button">Nuevo registro</button>
          </section>
        </div>

        <aside class="study-side-column">
          <div class="calendar-container study-calendar-compact">
            <div class="streak-overlay" aria-label="Racha de estudio">
              <span class="streak-overlay__label">üî• Racha</span>
              <span class="streak-overlay__value" id="studyStreakValue">0 d√≠as</span>
            </div>
            <div class="calendar-header">
              <div class="cal-title">
                <h2 id="monthTitle"></h2>
              </div>
              <div class="cal-controls">
                <div class="cal-controls-group">
                  <button class="cal-nav-btn" id="btnStudyReturn" type="button" title="Volver al mes actual" hidden>
                    <span>Volver a hoy</span>
                  </button>
                  <button class="cal-nav-btn" id="btnStudyPrev" type="button" title="Mes anterior">
                    <svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                    <span>Mes anterior</span>
                  </button>
                  <button class="cal-nav-btn" id="btnStudyNext" type="button" title="Mes siguiente">
                    <span>Mes siguiente</span>
                    <svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 6l6 6-6 6"/></svg>
                  </button>
                </div>
              </div>
            </div>
            <div class="cal-hint" id="studyHint">Click en un d√≠a para registrar estudio</div>

            <div class="grid" id="studyDow">
              <div class="dow">Lun</div><div class="dow">Mar</div><div class="dow">Mi√©</div><div class="dow">Jue</div><div class="dow">Vie</div><div class="dow">S√°b</div><div class="dow">Dom</div>
            </div>
            <div class="grid" id="calendarGrid"></div>
          </div>

        </aside>
      </div>
    </div>

    <div id="tab-academico" class="tab-card" style="display:none;">
      <div class="acad-layout">
        <div class="acad-shell">
          <div class="calendar-header">
          <div class="cal-title">
            <h2 id="acadMonthTitle"></h2>
          </div>
            <div class="cal-controls">
              <div class="cal-controls-group">
                <button class="cal-nav-btn" id="btnAcadReturn" type="button" title="Volver al mes actual" hidden>
                  <span>Volver a hoy</span>
                </button>
                <button class="cal-nav-btn" id="btnAcadPrev" type="button" title="Mes anterior">
                  <svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                  <span>Mes anterior</span>
                </button>
                <button class="cal-nav-btn" id="btnAcadNext" type="button" title="Mes siguiente">
                  <span>Mes siguiente</span>
                  <svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 6l6 6-6 6"/></svg>
                </button>
              </div>
            </div>
          </div>

          <div class="grid" id="acadDow">
            <div class="dow">Lun</div><div class="dow">Mar</div><div class="dow">Mi√©</div><div class="dow">Jue</div><div class="dow">Vie</div><div class="dow">S√°b</div><div class="dow">Dom</div>
          </div>
          <div class="grid" id="acadGrid" style="margin-top:8px;"></div>
        </div>
        <div class="acad-widgets">
          <div class="acad-info-panel" id="acadInfoPanel">
            <div class="acad-info-empty" id="acadInfoEmpty">
              <div class="acad-empty-logo">
                <img src="assets/fcefyn-logo.svg" alt="Logo FCEFyN" />
              </div>
              <div class="acad-empty-title" id="acadEmptyTitle">Seleccion√° un d√≠a</div>
              <div class="acad-empty-sub" id="acadEmptySub">No hay registros para este d√≠a.</div>
            </div>

            <div class="acad-detail" id="acadDetailBox" style="display:none;">
              <div class="acad-detail-top">
                <div>
                  <div class="acad-detail-title" id="acadDetailTitle">Detalle del d√≠a</div>
                  <div class="acad-detail-sub" id="acadDetailSub">‚Äî</div>
                </div>
                <div style="display:flex;gap:.45rem;flex-wrap:wrap;justify-content:flex-end;">
                  <span class="badge-soft">Pendientes mes: <strong id="monthlyPendingCount">0</strong></span>
                  <span class="badge-soft" id="acadDetailCount">0</span>
                </div>
              </div>
              <div class="acad-detail-list" id="acadDetailList"></div>
            </div>
          </div>
          <div class="acad-action-group">
            <button class="btn-dark" id="acadNewEntry" type="button">Nuevo registro</button>
          </div>
          <section id="acadPendingWidget" class="widget-card"></section>
          <section id="acadUpcomingWidget" class="widget-card"></section>
        </div>  
      </div>
    </div>

    <div id="tab-agenda" class="tab-card" style="display:none;">
      <div class="agenda-header-row">
        <div class="agenda-title">
          <h3>Agenda semanal (08:00 ‚Äî 22:00)</h3>
                  <div class="agenda-presets-inline">
          <div class="preset-chips-row" id="agendaPresetChips" role="tablist" aria-label="Presets de agenda"></div>
        </div>
        </div>

        <div class="agenda-actions">
          <button class="btn-outline btn-small" id="btnDownloadAgendaPng">Descargar PNG</button>
          <button class="btn-outline btn-small" id="btnDownloadAgendaPdf">Descargar PDF</button>
          <button class="btn-outline btn-small" id="btnPlanificadorAgenda">Planificador de Agenda</button>
        </div>
      </div>
      <div class="agenda-shell">
        <div class="agenda-grid" id="agendaGrid"></div>
      </div>
    </div>

    <div id="tab-materias" class="tab-card" style="display:none;">
      <div class="subjects-modern-layout">
        <section class="subjects-catalog-panel">
          <header class="subjects-modern-header">
            <h3>Cat√°logo de Materias</h3>
            <p class="small-muted">Explor√° y agreg√° materias a tu plan.</p>
          </header>

          <div class="notice" id="subjectCareerNotice" style="display:none;">
            Necesit√°s elegir tu carrera en Perfil para habilitar materias autom√°ticamente.
            <button class="link" type="button" id="subjectCareerGoProfile">Ir a Perfil</button>
          </div>

          <div class="subject-form-field">
            <label for="catalogCareerLabel">Carrera activa</label>
            <p id="catalogCareerLabel" class="small-muted">Seleccion√° tu carrera en Perfil.</p>
          </div>

          <div class="subject-catalog-search-wrap">
            <input id="subjectCatalogSearch" type="search" placeholder="Buscar materia..." aria-label="Buscar materia en cat√°logo" />
          </div>

          <div id="subjectPlanHint" class="small-muted subject-plan-inline-hint">Seleccion√° una carrera para ver sus materias.</div>
          <div id="subjectCatalogList" class="subject-catalog-list" aria-live="polite"></div>
        </section>

        <section class="subjects-active-panel">
          <header class="subjects-modern-header subjects-modern-header--row">
            <div>
              <h3>Mis Materias</h3>
              <p class="small-muted">Configur√° los colores de tus cursadas actuales.</p>
            </div>
            <div class="subjects-active-total"><strong id="subjectsActiveCount">0</strong><span>Total activas</span></div>
          </header>

          <div id="subjectsList" class="subjects-active-list"></div>
          <div id="subjectsEmptyMsg" class="subjects-empty-msg" style="display:none;">Todav√≠a no agregaste materias activas.</div>

          <div class="subjects-apply-hint">
            Los cambios en el color se aplicar√°n autom√°ticamente a <strong>Agenda</strong>, <strong>Plan de Estudio</strong> y <strong>Historial Acad√©mico</strong>.
          </div>

          <footer class="subjects-modern-footer">
            <button class="btn-outline btn-small" id="btnSubjectReset" type="button">Limpiar selecci√≥n</button>
            <span class="subjects-autosave-label" aria-live="polite">Guardado autom√°ticamente</span>
          </footer>
        </section>
      </div>

      <input id="subjectColor" type="color" value="#E6D98C" class="subject-color-input" aria-hidden="true" />
      <div id="subjectColorPalette" class="hidden" aria-hidden="true">
        <button class="subject-color-swatch" type="button" data-color="#E6D98C"></button>
        <button class="subject-color-swatch" type="button" data-color="#F2A65A"></button>
        <button class="subject-color-swatch" type="button" data-color="#EF6F6C"></button>
        <button class="subject-color-swatch" type="button" data-color="#E377C2"></button>
        <button class="subject-color-swatch" type="button" data-color="#8A7FF0"></button>
        <button class="subject-color-swatch" type="button" data-color="#4C7DFF"></button>
        <button class="subject-color-swatch" type="button" data-color="#2EC4B6"></button>
        <button class="subject-color-swatch" type="button" data-color="#34C759"></button>
        <button class="subject-color-swatch" type="button" data-color="#A0AEC0"></button>
      </div>
    </div>

    <div id="tab-planestudios" class="tab-card" style="display:none;">
      <div class="planner-toolbar" style="margin-bottom:.8rem;">
        <div class="planner-toolbar-left">
          <strong>Correlativas de <span id="careerName">-</span></strong>
        </div>
      </div>
      <div class="plan-frame">
        <div class="correlativas-plans">
          <div class="notice" id="planTabNotice" style="display:none;">
          Necesit√°s elegir tu carrera en Perfil para ver el plan de estudios autom√°ticamente.
          <button class="link" type="button" id="planGoProfile">Ir a Perfil</button>
        </div>
        <div id="correlativasPlansRoot" class="plans-embedded-host" aria-live="polite"></div>
        </div>
      </div>
    </div>
  <!--------------------- PLANIFICAR  ------------------------------------------------>
    <!------------------------- PROFESORES ------------------------------->
    
    <div id="tab-profesores" class="tab-card" style="display:none;">
      <div id="filtersSection">
        <header class="prof-directory-header">
          <div>
            <h2>Directorio de Profesores</h2>
            <div id="profTotalLabel" class="small-muted">0 profesores</div>
          </div>
          <div class="prof-filters">
            <label class="prof-search-input" aria-label="Buscar profesor por nombre">
              <span>üîé</span>
              <input id="profSearchInput" type="search" placeholder="Buscar profesor por nombre">
            </label>
            <button id="profAdvancedFiltersBtn" class="btn-outline btn-small" type="button">Filtros avanzados</button>
          </div>
        </header>

        <div id="profTopPagination" class="prof-pagination">
          <button id="profPrevPage" class="btn-outline btn-small" type="button" aria-label="P√°gina anterior">&lt;</button>
          <span id="profPageIndicator">1 / 1</span>
          <button id="profNextPage" class="btn-outline btn-small" type="button" aria-label="P√°gina siguiente">&gt;</button>
        </div>

        <div id="professorsList" class="prof-grid"></div>
      </div>

      <div id="professorDetailSection" class=" hidden">
        <button id="volverListaProfesores" class="btn-outline btn-small" type="button">‚Üê Volver</button>
    
        <div id="profDetailBox"></div>
      </div>

      <div id="profRatingModal" class="prof-modal hidden" role="dialog" aria-modal="true" aria-labelledby="profModalTitle">
        <div class="prof-modal-backdrop" data-close="true"></div>
        <div class="prof-modal-content">
          <div class="prof-modal-header">
            <h3 id="profModalTitle">Calificar Profesor</h3>
            <button id="closeProfRatingModal" class="btn-icon" type="button" aria-label="Cerrar modal">‚úï</button>
          </div>
          <div id="profModalProfessorName" class="prof-modal-professor"></div>
          <div id="profRatingGroups"></div>
          <div class="prof-modal-actions">
            <button class="btn-outline btn-small" id="btnCancelRatingModal" type="button">Cancelar</button>
            <button class="btn-blue btn-small" id="btnSubmitRating" type="button">Enviar</button>
          </div>
        </div>
      </div>

      <div id="profCommentModal" class="prof-modal hidden" role="dialog" aria-modal="true" aria-labelledby="profCommentModalTitle">
        <div class="prof-modal-backdrop" data-close="true"></div>
        <div class="prof-modal-content prof-comment-modal-content">
          <div class="prof-modal-header">
            <h3 id="profCommentModalTitle">Dejar comentario</h3>
            <button id="closeProfCommentModal" class="btn-icon" type="button" aria-label="Cerrar modal">‚úï</button>
          </div>
          <label class="prof-modal-label" for="profCommentInput">Comentario</label>
          <textarea id="profCommentInput" maxlength="500" placeholder="Escribe tu comentario aqu√≠..."></textarea>
          <div id="profCommentCount" class="small-muted prof-comment-count">0 / 500</div>
          <label class="prof-rate-check">
            <input type="checkbox" id="profCommentAnonymous">
            <span>Publicar an√≥nimamente</span>
          </label>
          <p class="prof-comment-hint">Si quer√©s, tambi√©n pod√©s <button id="profCommentRateShortcut" type="button">calificar al profesor</button>.</p>
          <div class="prof-modal-actions">
            <button class="btn-outline btn-small" id="btnCancelCommentModal" type="button">Cancelar</button>
            <button class="btn-blue btn-small" id="btnSubmitComment" type="button" disabled>Enviar</button>
          </div>
        </div>
      </div>

      <div id="profAdvancedFiltersModal" class="prof-modal hidden" role="dialog" aria-modal="true" aria-labelledby="profFiltersModalTitle">
        <div class="prof-modal-backdrop" data-close="true"></div>
        <div class="prof-modal-content prof-filters-modal-content">
          <div class="prof-modal-header">
            <h3 id="profFiltersModalTitle">Filtros avanzados</h3>
            <button id="closeProfAdvancedFiltersModal" class="btn-icon" type="button" aria-label="Cerrar filtros">‚úï</button>
          </div>

          <div class="prof-filter-field">
            <label for="profSubjectFilterSelect">Materia</label>
            <select id="profSubjectFilterSelect" aria-label="Filtrar por materia">
              <option value="">Todas las materias</option>
            </select>
          </div>

          <div class="prof-filter-field">
            <label for="profRankingFilterSelect">Ordenamiento</label>
            <select id="profRankingFilterSelect" aria-label="Ordenamiento de profesores">
              <option value="">Sin ordenamiento</option>
              <option value="reviews_desc">M√°s rese√±as</option>
              <option value="average_desc">Mejor promedio</option>
              <option value="teaching_desc">Mejor ense√±anza</option>
              <option value="treatment_desc">Mejor trato con estudiantes</option>
              <option value="exams_easy">Parciales m√°s f√°ciles</option>
              <option value="exams_hard">Parciales m√°s dif√≠ciles</option>
            </select>
          </div>

          <div class="prof-modal-actions">
            <button class="btn-outline btn-small" id="profClearAdvancedFilters" type="button">Limpiar filtros</button>
          </div>
        </div>
      </div>
    </div>

    <div id="tab-comunidad" class="tab-card" style="display:none;">
      <section class="coming-view" aria-labelledby="coming-comunidad-title">
        <div class="coming-illustration" aria-hidden="true">
          <svg viewBox="0 0 320 210" fill="none" xmlns="http://www.w3.org/2000/svg">
            <ellipse cx="160" cy="105" rx="124" ry="80" fill="var(--primary-20)"/>
            <circle cx="112" cy="92" r="18" stroke="var(--color-text)" stroke-width="2"/>
            <circle cx="160" cy="84" r="20" stroke="var(--color-text)" stroke-width="2"/>
            <circle cx="210" cy="95" r="17" stroke="var(--color-text)" stroke-width="2"/>
            <path d="M82 145c4-19 19-30 38-30 20 0 34 11 38 30" stroke="var(--color-text)" stroke-width="2" stroke-linecap="round"/>
            <path d="M125 152c5-23 21-36 41-36s36 13 41 36" stroke="var(--color-text)" stroke-width="2" stroke-linecap="round"/>
            <path d="M182 146c4-17 16-27 33-27 16 0 28 10 32 27" stroke="var(--color-text)" stroke-width="2" stroke-linecap="round"/>
            <path d="M126 63h68" stroke="var(--accent-70)" stroke-width="2" stroke-linecap="round"/>
            <path d="M126 52h45" stroke="var(--accent-70)" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <h2 id="coming-comunidad-title">Comunidad</h2>
        <p>Conectate con estudiantes, compart√≠ recursos y particip√° en espacios colaborativos.</p>
      </section>
    </div>

    <div id="tab-recreo" class="tab-card" style="display:none;">
      <section class="coming-view" aria-labelledby="coming-recreo-title">
        <div class="coming-illustration" aria-hidden="true">
          <svg viewBox="0 0 320 210" fill="none" xmlns="http://www.w3.org/2000/svg">
            <ellipse cx="160" cy="106" rx="118" ry="76" fill="var(--primary-20)"/>
            <rect x="86" y="72" width="148" height="78" rx="34" stroke="var(--color-text)" stroke-width="2"/>
            <path d="M117 88v20M107 98h20" stroke="var(--accent-70)" stroke-width="2" stroke-linecap="round"/>
            <circle cx="184" cy="102" r="12" stroke="var(--color-text)" stroke-width="2"/>
            <circle cx="215" cy="96" r="6" fill="var(--accent-60)"/>
            <circle cx="226" cy="116" r="6" fill="var(--accent-60)"/>
            <circle cx="170" cy="124" r="8" fill="var(--primary-45)" stroke="var(--color-text)" stroke-width="2"/>
            <circle cx="150" cy="124" r="8" fill="var(--primary-45)" stroke="var(--color-text)" stroke-width="2"/>
            <path d="M136 164h48" stroke="var(--color-text)" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <h2 id="coming-recreo-title">Recreo</h2>
        <p>Estamos preparando actividades y propuestas para desconectar y disfrutar en comunidad.</p>
      </section>
    </div>

    <div id="tab-biblioteca" class="tab-card" style="display:none;">
      <section class="coming-view" aria-labelledby="coming-biblioteca-title">
        <div class="coming-illustration" aria-hidden="true">
          <svg viewBox="0 0 320 210" fill="none" xmlns="http://www.w3.org/2000/svg">
            <ellipse cx="160" cy="108" rx="120" ry="78" fill="var(--primary-20)"/>
            <rect x="92" y="72" width="30" height="74" rx="4" stroke="var(--color-text)" stroke-width="2"/>
            <rect x="126" y="64" width="34" height="82" rx="4" fill="var(--primary-45)" stroke="var(--color-text)" stroke-width="2"/>
            <rect x="164" y="78" width="28" height="68" rx="4" stroke="var(--color-text)" stroke-width="2"/>
            <rect x="196" y="70" width="32" height="76" rx="4" fill="var(--accent-bg)" stroke="var(--color-text)" stroke-width="2"/>
            <path d="M84 146h152" stroke="var(--color-text)" stroke-width="2" stroke-linecap="round"/>
            <path d="M146 88h10" stroke="var(--color-text)" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <h2 id="coming-biblioteca-title">Biblioteca</h2>
        <p>Muy pronto vas a poder encontrar material acad√©mico, gu√≠as y lecturas recomendadas.</p>
      </section>
    </div>

    <div id="tab-transporte" class="tab-card" style="display:none;">
      <section class="coming-view" aria-labelledby="coming-transporte-title">
        <div class="coming-illustration" aria-hidden="true">
          <svg viewBox="0 0 320 210" fill="none" xmlns="http://www.w3.org/2000/svg">
            <ellipse cx="160" cy="112" rx="122" ry="74" fill="var(--primary-20)"/>
            <rect x="84" y="74" width="152" height="72" rx="16" stroke="var(--color-text)" stroke-width="2"/>
            <path d="M84 106h152" stroke="var(--color-text)" stroke-width="2"/>
            <rect x="98" y="84" width="36" height="20" rx="4" fill="var(--primary-45)" stroke="var(--color-text)" stroke-width="2"/>
            <rect x="140" y="84" width="36" height="20" rx="4" fill="var(--primary-45)" stroke="var(--color-text)" stroke-width="2"/>
            <rect x="182" y="84" width="36" height="20" rx="4" fill="var(--primary-45)" stroke="var(--color-text)" stroke-width="2"/>
            <circle cx="118" cy="148" r="12" fill="var(--surface-1)" stroke="var(--color-text)" stroke-width="2"/>
            <circle cx="202" cy="148" r="12" fill="var(--surface-1)" stroke="var(--color-text)" stroke-width="2"/>
            <path d="M74 162h170" stroke="var(--color-text)" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <h2 id="coming-transporte-title">Transporte</h2>
        <p>Estamos armando esta secci√≥n para centralizar recorridos, horarios y opciones para llegar a la facultad.</p>
      </section>
    </div>
    <!-- MENSAJER√çA -->
    <div id="tab-mensajes" class="tab-card" data-title="Mensajes" style="display:none;">
      <section class="mensajeria-layout mensajeria-container" aria-label="Mensajer√≠a entre estudiantes">
        <aside class="mensajeria-sidebar messages-left sidebar-mensajes">
          <article class="card-block mensajeria-card add-amigo">
            <div class="block-title add-amigo-header-row">
              <span>Agregar amigo</span>
            </div>
            <div class="small-muted">Abr√≠ el buscador para encontrar estudiantes y enviar solicitudes.</div>
            <div class="friend-form add-amigo-form">
              <button class="btn-outline btn-small btn-send-request" id="openFriendSearch" type="button">Enviar solicitud</button>
            <button class="quick-toggle-btn heart-toggle-btn" id="friendRequestsBtn" type="button" aria-label="Ver solicitudes de amistad">
                ‚ù§Ô∏è
                <span id="friendReqBadge" class="friend-requests-badge" hidden>0</span>
              </button>
            </div>
          </article>

          <article class="card-block mensajeria-card friends-block">
            <div class="block-title friends-title-row">
              <span>Lista de amigos</span>
            </div>
            <div class="chat-filter-chips" id="friendsFilterChips">
              <button type="button" class="chip-filter active" data-filter="all">Todos</button>
              <button type="button" class="chip-filter" data-filter="online">En l√≠nea</button>
              <button type="button" class="chip-filter" data-filter="unread">No le√≠dos</button>
            </div>
            <label class="friends-search" for="friendsSearchInput">
              <span aria-hidden="true">üîç</span>
              <input id="friendsSearchInput" type="search" placeholder="Buscar amigo‚Ä¶" autocomplete="off" />
            </label>
            <div id="friendsListBox" class="friends-box friend-list" aria-live="polite"></div>
          </article>
        </aside>

        <section class="mensajeria-chat messages-right panel-chat">
          <article class="card-block mensajeria-card mensajeria-chat-card chat-card">
            <div class="chat-header">
              <div class="chat-header-main">
                <img id="chatAvatar" class="chat-avatar" src="" alt="Avatar del chat" />
                <div>
                  <div id="chatHeader" class="chat-title">No hay conversaci√≥n activa</div>
                  <div id="chatSubheader" class="chat-subtitle">Seleccion√° un amigo para empezar a chatear.</div>
                </div>
              </div>
              <div class="chat-header-actions">
                <button id="chatMenuButton" class="chat-menu-button" type="button" aria-label="Opciones del chat">‚ãØ</button>
                <div id="chatContextMenu" class="chat-context-menu hidden" role="menu" aria-hidden="true">
                  <button type="button" data-action="toggle-pin">Fijar chat</button>
                  <button type="button" data-action="mark-unread">Marcar como no le√≠do</button>
                  <button type="button" data-action="mute-8h">Silenciar 8h</button>
                  <button type="button" data-action="mute-24h">Silenciar 24h</button>
                  <button type="button" data-action="mute-always">Silenciar siempre</button>
                  <button type="button" data-action="archive-chat">Archivar chat</button>
                  <button type="button" data-action="open-settings">Ajustes de chat</button>
                </div>
              </div>
            </div>
            <div id="messagesList" class="messages-box">
              <div class="chat-placeholder">No hay conversaci√≥n activa</div>
            </div>
            <div class="chat-input-row" id="chatInputRow">
              <button class="btn-outline btn-small emoji-button" id="btnEmoji" type="button" aria-label="Emoji">‚ò∫</button>
              <input id="messageInput" placeholder="Seleccion√° un amigo para chatear" disabled />
              <button class="btn-blue btn-small btn-send-pill" id="btnSendMessage" type="button" disabled>Enviar</button>
            </div>
          </article>

          <div id="chatSettingsModal" class="chat-settings-overlay hidden" aria-hidden="true">
            <div class="chat-settings-modal" role="dialog" aria-modal="true" aria-labelledby="chatSettingsTitle">
              <div class="chat-settings-header">
                <h3 id="chatSettingsTitle">Ajustes de Chat</h3>
                <button id="closeChatSettings" type="button" aria-label="Cerrar ajustes">√ó</button>
              </div>

              <section class="chat-settings-section">
                <h4>Temas Personalizables</h4>
                <div id="chatThemeOptions" class="theme-options"></div>
              </section>

              <section class="chat-settings-section">
                <h4>Notificaciones</h4>
                <label class="toggle-line"><span>Notificaciones activadas</span><input type="checkbox" id="prefNotificationsEnabled" /></label>
                <label class="toggle-line"><span>Sonido de mensaje</span><input type="checkbox" id="prefSoundEnabled" /></label>
                <label class="toggle-line"><span>Mostrar estado en l√≠nea</span><input type="checkbox" id="prefShowOnlineStatus" /></label>
              </section>

              <section class="chat-settings-section">
                <h4>Privacidad</h4>
                <label class="toggle-line"><span>Mostrar √∫ltima conexi√≥n</span><input type="checkbox" id="prefShowLastSeen" /></label>
                <button type="button" id="btnBlockUser" class="btn-danger-soft">Bloquear usuario</button>
              </section>
            </div>
          </div>
        </section>
      </section>
    </div>

    <!-- PERFIL -->
    <div id="tab-perfil" class="tab-card profile-page" data-title="Perfil" style="display:none;">
      <div class="profile-page-shell">
        <section class="profile-card profile-main-card">
          <header class="profile-header profile-header-center">
            <strong>Tu perfil</strong>
            <div class="small-muted">Actualiz√° tus datos b√°sicos y mantenelos al d√≠a.</div>
          </header>

          <div class="profile-avatar profile-avatar-centered">
            <div class="profile-header">
              <div class="profile-header-main">
                <img id="profileAvatarImg" alt="Foto de perfil" />
                <button class="btn-outline btn-small" id="btnProfileLogout" type="button" onclick="window.logout && window.logout()">Cerrar sesi√≥n</button>
              </div>
            </div>
                <label class="toggle-line">
                <input type="checkbox" id="toggleLastSeen" />
                <span>Mostrar mi √∫ltima conexi√≥n</span>
              </label>
            <div class="profile-email" id="profileEmail">‚Äî</div>
            <div class="profile-avatar-actions">
              <label class="profile-avatar-input" for="inpAvatar">
                <span>Seleccionar imagen</span>
                <input type="file" id="inpAvatar" accept="image/*" />
              </label>
              <div class="profile-avatar-buttons">
                <button class="btn-blue btn-small" id="btnUploadAvatar" type="button">Guardar foto</button>
                <button class="btn-outline btn-small" id="btnRemoveAvatar" type="button">Quitar</button>
              </div>
              <div class="profile-avatar-status" id="profileAvatarStatus"></div>
            </div>
          </div>

          <section class="profile-section">
            <div class="profile-section-title">Datos b√°sicos</div>
            <div class="profile-grid">
              <div class="profile-field">
                <label>Nombre</label>
                <input id="profileFirstName" placeholder="Nombre" />
              </div>
              <div class="profile-field">
                <label>Apellido</label>
                <input id="profileLastName" placeholder="Apellido" />
              </div>
              <div class="profile-field">
                <label>Carrera</label>
                <select id="inpCareer"></select>
              </div>
              <div class="profile-field">
                <label>A√±o de ingreso</label>
                <input id="profileYearIn" type="number" min="1990" max="2100" placeholder="Ej: 2024" />
              </div>
              <!--  
              <div class="profile-field">
                <label>2da Carrera (opcional)</label>
                <select id="profileCareer2"></select>
              </div>
              <div class="profile-field">
                <label>A√±o de ingreso</label>
                <input id="profileYearIn2" type="number" min="1990" max="2100" placeholder="Ej: 2024" />
              </div>
                -->
              <div class="profile-field profile-field-wide">
                <label>Documento / DNI / Legajo</label>
                <input id="profileDocument" placeholder="Opcional" />
              </div>
            </div>
          </section>

          <div class="profile-actions">
            <button class="btn-blue" id="btnProfileSave" type="button">Guardar cambios</button>
            <div class="profile-status" id="profileStatus"></div>
          </div>
        </section>

        <section class="profile-card profile-security-card">
          <header class="profile-header">
            <div>
              <strong>Seguridad</strong>
              <div class="small-muted">Gestion√° tu contrase√±a desde el correo institucional.</div>
            </div>
          </header>
          <div class="profile-security">
            <div class="small-muted">
              Al confirmar, te enviaremos un correo para cambiar tu contrase√±a de forma segura.
            </div>
            <button class="btn-outline btn-small" id="btnPasswordReset" type="button">Cambiar contrase√±a</button>
            <div class="profile-status" id="passwordStatus"></div>
          </div>
        </section>
      </div>
    </div>
  </main>
    </div>
  </div>

  <div id="friendSearchOverlay" class="friend-search-overlay hidden" aria-hidden="true">
    <div class="friend-search-modal" role="dialog" aria-modal="true" aria-labelledby="friendSearchTitle">
      <div class="friend-search-header">
        <h3 id="friendSearchTitle">Buscar amigos</h3>
        <button id="closeFriendSearch" type="button" aria-label="Cerrar buscador de amigos">√ó</button>
      </div>
      <div class="friend-search-field">
        <span class="friend-search-icon" aria-hidden="true">üîç</span>
        <input type="text" id="friendSearchInput" placeholder="Buscar por correo o nombre‚Ä¶" aria-label="Buscar usuario por correo o nombre" />
        <button id="clearFriendSearch" class="friend-search-clear" type="button" aria-label="Limpiar b√∫squeda" hidden>√ó</button>
      </div>
      <div class="friend-search-helper">Se mostrar√°n usuarios con cuenta @mi.unc.edu.ar</div>
      <div id="friendSearchError" class="friend-search-error" hidden></div>
      <div id="friendSearchResults" class="friend-search-results" aria-live="polite"></div>
      <input id="friendEmailInput" type="email" hidden aria-hidden="true" tabindex="-1" />
    </div>
  </div>

  <div id="friendRequestsModal" class="friend-requests-modal-overlay" aria-hidden="true" hidden>
    <div class="friend-requests-modal" role="dialog" aria-modal="true" aria-labelledby="friendRequestsModalTitle">
      <div class="friend-requests-modal-header">
        <h3 id="friendRequestsModalTitle">Solicitudes de amistad</h3>
        <button id="closeFriendRequestsModal" type="button" class="friend-requests-close" aria-label="Cerrar solicitudes de amistad">√ó</button>
      </div>
      <div class="friend-requests-modal-body">
        <div class="friend-requests-modal-grid">
          <section class="friend-requests-column">
            <h4>Recibidas</h4>
            <div id="incomingRequests" class="requests-box friend-list modal-requests-list" aria-live="polite"></div>
          </section>
          <section class="friend-requests-column">
            <h4>Enviadas</h4>
            <div id="outgoingRequests" class="requests-box friend-list modal-requests-list" aria-live="polite"></div>
          </section>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="modalBg">
    <div class="modal modal-planner">
      <div class="modal-header">
        <h3 class="modal-title" id="studyModalTitle">Nuevo registro</h3>
        <button class="modal-close" id="btnStudyClose" type="button" aria-label="Cerrar">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="modal-field">
          <label for="inpMateria">Materia</label>
          <select id="inpMateria"></select>
          <p class="modal-field-hint">Desliz√° para ver m√°s materias ‚ãØ</p>
        </div>
        <div class="modal-field">
          <label for="inpTema">Tema</label>
          <input id="inpTema" placeholder="Tema a estudiar" />
        </div>
        <div class="modal-field modal-inline-row">
          <div>
            <label for="inpHoras">Horas</label>
            <input id="inpHoras" placeholder="0" type="number" min="0" />
          </div>
          <div>
            <label for="inpMins">Minutos</label>
            <input id="inpMins" placeholder="0" type="number" min="0" />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-outline" id="btnCancelar" type="button">Cancelar</button>
        <button class="btn-blue btn-large" id="btnGuardar" type="button">Guardar</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="agendaModalBg">
    <div class="modal">
      <h3 class="modal-title" id="agendaModalTitle">A√±adir clase</h3>
      <label>D√≠a</label>
      <select id="agendaDay"></select>

      <label>Materia</label>
      <select id="agendaSubject"></select>

      <label>Sede / Modalidad</label>
      <select id="agendaLocation" required>
        <option value="Ciudad Universitaria">Ciudad Universitaria</option>
        <option value="Centro">Centro</option>
        <option value="Virtual Sincr√≥nica">Virtual Sincr√≥nica</option>
      </select>

      <label>Aula (opcional)</label>
      <input id="agendaRoom" placeholder="Ej: 100, 218, Lab 2" />

      <div style="display:flex;gap:.5rem;">
        <div style="flex:1;">
          <label>Inicio</label>
          <input id="agendaStart" type="time" min="08:00" max="23:00" />
        </div>
        <div style="flex:1;">
          <label>Fin</label>
          <input id="agendaEnd" type="time" min="08:00" max="23:00" />
        </div>
      </div>

      <div style="margin-top:.6rem;display:flex;gap:.5rem;justify-content:flex-end;">
        <button class="btn-gray btn-small" id="btnAgendaCancel">Cancelar</button>
        <button class="btn-danger btn-small" id="btnAgendaDelete" style="display:none;">Eliminar</button>
        <button class="btn-blue btn-small" id="btnAgendaSave">Guardar</button>
      </div>
    </div>
  </div>

  <div class="modal-bg planner-modal-bg" id="plannerModalBg" aria-hidden="true">
    <div class="planner-modal" role="dialog" aria-modal="true" aria-labelledby="plannerModalTitle">
      <div class="planner-modal-header">
        <div class="planner-header">
          <div class="planner-title">
            <h2 class="planner-modal-title" id="plannerModalTitle">Planificador de Agenda</h2>
            <p class="small-muted">Selecciona y organiza tus comisiones para el ciclo actual.</p>
          </div>
        </div>
        <button class="modal-close" id="btnPlannerClose" aria-label="Cerrar planificador">‚úï</button>
      </div>

      <div class="planner-filters-row" data-component="Filters">
        <select class="input-mini" id="sectionsSubjectFilter" aria-label="Filtrar por materia"></select>
        <input type="text" id="plannerSearch" placeholder="Buscar en el planificador..." />
      </div>

      <div class="planner-list" id="sectionsList" aria-live="polite"></div>

      <div class="planner-modal-footer">
        <div class="planner-summary">
          Materias seleccionadas: <strong id="selectedCountLabel">0</strong>
          <span aria-hidden="true">|</span>
          Carga horaria: <strong id="selectedHoursLabel">0 hs/sem</strong>
        </div>
        <div class="planner-footer-actions">
          <button class="btn-outline btn-small" id="btnPlannerCancel" type="button">Cancelar</button>
          <button class="btn-plan-apply" id="btnPlannerApplyToAgenda" type="button" disabled>Aplicado autom√°ticamente</button>
        </div>
      </div>
    </div>
  </div>


  <div class="modal-bg planner-modal-bg" id="subjectsModalBg" aria-hidden="true">
    <div class="planner-modal" style="margin-top: 5rem;" role="dialog" aria-modal="true" aria-labelledby="subjectsModalTitle">
      <div class="planner-modal-header">
        <div>
          <h2 class="planner-modal-title" id="subjectsModalTitle">Materias</h2>
          <p class="small-muted">Listado de materias creadas para tus vistas acad√©micas.</p>
        </div>
        <button class="modal-close" id="btnSubjectsClose" aria-label="Cerrar materias">‚úï</button>
      </div>

      <div class="planner-list" id="subjectsModalList" aria-live="polite"></div>

      <section class="subject-modal-form-box" aria-labelledby="subjectsModalCreateTitle">
        <div class="subject-form-header">
          <div>
            <strong id="subjectsModalCreateTitle">Nueva materia</strong>
            <div class="small-muted">Complet√° los datos y guard√° los cambios.</div>
          </div>
        </div>

        <div class="subject-form-field">
          <label for="subjectsModalNameSelect">Materia</label>
          <select id="subjectsModalNameSelect" aria-label="Seleccion√° una materia"></select>
          <div class="small-muted" id="subjectsModalPlanHint">Seleccion√° una materia</div>
        </div>

        <div class="subject-form-field">
          <label>Color identificatorio</label>
          <div class="subject-color-row">
            <div class="subject-color-palette" id="subjectsModalColorPalette">
              <button class="subject-color-swatch" type="button" data-color="#E6D98C" aria-label="Color dorado suave"></button>
              <button class="subject-color-swatch" type="button" data-color="#F2A65A" aria-label="Color √°mbar"></button>
              <button class="subject-color-swatch" type="button" data-color="#EF6F6C" aria-label="Color coral"></button>
              <button class="subject-color-swatch" type="button" data-color="#E377C2" aria-label="Color magenta"></button>
              <button class="subject-color-swatch" type="button" data-color="#8A7FF0" aria-label="Color violeta"></button>
              <button class="subject-color-swatch" type="button" data-color="#4C7DFF" aria-label="Color azul"></button>
              <button class="subject-color-swatch" type="button" data-color="#2EC4B6" aria-label="Color turquesa"></button>
              <button class="subject-color-swatch" type="button" data-color="#34C759" aria-label="Color verde"></button>
              <button class="subject-color-swatch" type="button" data-color="#A0AEC0" aria-label="Color gris"></button>
            </div>
            <input id="subjectsModalColor" type="color" value="#E6D98C" class="subject-color-input" aria-label="Selector de color manual" />
            <button class="btn-outline btn-small" id="subjectsModalColorManualBtn" type="button">Agregar color manual</button>
          </div>
        </div>

        <div class="subject-form-actions">
          <button class="btn-gray btn-small" id="btnSubjectsModalReset" type="button">Limpiar</button>
          <button class="btn-blue btn-small" id="btnSubjectsModalSave" type="button">Guardar</button>
        </div>
      </section>

      <div class="planner-modal-footer">
        <div class="small-muted">Los cambios se reflejan autom√°ticamente en Materias, Agenda y Acad√©mico.</div>
        <div class="planner-footer-actions">
          <button class="btn-outline btn-small" id="btnSubjectsCancel" type="button">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="presetToAgendaModalBg">
    <div class="modal modal-wide">
      <h3 class="modal-title">Pasar preset a Agenda</h3>

      <div class="small-muted" style="margin-bottom:.45rem;">
        Eleg√≠ qu√© preset quer√©s aplicar y si quer√©s <strong>agregar</strong> a tu agenda actual o <strong>reemplazarla</strong>.
        (Los cambios se guardan en Firebase).
      </div>

      <label>Preset</label>
      <select id="presetApplySelect"></select>

      <label style="margin-top:.35rem;">Modo</label>
      <div class="radio-row">
        <label class="radio-pill">
          <input type="radio" name="applyMode" value="add" checked />
          <span><strong>Agregar</strong> (no borra tu agenda)</span>
        </label>
        <label class="radio-pill">
          <input type="radio" name="applyMode" value="replace" />
          <span><strong>Reemplazar</strong> (borra tu agenda y pone el preset)</span>
        </label>
      </div>

      <div class="small-muted" id="presetApplyInfo" style="margin-top:.5rem;"></div>

      <hr class="hr-soft">

      <div style="display:flex;gap:.5rem;justify-content:flex-end;flex-wrap:wrap;">
        <button class="btn-gray btn-small" id="btnPresetApplyCancel">Cancelar</button>
        <button class="btn-blue btn-small" id="btnPresetApplyConfirm">Aplicar a Agenda</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="acadModalBg">
    <div class="modal modal-planner">
      <div class="modal-header">
        <h3 class="modal-title" id="acadModalTitle">Nuevo registro</h3>
        <button class="modal-close" id="btnAcadClose" type="button" aria-label="Cerrar">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="modal-field">
          <div class="modal-section-title">Tipo de actividad</div>
          <div class="pill-group" id="acadTypePills">
            <button type="button" class="pill-btn" data-acad-type="Examen">Examen</button>
            <button type="button" class="pill-btn is-active" data-acad-type="Parcial">Parcial</button>
            <button type="button" class="pill-btn" data-acad-type="TP">TP</button>
            <button type="button" class="pill-btn" data-acad-type="Pr√°ctico">Pr√°ctico</button>
          </div>
          <select id="acadType" class="sr-only" aria-hidden="true">
            <option value="Examen">Examen</option>
            <option value="Parcial">Parcial</option>
            <option value="TP">TP</option>
            <option value="Estudio">Estudio</option>
            <option value="Clase">Clase</option>
            <option value="Pr√°ctico">Pr√°ctico</option>
          </select>
        </div>

        <div class="modal-field">
          <label for="acadSubject">Materia</label>
          <select id="acadSubject"></select>
        </div>

        <div class="modal-field">
          <label for="acadTitle">T√≠tulo</label>
          <input id="acadTitle" placeholder="Ej: 1er Parcial" />
        </div>

        <div class="modal-field">
          <label for="acadWhen">Hora</label>
          <input id="acadWhen" type="time" />
        </div>

        <div class="modal-field">
          <label for="acadNotes">Notas (opcional)</label>
          <textarea id="acadNotes" placeholder="Detalles, requisitos, link, etc."></textarea>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-outline" id="btnAcadCancel">Cancelar</button>
        <button class="btn-danger" id="btnAcadDelete" style="display:none;">Eliminar</button>
        <button class="btn-blue btn-large" id="btnAcadSave">Guardar</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="acadDayModalBg">
    <div class="modal">
      <div class="acad-day-modal-top">
        <div>
          <h3 class="modal-title" id="acadDayModalTitle">Detalle del d√≠a</h3>
          <div class="small-muted" id="acadDayModalSubtitle">‚Äî</div>
        </div>
        <button class="btn-blue btn-small" id="btnAcadDayAdd">Agregar registro</button>
      </div>
      <div class="acad-detail-list" id="acadDayModalList"></div>
      <div class="acad-record-detail" id="acadRecordDetail" style="display:none;"></div>
      <div class="acad-day-modal-actions">
        <button class="btn-gray btn-small" id="btnAcadDayClose">Cerrar</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="studyDayModalBg">
    <div class="modal">
      <div class="acad-day-modal-top">
        <div>
          <h3 class="modal-title" id="studyDayModalTitle">Detalle del d√≠a</h3>
          <div class="small-muted" id="studyDayModalSubtitle">‚Äî</div>
        </div>
        <button class="modal-close" id="btnStudyDayClose" type="button" aria-label="Cerrar">‚úï</button>
      </div>
      <div class="acad-day-modal-list" id="studyDayModalList"></div>
    </div>
  </div>

  <div class="modal-bg" id="studyWeeklyGoalModalBg">
    <div class="modal modal-planner">
      <div class="modal-header">
        <h3 class="modal-title">Editar meta semanal</h3>
        <button class="modal-close" id="btnStudyWeeklyGoalClose" type="button" aria-label="Cerrar">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="modal-field">
          <label for="studyWeeklyGoalHoursInput">Horas por semana</label>
          <input id="studyWeeklyGoalHoursInput" type="number" min="1" step="1" placeholder="Ej: 10" />
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-outline" id="btnStudyWeeklyGoalCancel" type="button">Cancelar</button>
        <button class="btn-blue btn-large" id="btnStudyWeeklyGoalSave" type="button">Guardar</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="helpModalBg">
    <div class="modal modal-help">
      <h3 class="modal-title" id="helpModalTitle">Ayuda</h3>
      <div class="help-modal-body" id="helpModalBody"></div>
      <div class="help-modal-actions">
        <button class="btn-blue btn-small" id="btnHelpClose">Entendido</button>
      </div>
    </div>
  </div>
  <nav class="mobile-bottombar" aria-label="Navegaci√≥n inferior m√≥vil">
    <button class="mobile-tab" type="button" data-section="inicio">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 11.5L12 4l9 7.5"/><path d="M5 10.5V20h5v-5h4v5h5v-9.5"/></svg>
      <span>Inicio</span>
    </button>
    <button class="mobile-tab" type="button" data-section="estudio">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M4 5.5h12a3 3 0 0 1 3 3V19H7a3 3 0 0 0-3 3V5.5z"/><path d="M4 5.5v13.5a3 3 0 0 1 3-3h12"/></svg>
      <span>Estudio</span>
    </button>
    <button class="mobile-tab" type="button" data-section="academico">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 8l9-4 9 4-9 4-9-4z"/><path d="M7 10.5v5.5c0 1.7 2.2 3 5 3s5-1.3 5-3v-5.5"/></svg>
      <span>Acad√©mico</span>
    </button>
    <button class="mobile-tab" type="button" data-section="agenda">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="3" y="4.5" width="18" height="16" rx="2.5"/><path d="M8 3v3M16 3v3"/><path d="M3 9h18"/></svg>
      <span>Agenda</span>
    </button>
    <button class="mobile-tab" type="button" data-more-toggle>
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="5" cy="12" r="1.5"/><circle cx="12" cy="12" r="1.5"/><circle cx="19" cy="12" r="1.5"/></svg>
      <span>M√°s</span>
    </button>
  </nav>
  <div class="mobile-more-sheet" role="dialog" aria-modal="true" aria-label="M√°s secciones">
    <div class="mobile-more-backdrop"></div>
    <div class="mobile-more-panel">
      <div class="mobile-more-header">
        <h3>M√°s</h3>
        <button class="mobile-more-close" type="button" data-more-close aria-label="Cerrar">√ó</button>
      </div>
      <div class="mobile-more-list">
        <button class="mobile-more-item" type="button" data-section="materias">
          <span class="mobile-more-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4.5" width="7" height="15" rx="2"/><rect x="13" y="4.5" width="7" height="15" rx="2"/></svg>
          </span>
          <span>Materias</span>
        </button>
        <button class="mobile-more-item" type="button" data-section="planestudios">
          <span class="mobile-more-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6h9a4 4 0 0 1 4 4v8"/><path d="M20 18H7a3 3 0 0 1-3-3V6"/><path d="M7 11h7"/></svg>
          </span>
          <span>Correlativas</span>
        </button>
        <button class="mobile-more-item" type="button" data-section="profesores">
          <span class="mobile-more-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="8" r="3.5"/><path d="M3.5 19a5.5 5.5 0 0 1 11 0"/><path d="M17 7.5a3 3 0 1 1 0 6"/><path d="M17 13.5c2.2 0 4 1.8 4 4"/></svg>
          </span>
          <span>Profesores</span>
        </button>
      </div>
    </div>
  </div>
  <button class="scroll-top-btn" id="scrollTopBtn" type="button" aria-label="Volver arriba" title="Volver arriba">
    <span aria-hidden="true">‚Üë</span>
  </button>
<script>
  // Deshabilitado: la tira inferior 3/4/5 ya no se muestra; la racha ahora es overlay.

  (() => {
    const scrollTopBtn = document.getElementById('scrollTopBtn');
    if (!scrollTopBtn) return;

    const toggleScrollTopBtn = () => {
      scrollTopBtn.classList.toggle('is-visible', window.scrollY > 300);
    };

    window.addEventListener('scroll', toggleScrollTopBtn, { passive: true });
    scrollTopBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    toggleScrollTopBtn();
  })();
</script>
<script type="module" src="scripts/student.js"></script>
<script type="module" src="scripts/ui/scroll-ui.js"></script>
  <script src="assets/js/mobile-nav.js" defer></script>

</body>
</html>
 
