<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Panel del Estudiante</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles/global.css">
  <link rel="stylesheet" href="styles/ui/saas-theme.css">
  <link rel="stylesheet" href="styles/study.css">
  <script src="scripts/ui/theme-toggle.js" defer></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js" defer></script>
  <script src="scripts/ui/user-panel.js" defer></script>
</head>

<body>
  <header>
          <div class="brand" id="logoPanel"> <!-- curso : point (none corregir despues logica link) -->
      <img class="logo" src="assets/fcefyn-logo.svg" alt="Logo FCEFyN" id="logoFcefyn" style="cursor: pointer"/>
      <div class="brand-txt">
      </div>
    </div>
    <div class="header-left">
      <div class="header-title">Panel del Estudiante</div>
      <div class="header-sub">Calendario de estudio — FCEFyN</div>
    </div>
    <div class="header-right">
      <button class="theme-toggle" data-theme-toggle type="button">
        <span class="ico">☀️</span>
      </button>
      <div id="vue-user-panel"></div> 
  </header>
  <div class="page-layout sidebar-collapsed" id="pageLayout">
    <div id="quickSidebarMount"></div>
    <div class="page-content">
      <div class="content-header">
        <button class="quick-toggle-btn" id="sidebarToggle" type="button" aria-label="Abrir accesos rápidos">☰</button>
        <div class="section-label" id="currentSectionLabel"><span>Inicio</span></div>
        <button class="help-btn" id="helpButton" type="button" aria-label="Ayuda contextual">?</button>
      </div>
      <div class="main-shell">
        
    <div id="tab-inicio" class="tab-card">
      <div class="welcome-card">

        <div>
          <div class="eyebrow">FCEFyN Planner</div>
          <h2 class="welcome-title">Tu punto de partida</h2>
          <p class="welcome-sub">
            Gestioná horarios, parciales, estudio y chats con tus compañeros en un solo lugar.
            Todo se guarda en tu cuenta para que puedas continuar desde cualquier dispositivo.
          </p>
          <div class="welcome-grid">
            <div class="welcome-item">
              <div class="welcome-label">Calendarios</div>
              <div class="welcome-desc">Ingresá a Estudio o Académico para trabajar con tu agenda diaria.</div>
            </div>
            <div class="welcome-item">
              <div class="welcome-label">Horario semanal</div>
              <div class="welcome-desc">Armá la semana en Agenda o probá combinaciones en Planificador.</div>
            </div>
            <div class="welcome-item">
              <div class="welcome-label">Mensajería</div>
              <div class="welcome-desc">Agregá amigos con su correo institucional y chateá en tiempo real.</div>
            </div>
          </div>
        </div>
        <div class="welcome-credits">
          <div class="welcome-credits-title">Créditos</div>
          <div class="welcome-credits-body">
            FCEFyN Planner — Creado por <strong>Rick Román</strong> y <strong>Agus Mella</strong>.<br/>
            Seleccioná una sección en la barra izquierda para comenzar.
          </div>
        </div>
      </div>
    </div>

    <div id="tab-estudio" class="tab-card" style="display:none;">
      <div class="tab-estudio-layout">
        <div class="calendar-container">
          <div class="calendar-header">
            <div class="cal-title">
              <h2 id="monthTitle"></h2>
            </div>
            <div class="cal-controls">
              <div class="cal-controls-group">
                <button class="cal-nav-btn" id="btnStudyPrev" type="button" title="Mes anterior">
                  <svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                  <span>Mes anterior</span>
                </button>
                <button class="cal-nav-btn" id="btnStudyToday" type="button" title="Volver a la fecha actual">
                  <span>Ir a hoy</span>
                  <span class="cal-today-date" id="studyTodayLabel">—</span>
                </button>
                <button class="cal-nav-btn" id="btnStudyNext" type="button" title="Mes siguiente">
                  <span>Mes siguiente</span>
                  <svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 6l6 6-6 6"/></svg>
                </button>
              </div>
              <div class="cal-status" id="studyMonthStatus" hidden>
                <button type="button" id="btnStudyReturn">Volver a hoy</button>
              </div>
            </div>
          </div>
          <div class="cal-hint" id="studyHint">Click en un día para registrar estudio</div>

          <div class="grid" id="studyDow">
            <div class="dow">Lun</div><div class="dow">Mar</div><div class="dow">Mié</div><div class="dow">Jue</div><div class="dow">Vie</div><div class="dow">Sáb</div><div class="dow">Dom</div>
          </div>
          <div class="grid" id="calendarGrid" style="margin-top:8px;"></div>
        </div>

        <div class="study-detail-panel" id="studyDetailPanel">
          <div class="study-detail-header">
            <div>
              <div class="study-detail-day" id="studyDetailTitle">Detalle del día</div>
              <div class="study-detail-date" id="studyDetailDate">—</div>
            </div>
            <div class="study-detail-time" id="studyDetailTime">—</div>
          </div>
          <div class="study-events" id="studyDetailList"></div>
          <button class="detail-add" id="studyAddActivity" type="button">
            <span class="add-plus">+</span>
            <span>Agregar actividad para hoy</span>
          </button>
          <button class="btn-dark" id="studyNewEntry" type="button">Nuevo registro</button>
          <section id="studyTimerWidget" class="widget-card">
            <div class="widget-title">Timer de Estudio</div>
            <div class="timer-display" id="studyTimerDisplay">00:00:00</div>
            <div class="widget-grid">
              <div class="widget-field">
                <label for="studyTimerMateria">Materia</label>
                <select id="studyTimerMateria"></select>
              </div>
              <div class="widget-field">
                <label for="studyTimerTema">Tema (opcional)</label>
                <input id="studyTimerTema" type="text" placeholder="Tema opcional" />
              </div>
            </div>
            <div class="timer-actions">
              <button class="btn-blue btn-small" id="studyTimerStart" type="button">Iniciar</button>
              <button class="btn-outline btn-small" id="studyTimerPause" type="button">Pausar</button>
              <button class="btn-outline btn-small" id="studyTimerResume" type="button" style="display:none;">Reanudar</button>
              <button class="btn-gray btn-small" id="studyTimerReset" type="button">Reset</button>
              <button class="btn-dark btn-small" id="studyTimerRegister" type="button">Registrar</button>
            </div>
          </section>
        </div>
      </div>
    </div>

    <div id="tab-academico" class="tab-card" style="display:none;">
      <div class="acad-layout">
        <div class="acad-shell">
          <div class="calendar-header">
          <div class="cal-title">
            <h2 id="acadMonthTitle"></h2>
          </div>
            <div class="cal-controls">
              <div class="cal-controls-group">
                <button class="cal-nav-btn" id="btnAcadPrev" type="button" title="Mes anterior">
                  <svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                  <span>Mes anterior</span>
                </button>
                <button class="cal-nav-btn" id="btnAcadToday" type="button" title="Volver a la fecha actual">
                  <span>Ir a hoy</span>
                  <span class="cal-today-date" id="acadTodayLabel">—</span>
                </button>
                <button class="cal-nav-btn" id="btnAcadNext" type="button" title="Mes siguiente">
                  <span>Mes siguiente</span>
                  <svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 6l6 6-6 6"/></svg>
                </button>
              </div>
            <div class="cal-status" id="acadMonthStatus" hidden>
              <button type="button" id="btnAcadReturn">Volver a hoy</button>
            </div>
            </div>
          </div>

          <div class="acad-help">
            Parciales, TPs, Tareas, Informes y Recordatorios (se guardan en tu planner de Firebase).
            <br/>Tip: tocá un día para ver el detalle en el panel derecho y agregá registros desde ahí.
          </div>

          <div class="grid" id="acadDow">
            <div class="dow">Lun</div><div class="dow">Mar</div><div class="dow">Mié</div><div class="dow">Jue</div><div class="dow">Vie</div><div class="dow">Sáb</div><div class="dow">Dom</div>
          </div>
          <div class="grid" id="acadGrid" style="margin-top:8px;"></div>
        </div>
        <div class="acad-widgets">
          <div class="acad-info-panel" id="acadInfoPanel">
            <div class="acad-info-empty" id="acadInfoEmpty">
              <div class="acad-empty-logo">
                <img src="assets/fcefyn-logo.svg" alt="Logo FCEFyN" />
              </div>
              <div class="acad-empty-title" id="acadEmptyTitle">Seleccioná un día</div>
              <div class="acad-empty-sub" id="acadEmptySub">No hay registros para este día.</div>
            </div>

            <div class="acad-detail" id="acadDetailBox" style="display:none;">
              <div class="acad-detail-top">
                <div>
                  <div class="acad-detail-title" id="acadDetailTitle">Detalle del día</div>
                  <div class="acad-detail-sub" id="acadDetailSub">—</div>
                </div>
                <div style="display:flex;gap:.45rem;flex-wrap:wrap;justify-content:flex-end;">
                  <span class="badge-soft" id="acadDetailCount">0</span>
                </div>
              </div>
              <div class="acad-detail-list" id="acadDetailList"></div>
            </div>
          </div>
          <div class="acad-action-group">
            <button class="detail-add" id="acadAddActivity" type="button">
              <span class="add-plus">+</span>
              <span>Agregar actividad para hoy</span>
            </button>
          <button class="btn-dark" id="acadNewEntry" type="button">Nuevo registro</button>
          </div>
          <section id="acadUpcomingWidget" class="widget-card"></section>
        </div>  
      </div>
    </div>

    <div id="tab-agenda" class="tab-card" style="display:none;">
      <div class="agenda-header">
        <div><strong>Agenda semanal</strong> (08:00 – 22:00)</div>
        <div class="agenda-actions">
          <div class="agenda-downloads">
            <button class="btn-outline btn-small" id="btnDownloadAgendaPng">Descargar PNG</button>
            <button class="btn-outline btn-small" id="btnDownloadAgendaPdf">Descargar PDF</button>
          </div>
          <div style="display:flex;gap:.5rem;flex-wrap:wrap;justify-content:flex-end;">
            <button class="btn-outline btn-small" id="btnAgendaFromPreset">Pasar preset a agenda</button>
            <button class="btn-blue" id="btnAddClass">Añadir clase</button>
          </div>
        </div>
      </div>
      <div class="agenda-shell">
        <div class="agenda-grid" id="agendaGrid"></div>
      </div>
    </div>

    <div id="tab-materias" class="tab-card" style="display:none;">
      <div class="subjects-layout">
        <div class="subjects-list-box">
          <div class="subjects-list-header">
            <div>
              <strong>Materias creadas</strong>
              <div class="small-muted">Organizá tus materias con color para identificarlas rápido.</div>
            </div>
          </div>
          <div id="subjectsList" class="subjects-list"></div>
          <div id="subjectsEmptyMsg" class="subjects-empty-msg" style="display:none;">
            Todavía no tenés materias. Creá tu primera materia desde el formulario.
          </div>
        </div>
        <div class="subject-form-box">
          <div class="subject-form-header">
            <div>
              <strong id="subjectFormTitle">Nueva materia</strong>
              <div class="small-muted">Completá los datos y guardá los cambios.</div>
            </div>
          </div>
          <div class="notice" id="subjectCareerNotice" style="display:none;">
            Necesitás elegir tu carrera en Perfil para habilitar materias automáticamente.
            <button class="link" type="button" id="subjectCareerGoProfile">Ir a Perfil</button>
          </div>
          <div class="subject-form-field">
            <label>Carrera</label>
            <select id="subjectCareer"></select>
          </div>
          <div class="subject-form-field">
            <label>Materia</label>
            <select id="subjectNameSelect"></select>
            <div class="small-muted" id="subjectPlanHint">Seleccioná una carrera para ver sus materias.</div>
          </div>
          <div class="subject-form-field">
            <label>Color identificatorio</label>
            <div class="subject-color-row">
              <div class="subject-color-palette" id="subjectColorPalette">
                <button class="subject-color-swatch" type="button" data-color="#E6D98C" aria-label="Color dorado suave"></button>
                <button class="subject-color-swatch" type="button" data-color="#F2A65A" aria-label="Color ámbar"></button>
                <button class="subject-color-swatch" type="button" data-color="#EF6F6C" aria-label="Color coral"></button>
                <button class="subject-color-swatch" type="button" data-color="#E377C2" aria-label="Color magenta"></button>
                <button class="subject-color-swatch" type="button" data-color="#8A7FF0" aria-label="Color violeta"></button>
                <button class="subject-color-swatch" type="button" data-color="#4C7DFF" aria-label="Color azul"></button>
                <button class="subject-color-swatch" type="button" data-color="#2EC4B6" aria-label="Color turquesa"></button>
                <button class="subject-color-swatch" type="button" data-color="#34C759" aria-label="Color verde"></button>
                <button class="subject-color-swatch" type="button" data-color="#A0AEC0" aria-label="Color gris"></button>
                <button class="subject-color-swatch subject-color-swatch--custom" type="button" id="subjectColorCustomBtn" aria-label="Elegir un color personalizado">
                  <span class="subject-color-swatch__custom" id="subjectColorCustomPreview" aria-hidden="true"></span>
                </button>
              </div>
              <input id="subjectColor" type="color" value="#E6D98C" class="subject-color-input" aria-label="Selector de color personalizado" />
              <span class="small-muted">Se usará en Agenda, Estudio y Académico.</span>
            </div>
            <div class="subject-color-manual">
              <input id="subjectColorText" type="text" class="subject-color-text" placeholder="#AABBCC o rgb(34, 123, 200)" autocomplete="off" />
              <small class="subject-color-hint" id="subjectColorHint">Podés pegar un color manualmente si lo preferís.</small>
            </div>
          </div>
          <div class="subject-form-actions">
            <button class="btn-gray btn-small" id="btnSubjectReset">Limpiar</button>
            <button class="btn-blue btn-small" id="btnSubjectSave">Guardar</button>
          </div>
          <p class="subject-form-note">
            Al editar una materia se actualizará su nombre también en el calendario de estudio y en la agenda.
            Al borrar una materia podés elegir si se eliminan también sus clases y registros de estudio.
          </p>
        </div>
      </div>
    </div>

    <div id="tab-planestudios" class="tab-card" style="display:none;">
      <div class="planner-toolbar" style="margin-bottom:.8rem;">
        <div class="planner-toolbar-left">
          <strong>Correlativas</strong>
        </div>
      </div>
      <div class="plan-frame">
        <div class="notice" id="planTabNotice" style="display:none;">
        Necesitás elegir tu carrera en Perfil para ver el plan de estudios automáticamente.
        <button class="link" type="button" id="planGoProfile">Ir a Perfil</button>
      </div>
      <iframe id="planFrame" class="plan-frame" title="Correlativas"></iframe>
      </div>
    </div>

    <div id="tab-planificador" class="tab-card" style="display:none;">
      <div class="planner-layout">
        <div class="planner-box">
          <div class="planner-toolbar">
            <div class="planner-toolbar-left">
              <strong>Horarios disponibles</strong>
              <span class="badge" id="sectionsCountBadge">0</span>
            </div>
            <div class="planner-toolbar-right">
              <input class="input-mini" id="sectionsSearch" placeholder="Buscar materia / comisión / sede..." />
              <button class="btn-outline btn-small" id="btnReloadSections">Recargar</button>
            </div>
          </div>
          <div class="small-muted" style="margin-bottom:.6rem;">
            Estos horarios los cargó el administrador (comisiones, días, horas y sedes). Elegí una comisión por materia.
          </div>
          <div class="planner-list" id="sectionsList"></div>
        </div>

        <div class="planner-box">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:.6rem;flex-wrap:wrap;">
            <strong>Presets</strong>
            <div class="small-muted" id="activePresetLabel">Sin preset cargado</div>
          </div>

          <div class="preset-row" style="margin-top:.6rem;">
            <input class="input-mini" id="presetNameInput" placeholder="Nombre del preset (ej: Plan A)" />
            <button class="btn-blue btn-small" id="btnPresetSave">Guardar preset</button>
            <button class="btn-outline btn-small" id="btnPresetNew">Nuevo</button>
          </div>

          <div class="preset-row" style="margin-top:.45rem;">
            <button class="btn-outline btn-small" id="btnPresetDuplicate">Duplicar</button>
            <button class="btn-danger btn-small" id="btnPresetDelete">Eliminar</button>
            <button class="btn-outline btn-small" id="btnPresetToAgenda">Pasar a Agenda</button>
          </div>

          <div class="preset-list" style="margin-top:.45rem;" id="presetsList"></div>

          <hr class="hr-soft">

          <div style="display:flex;justify-content:space-between;align-items:center;gap:.6rem;flex-wrap:wrap;">
            <strong>Selección del preset</strong>
            <span class="small-muted" id="selectedCountLabel">0 comisiones</span>
          </div>
          <div class="planner-list" id="selectedSectionsList" style="max-height:220px;margin-top:.6rem;"></div>

          <hr class="hr-soft">

          <div class="agenda-header" style="margin-bottom:.4rem;">
            <div><strong>Vista previa semanal</strong> (solo preview)</div>
            <div class="small-muted">No modifica tu Agenda hasta que presiones “Pasar a Agenda”.</div>
          </div>
        </div>
        
        <div class="agenda-shell">
        <div class="agenda-grid" id="plannerPreviewGrid"></div>
      </div>
    </div>
  </div>
    <!------------------------- PROFESORES ------------------------------->
    <div id="tab-profesores" class="tab-card" style="display:none;">
      <div class="prof-layout" id="filtersSection">
        <div class="prof-list-panel">
          <div class="prof-header" >
            <div>
              <strong>Profesores</strong>
              <div class="small-muted">Ordenados por mejor promedio general.</div>
            </div>
            <div class="prof-filters">
              <div>
                <label>Carrera</label>
                <select id="profFilterCareer"></select>
              </div>
              <div>
                <label>Materia</label>
                <select id="profFilterSubject"></select>
              </div>
            </div>
          </div>
          <div id="professorsList" class="prof-list"></div>
        </div>
      </div>
      <div class="profDetail" id="professorDetailSection" hidden >
        <button id="btnBackToFilters" type="button" hidden>← Volver</button>
                      <div id="profDetailBox" class="prof-detail-card" >
            <div class="small-muted">Seleccioná un profesor para ver detalles y valorar.</div>
          
          </div>
          <div class="prof-rate-card">
            <h3 class="prof-rate-title">Tu valoración</h3>
            <div class="prof-rate-grid">
              <div class="prof-rate-field">
                <label>Calidad de enseñanza</label>
                <input type="range" min="0" max="5" step="1" id="rateTeaching">
                <div class="prof-rate-value" id="labelRateTeaching">0 ★</div>
              </div>
              <div class="prof-rate-field">
                <label>Dificultad de parciales</label>
                <input type="range" min="0" max="5" step="1" id="rateExams">
                <div class="prof-rate-value" id="labelRateExams">0 ★</div>
              </div>
              <div class="prof-rate-field">
                <label>Trato con estudiantes</label>
                <input type="range" min="0" max="5" step="1" id="rateTreatment">
                <div class="prof-rate-value" id="labelRateTreatment">0 ★</div>
              </div>
            </div>
            <label>Comentario (opcional)</label>
            <textarea id="rateComment" placeholder="Impresiones, tips, qué mejorar"></textarea>
            <label class="prof-rate-check">
              <input type="checkbox" id="rateAnonymous">
              <span>Publicar comentario como anónimo</span>
            </label>
            <button class="btn-blue btn-small" id="btnSubmitRating" type="button" style="margin-top:.6rem;">Enviar valoración</button>
            <div class="small-muted" style="margin-top:.3rem;">
              Podés valorar sin comentar. Las reseñas se guardan por profesor y se actualizan si volvés a enviar.
            </div>
          </div>
      </div>
    </div>
    <!----------------------------- Mensajeria  ------------------------------------------>
    <div id="tab-mensajes" class="tab-card" style="display:none;">
      <div class="messages-layout">
        <div class="messages-left">
          <div class="card-block">
            <div class="block-title">Agregar amigo</div>
            <div class="small-muted">Enviá una solicitud usando el correo institucional.</div>
            <div class="friend-form">
              <input id="friendEmailInput" type="email" placeholder="correo@mi.unc.edu.ar" />
              <button class="btn-blue btn-small" id="btnSendFriendRequest" type="button" >Enviar solicitud</button>
            </div>
          </div>

          <div class="card-block">
            <div class="block-title">Solicitudes recibidas</div>
            <div id="incomingRequests" class="requests-box"></div>
          </div>

          <div class="card-block">
            <div class="block-title">Solicitudes enviadas</div>
            <div id="outgoingRequests" class="requests-box"></div>
          </div>

          <div class="card-block">
            <div class="block-title" style="display:flex;align-items:center;gap:.35rem;flex-wrap:wrap;">
               Amigos
              <span class="small-muted" style="margin-left:.4rem;">Solo podés chatear con aceptados</span>
            </div>
            <div id="friendsListBox" class="friends-box"></div>
          </div>
        </div>

        <div class="messages-right">
          <div class="card-block">
            <div class="chat-header">
              <div>
                <div id="chatHeader" class="chat-title">Seleccioná un amigo para chatear</div>
                <div id="chatSubheader" class="small-muted">Estado y última conexión según privacidad.</div>
              </div>
              <label class="toggle-line">
                <input type="checkbox" id="toggleLastSeen" />
                <span>Mostrar mi última conexión</span>
              </label>
            </div>
            <div id="messagesList" class="messages-box"></div>
            <div class="chat-input-row" id="chatInputRow">
              <input id="messageInput" placeholder="Seleccioná un amigo para chatear" disabled />
              <button class="btn-blue btn-small" id="btnSendMessage" type="button" disabled>Enviar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="tab-perfil" class="tab-card" style="display:none;">
      <div class="profile-layout">
        <div class="profile-card">
          <div class="profile-header">
            <div>
              <strong>Tu perfil</strong>
              <div class="small-muted">Actualizá tus datos básicos y mantenelos al día.</div>
            </div>
            <div class="profile-email" id="profileEmail">—</div>
          </div>

          <div class="profile-avatar">
            <img id="profileAvatarImg" alt="Foto de perfil" />
            <div class="profile-avatar-actions">
              <label class="profile-avatar-input">
                <span>Seleccionar imagen</span>
                <input type="file" id="inpAvatar" accept="image/*" />
              </label>
              <div class="profile-avatar-buttons">
                <button class="btn-blue btn-small" id="btnUploadAvatar" type="button">Guardar foto</button>
                <button class="btn-outline btn-small" id="btnRemoveAvatar" type="button">Quitar foto</button>
              </div>
              <div class="profile-avatar-status" id="profileAvatarStatus"></div>
            </div>
          </div>

          <div class="profile-grid">
            <div class="profile-field">
              <label>Nombre</label>
              <input id="profileFirstName" placeholder="Nombre" />
            </div>
            <div class="profile-field">
              <label>Apellido</label>
              <input id="profileLastName" placeholder="Apellido" />
            </div>
            <div class="profile-field">
              <label>Carrera</label>
              <select id="profileCareer"></select>
            </div>
            <div class="profile-field">
              <label>Año de ingreso</label>
              <input id="profileYearIn" type="number" min="1990" max="2100" placeholder="Ej: 2024" />
            </div>

            <!-- mi intento de 2 carrera  -->
            <div class="profile-field">
              <label>2da Carrera (opcional)</label>
              <select id="profileCareer2"></select>
            </div>
            <div class="profile-field">
              <label>Año de ingreso</label>
              <input id="profileYearIn2" type="number" min="1990" max="2100" placeholder="Ej: 2024" />
            </div>
            <!-- end intento -->
            
            <div class="profile-field profile-field-wide">
              <label>Documento / DNI / Legajo</label>
              <input id="profileDocument" placeholder="Opcional" />
            </div>
          </div>

          <div class="profile-actions">
            <button class="btn-blue" id="btnProfileSave" type="button">Guardar cambios</button>
            <div class="profile-status" id="profileStatus"></div>
          </div>
        </div>

        <div class="profile-card">
          <div class="profile-header">
            <div>
              <strong>Seguridad</strong>
              <div class="small-muted">Gestioná tu contraseña desde el correo institucional.</div>
            </div>
          </div>
          <div class="profile-security">
            <div class="small-muted">
              Al confirmar, te enviaremos un correo para cambiar tu contraseña de forma segura.
            </div>
            <button class="btn-outline btn-small" id="btnPasswordReset" type="button">Cambiar contraseña</button>
            <div class="profile-status" id="passwordStatus"></div>
          </div>
        </div>
      </div>
    </div>
  </div> 
      </div> </div> </div> <div class="modal-bg" id="modalBg">
    <div class="modal modal-planner">
      <div class="modal-header">
        <h3 class="modal-title" id="studyModalTitle">Nuevo registro</h3>
        <button class="modal-close" id="btnStudyClose" type="button" aria-label="Cerrar">✕</button>
      </div>
      <div class="modal-body">
        <div class="modal-field">
          <label for="inpMateria">Materia</label>
          <select id="inpMateria"></select>
        </div>
        <div class="modal-field">
          <label for="inpTema">Tema</label>
          <input id="inpTema" placeholder="Tema a estudiar" />
        </div>
        <div class="modal-field modal-inline-row">
          <div>
            <label for="inpHoras">Horas</label>
            <input id="inpHoras" placeholder="0" type="number" min="0" />
          </div>
          <div>
            <label for="inpMins">Minutos</label>
            <input id="inpMins" placeholder="0" type="number" min="0" />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-outline" id="btnCancelar" type="button">Cancelar</button>
        <button class="btn-blue btn-large" id="btnGuardar" type="button">Guardar</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="agendaModalBg">
    <div class="modal">
      <h3 class="modal-title" id="agendaModalTitle">Añadir clase</h3>
      <label>Día</label>
      <select id="agendaDay"></select>

      <label>Materia</label>
      <select id="agendaSubject"></select>

      <label>Sede / Modalidad</label>
      <select id="agendaLocation" required>
        <option value="Ciudad Universitaria">Ciudad Universitaria</option>
        <option value="Centro">Centro</option>
        <option value="Virtual Sincrónica">Virtual Sincrónica</option>
      </select>

      <label>Aula (opcional)</label>
      <input id="agendaRoom" placeholder="Ej: 100, 218, Lab 2" />

      <div style="display:flex;gap:.5rem;">
        <div style="flex:1;">
          <label>Inicio</label>
          <input id="agendaStart" type="time" min="08:00" max="23:00" />
        </div>
        <div style="flex:1;">
          <label>Fin</label>
          <input id="agendaEnd" type="time" min="08:00" max="23:00" />
        </div>
      </div>

      <div style="margin-top:.6rem;display:flex;gap:.5rem;justify-content:flex-end;">
        <button class="btn-gray btn-small" id="btnAgendaCancel">Cancelar</button>
        <button class="btn-danger btn-small" id="btnAgendaDelete" style="display:none;">Eliminar</button>
        <button class="btn-blue btn-small" id="btnAgendaSave">Guardar</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="presetToAgendaModalBg">
    <div class="modal modal-wide">
      <h3 class="modal-title">Pasar preset a Agenda</h3>

      <div class="small-muted" style="margin-bottom:.45rem;">
        Elegí qué preset querés aplicar y si querés <strong>agregar</strong> a tu agenda actual o <strong>reemplazarla</strong>.
        (Los cambios se guardan en Firebase).
      </div>

      <label>Preset</label>
      <select id="presetApplySelect"></select>

      <label style="margin-top:.35rem;">Modo</label>
      <div class="radio-row">
        <label class="radio-pill">
          <input type="radio" name="applyMode" value="add" checked />
          <span><strong>Agregar</strong> (no borra tu agenda)</span>
        </label>
        <label class="radio-pill">
          <input type="radio" name="applyMode" value="replace" />
          <span><strong>Reemplazar</strong> (borra tu agenda y pone el preset)</span>
        </label>
      </div>

      <div class="small-muted" id="presetApplyInfo" style="margin-top:.5rem;"></div>

      <hr class="hr-soft">

      <div style="display:flex;gap:.5rem;justify-content:flex-end;flex-wrap:wrap;">
        <button class="btn-gray btn-small" id="btnPresetApplyCancel">Cancelar</button>
        <button class="btn-blue btn-small" id="btnPresetApplyConfirm">Aplicar a Agenda</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="acadModalBg">
    <div class="modal modal-planner">
      <div class="modal-header">
        <h3 class="modal-title" id="acadModalTitle">Nuevo registro</h3>
        <button class="modal-close" id="btnAcadClose" type="button" aria-label="Cerrar">✕</button>
      </div>
      <div class="modal-body">
        <div class="modal-field">
          <div class="modal-section-title">Tipo de actividad</div>
          <div class="pill-group" id="acadTypePills">
            <button type="button" class="pill-btn" data-acad-type="Examen">Examen</button>
            <button type="button" class="pill-btn is-active" data-acad-type="Parcial">Parcial</button>
            <button type="button" class="pill-btn" data-acad-type="TP">TP</button>
            <button type="button" class="pill-btn" data-acad-type="Estudio">Estudio</button>
            <button type="button" class="pill-btn" data-acad-type="Clase">Clase</button>
            <button type="button" class="pill-btn" data-acad-type="Práctico">Práctico</button>
          </div>
          <select id="acadType" class="sr-only" aria-hidden="true">
            <option value="Examen">Examen</option>
            <option value="Parcial">Parcial</option>
            <option value="TP">TP</option>
            <option value="Estudio">Estudio</option>
            <option value="Clase">Clase</option>
            <option value="Práctico">Práctico</option>
          </select>
        </div>

        <div class="modal-field">
          <label for="acadSubject">Materia</label>
          <select id="acadSubject"></select>
        </div>

        <div class="modal-field">
          <label for="acadTitle">Título</label>
          <input id="acadTitle" placeholder="Ej: 1er Parcial" />
        </div>

        <div class="modal-field">
          <label for="acadWhen">Hora</label>
          <input id="acadWhen" type="time" />
        </div>

        <div class="modal-field">
          <label for="acadNotes">Notas (opcional)</label>
          <textarea id="acadNotes" placeholder="Detalles, requisitos, link, etc."></textarea>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-outline" id="btnAcadCancel">Cancelar</button>
        <button class="btn-danger" id="btnAcadDelete" style="display:none;">Eliminar</button>
        <button class="btn-blue btn-large" id="btnAcadSave">Guardar</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="acadDayModalBg">
    <div class="modal">
      <div class="acad-day-modal-top">
        <div>
          <h3 class="modal-title" id="acadDayModalTitle">Detalle del día</h3>
          <div class="small-muted" id="acadDayModalSubtitle">—</div>
        </div>
        <button class="btn-blue btn-small" id="btnAcadDayAdd">Agregar registro</button>
      </div>
      <div class="acad-detail-list" id="acadDayModalList"></div>
      <div class="acad-record-detail" id="acadRecordDetail" style="display:none;"></div>
      <div class="acad-day-modal-actions">
        <button class="btn-gray btn-small" id="btnAcadDayClose">Cerrar</button>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="helpModalBg">
    <div class="modal modal-help">
      <h3 class="modal-title" id="helpModalTitle">Ayuda</h3>
      <div class="help-modal-body" id="helpModalBody"></div>
      <div class="help-modal-actions">
        <button class="btn-blue btn-small" id="btnHelpClose">Entendido</button>
      </div>
    </div>
  </div>
<script type="module" src="scripts/student.js"></script>
  <script type="module" src="scripts/subScripts/Profesores.js"></script>
<script type="module" src="scripts/ui/scroll-ui.js"></script>

</body>
</html>
 
