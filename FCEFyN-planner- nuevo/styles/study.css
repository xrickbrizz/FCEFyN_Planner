/* =========================================================
   Layout
   ========================================================= */
   #logoPanel{
    width: 11rem;
    cursor:auto;
   }
header{
  position: relative;
  padding:1rem 1.3rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:.8rem;
  border-bottom:1px solid var(--border-75);
  backdrop-filter: blur(10px);
  z-index: 100;
}
body.light-mode header,
body[data-theme="light"] header{
  background:var(--surface-3);
  border-bottom:1px solid var(--color-border);
  box-shadow:none;
  backdrop-filter:none;
}
.header-left{ display:flex; flex-direction:column; gap:.15rem; }
.header-title{ font-size:1.3rem; font-weight:800; letter-spacing:.2px; }
.header-sub{ font-size:.87rem; color:var(--muted); }
.header-right{ display:flex; align-items:center; gap:.75rem; flex-wrap:wrap; justify-content:flex-end; }
.user-panel{
  position:relative;
  display:flex;
  align-items:center;
  z-index: 1000;
}
.user-avatar{
  width: 50px;
  height:50px;
  padding:0;
  border-radius:999px;
  border:1px solid var(--border-85);
  background:var(--surface-94);
  box-shadow:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
.user-avatar img{
  width:100%;
  height:100%;
  border-radius:inherit;
  object-fit:cover;
  display:block;
}
.user-menu{
  position:absolute;
  right:0;
  top:calc(100% + .55rem);
  min-width:190px;
  background:var(--surface-94);
  border:1px solid var(--border-80);
  border-radius:var(--radius-lg);
  padding:.35rem;
  box-shadow:none;
  opacity:0;
  transform:translateY(-8px);
  pointer-events:none;
  transition:opacity var(--transition-fast), transform var(--transition-fast);
  z-index:40;
}
.user-menu::before{
  content:"";
  position:absolute;
  top:-6px;
  right:18px;
  width:12px;
  height:12px;
  background:var(--surface-94);
  border-left:1px solid var(--border-60);
  border-top:1px solid var(--border-60);
  transform:rotate(45deg);
}
.user-panel.open .user-menu{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}
.user-menu button,
.user-menu a{
  width:100%;
  border:none;
  background:transparent;
  padding:.55rem .7rem;
  border-radius:var(--radius-md);
  color:var(--color-text);
  font-size:.9rem;
  text-align:left;
  display:flex;
  align-items:center;
  gap:.5rem;
  cursor:pointer;
}
.user-menu button:hover,
.user-menu a:hover{
  background:var(--accent-12);
}
.user-menu .menu-icon{
  font-size:1rem;
  width:1.1rem;
  text-align:center;
}
.account-box{
  padding:.55rem .85rem;
  border-radius:var(--radius-lg);
  background:var(--surface-94);
  border:1px solid var(--border-85);
  display:flex;
  flex-direction:column;
  gap:.12rem;
  min-width:240px;
  box-shadow:none;
}
.account-label{ font-size:.76rem; color:var(--muted); letter-spacing:.1px; }
.account-email{
  font-size:.88rem;
  color:var(--color-text);
  max-width:260px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

button{
  padding:.48rem 1.05rem;
  border:none;
  border-radius:var(--radius-md);
  cursor:pointer;
  font-size:.92rem;
  transition: transform var(--transition-fast), filter var(--transition-fast), box-shadow var(--transition-fast);
  user-select:none;
  letter-spacing:.05rem;
}
.btn-blue{
  color:var(--color-primary-strong);
  box-shadow:var(--shadow-btn);
}
.btn-blue:hover{ filter:brightness(1.05); transform:translateY(-1px); }
.btn-gray{ background:var(--color-surface-2); color:var(--color-text); box-shadow:var(--shadow-btn); }
.btn-gray:hover{ filter:brightness(1.05); transform:translateY(-1px); }
.btn-outline{
  background:var(--glass-faint);
  color:var(--color-text);
  border:1px solid var(--border-90);
  box-shadow:var(--shadow-btn);
}
.btn-outline:hover{ border-color:var(--accent-805); }
.btn-danger{ background:var(--color-danger); color:var(--color-text-contrast);}
.btn-small{ padding:.24rem .68rem; font-size:.8rem; border-radius:var(--radius-sm);box-shadow: none; }

body.dark-mode .btn-blue,
body[data-theme="dark"] .btn-blue{
  background:var(--surface-9);
  color:var(--color-primary-strong);
  border:1px solid var(--inverse-70);
  border-radius:var(--radius-pill);
  box-shadow:none;
}
body.dark-mode .btn-blue:active,
body[data-theme="dark"] .btn-blue:active{
  transform:scale(0.98);
}
body.dark-mode .btn-gray,
body[data-theme="dark"] .btn-gray{
  background:var(--inverse-04);
  color:var(--color-text);
  border:1px solid var(--inverse-10);
  box-shadow:none;
}
body.dark-mode .btn-outline,
body[data-theme="dark"] .btn-outline{
  background:transparent;
  border-color:var(--inverse-12);
  box-shadow:none;
}

.section-label{
  display:inline-flex;
  align-items:center;
  gap:.55rem;
  font-weight:700;
  letter-spacing:.1px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:999px;
  padding:.55rem 1rem;
  color:var(--text);
  box-shadow:none;
  width: fit-content;
}
body.dark-mode .section-label,
body[data-theme="dark"] .section-label{
  background:var(--card);
  border-color:var(--border);
  box-shadow:none;
}

.content-header{
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  gap:.75rem;
  position:static;
  top:0;
  z-index:12;
  padding:.35rem .5rem;
  background:var(--card);
  border-radius:var(--radius);
  border:1px solid var(--border);
  box-shadow:none;
}
.content-header .section-label{
  justify-self:center;
}
body.dark-mode .content-header,
body[data-theme="dark"] .content-header{
  background:var(--surface-92);
  border-color:var(--inverse-08);
  box-shadow:none;
}
.help-btn{
  border:1px solid var(--accent-75);
  background:var(--accent-bg);
  color:var(--color-primary-strong);
  width:42px;
  height:42px;
  border-radius:var(--radius-md);
  font-weight:800;
  font-size:1.05rem;
  box-shadow:var(--shadow-btn);
}
body.dark-mode .help-btn,
body[data-theme="dark"] .help-btn{
  background:var(--inverse-06);
  border-color:var(--inverse-14);
  color:var(--color-text);
  box-shadow:none;
}
.help-btn:hover{ filter:brightness(1.05); }

.page-layout{
  --sidebar-expanded:190px;
  --sidebar-collapsed:96px;
  display:grid;
  grid-template-columns:var(--sidebar-expanded) minmax(0,1fr);
  gap:1.35rem;
  max-width:none;
  width:calc(100% - 2rem);
  align-items:flex-start;
  transition:grid-template-columns .18s ease;
}
.page-layout.sidebar-collapsed{
  grid-template-columns:var(--sidebar-collapsed) minmax(0,1fr);
}
.page-content{
  min-width:0;
  display:flex;
  flex-direction:column;
  margin: 0;
  padding: 0;
  gap:.75rem;
}
.main-shell{ max-width:none; margin:0; padding:0; }
@media(max-width:1024px){
  .page-layout{ grid-template-columns:1fr; width:calc(100% - 1.6rem); padding:0 .8rem; }
}

    .tabs-bar{
      display:flex;
      gap:.5rem;
      margin-bottom:1rem;
      flex-wrap:wrap;
      align-items:center;
    }
.tab-btn{
  flex:0 0 auto;
  padding:.5rem 1rem;
  border-radius:var(--radius-lg);
  background:var(--surface-94);
  color:var(--color-text);
  border:1px solid var(--border-85);
  font-size:.9rem;
  box-shadow:none;
  letter-spacing:.05rem;
}
.tab-btn.tab-active{
  background:var(--btn-primary-bg);
  border-color:var(--accent-805);
  box-shadow:none;
  color:var(--color-primary-strong);
  font-weight:800;
}
body.dark-mode .tab-btn,
body[data-theme="dark"] .tab-btn{
  background:var(--inverse-04);
  border-color:var(--inverse-10);
  box-shadow:none;
}
body.dark-mode .tab-btn.tab-active,
body[data-theme="dark"] .tab-btn.tab-active{
  background:var(--surface-9);
  color:var(--color-primary-strong);
  border-color:var(--inverse-70);
  box-shadow:none;
}
body.light-mode .tab-btn,
body[data-theme="light"] .tab-btn{
  background:var(--surface-3);
  border-color: var(--color-border);
  box-shadow:none;
}
body.light-mode .tab-btn.tab-active,
body[data-theme="light"] .tab-btn.tab-active{
  background:var(--btn-primary-bg);
  color:var(--surface-3);
  border-color:transparent;
  box-shadow:none;
}

.tab-card{
  background: var(--surface-98);
  border-radius:var(--radius-2xl);
  padding:1.05rem;
  box-shadow:none;
  border:1px solid var(--border-30);
  backdrop-filter: blur(8px);
}
body.light-mode .tab-card,
body[data-theme="light"] .tab-card{
  background:var(--surface-3);
  border-color: var(--color-border);
  box-shadow:none;
  backdrop-filter:none;
}
    .home-layout{
      display:grid;
      grid-template-columns:minmax(0,2.1fr) minmax(0,1fr);
      gap:1rem;
      align-items:stretch;
      min-height:calc(100vh - 230px);
    }
    @media(max-width:1100px){
      .home-layout{ grid-template-columns:1fr; min-height:auto; }
    }
    .home-title{ margin:0.1rem 0; font-size:1.6rem; }
    .home-sub{
      color:var(--text-soft);
      max-width:780px;
      line-height:1.55;
    }
    .home-cards{
      margin-top:1.1rem;
      display:grid;
      gap:.85rem;
      grid-template-columns:repeat(3, minmax(0,1fr));
    }
    @media(max-width:1024px){
      .home-cards{ grid-template-columns:repeat(2, minmax(0,1fr)); }
    }
    @media(max-width:720px){
      .home-cards{ grid-template-columns:1fr; }
    }
    .home-card{
      display:flex;
      gap:.75rem;
      align-items:flex-start;
      background:var(--glass-faint);
      border:1px solid var(--border-30);
      border-radius:var(--radius-lg);
      padding:.9rem;
      box-shadow:none;
    }
    .home-card-icon{
      width:44px;
      height:44px;
      border-radius:50%;
      background:var(--accent-12);
      border:1px solid var(--accent-35);
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--color-primary-strong);
      flex:0 0 auto;
    }
    .home-card-icon svg{ width:22px; height:22px; }
    .home-card-title{ font-weight:800; margin-bottom:.2rem; }
    .home-card-desc{ color:var(--text-soft); line-height:1.4; }

    [hidden]{
      display:none !important;
    }

    .home-notices-panel{
      background:var(--surface-3);
      border:1px solid var(--border-30);
      border-radius:var(--radius-lg);
      padding:.85rem;
      display:flex;
      flex-direction:column;
      gap:.75rem;
      min-height:0;
      height:100%;
    }
    .home-notices-panel[data-mode="list"] #homeNoticesDetail{
      display:none !important;
    }
    .home-notices-panel[data-mode="detail"] #homeNoticesListing{
      display:none !important;
    }
    .home-notices-panel[data-mode="detail"] #homeNoticesBack{
      display:inline-flex !important;
    }
    .home-notices-panel[data-mode="list"] #homeNoticesBack{
      display:none !important;
    }
    .home-notices-panel[data-mode="detail"] #homeNoticesSearchWrap{
      display:none !important;
    }
    .home-notices-panel[data-mode="detail"] #homeNoticesNav{
      display:none !important;
    }
    body.dark-mode .home-notices-panel,
    body[data-theme="dark"] .home-notices-panel{
      background:var(--surface-92);
      border-color:var(--inverse-10);
    }
    .home-notices-header{
      display:flex;
      align-items:center;
      gap:.65rem;
      flex-wrap:wrap;
      justify-content:space-between;
    }
    .home-notices-title{
      font-weight:800;
      font-size:1.05rem;
    }
    .home-notices-listing,
    .home-notices-detail{
      flex:1;
      min-height:0;
    }
    .home-notices-search{
      display:flex;
      align-items:center;
      gap:.45rem;
      padding:.35rem .65rem;
      border-radius:var(--radius-pill);
      background:var(--surface-5);
      border:1px solid var(--border-30);
      color:var(--text-soft);
      flex:1 1 180px;
      max-width:240px;
    }
    body.dark-mode .home-notices-search,
    body[data-theme="dark"] .home-notices-search{
      background:var(--inverse-04);
      border-color:var(--inverse-12);
    }
    .home-notices-search input{
      border:none;
      outline:none;
      background:transparent;
      color:inherit;
      width:100%;
      font-size:.9rem;
      font-family:inherit;
    }
    .home-search-icon{
      width:14px;
      height:14px;
      border-radius:50%;
      border:2px solid var(--text-soft);
      position:relative;
      display:inline-block;
      flex:0 0 auto;
    }
    .home-search-icon::after{
      content:"";
      position:absolute;
      width:7px;
      height:2px;
      background:var(--text-soft);
      right:-4px;
      bottom:-2px;
      transform:rotate(45deg);
      border-radius:2px;
    }
    .home-notices-nav{
      display:flex;
      align-items:center;
      gap:.35rem;
    }
    .home-notices-range{
      font-size:.85rem;
      color:var(--text-soft);
    }
    .home-notices-btn{
      width:28px;
      height:28px;
      border-radius:var(--radius-pill);
      border:1px solid var(--border-30);
      background:var(--surface-5);
      font-size:1rem;
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      transition:filter var(--transition-fast);
    }
    .home-notices-btn:disabled{
      opacity:.45;
      cursor:not-allowed;
    }
    .home-notices-btn:hover:not(:disabled){ filter:brightness(0.98); }
    .home-notices-content{
      flex:1;
      min-height:0;
      display:flex;
      flex-direction:column;
    }
    .home-notices-list{
      display:flex;
      flex-direction:column;
      gap:.45rem;
      overflow-y:auto;
      padding-right:.2rem;
    }
    .home-notices-empty{
      color:var(--text-soft);
      font-size:.9rem;
      padding:.6rem 0;
    }
    .home-notice-item{
      display:grid;
      grid-template-columns:minmax(0,1fr) auto;
      gap:.6rem;
      padding:.6rem .7rem;
      border-radius:var(--radius-md);
      border:1px solid var(--border-18);
      background:var(--glass-faint);
      text-align:left;
      cursor:pointer;
      transition:border-color var(--transition-fast);
      font-family:inherit;
      color:var(--text);
    }
    .home-notice-item:hover{ border-color:var(--border-40); }
    .home-notice-title-row{
      display:flex;
      align-items:center;
      gap:.4rem;
      margin-bottom:.2rem;
    }
    .home-notice-preview{
      color:var(--text-soft);
      font-size:.85rem;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .home-notice-meta{
      font-size:.82rem;
      color:var(--text-soft);
      display:flex;
      align-items:flex-start;
      justify-content:flex-end;
      min-width:60px;
    }
    .notice-pin{
      width:12px;
      height:12px;
      border-radius:50% 50% 50% 0;
      border:2px solid var(--text-soft);
      transform:rotate(-45deg);
      position:relative;
      flex:0 0 auto;
    }
    .notice-pin::after{
      content:"";
      position:absolute;
      width:2px;
      height:6px;
      background:var(--text-soft);
      left:4px;
      top:7px;
      border-radius:2px;
    }

    .home-notices-detail{
      display:flex;
      flex-direction:column;
      gap:.75rem;
      min-height:0;
    }
    .home-notices-back{
      align-self:flex-start;
      border:none;
      background:none;
      color:var(--text);
      font-weight:700;
      cursor:pointer;
      padding:0;
      font-size:.95rem;
      display:inline-flex;
      align-items:center;
    }
    .home-notices-detail-body{
      flex:1;
      overflow-y:auto;
      padding-right:.25rem;
    }
    .home-notices-detail-title{
      font-size:1.2rem;
      font-weight:800;
      margin-bottom:.25rem;
    }
    .home-notices-detail-date{
      color:var(--text-soft);
      font-size:.9rem;
      margin-bottom:.75rem;
    }
    .home-notices-detail-text{
      color:var(--text);
      line-height:1.5;
      white-space:pre-line;
    }

    .tab-estudio-layout{
      display:grid;
      grid-template-columns: minmax(0,2.2fr) minmax(0,1fr);
      gap:1rem;
    }
    @media(max-width:900px){ .tab-estudio-layout{ grid-template-columns:1fr; } }

    .calendar-container{
      background:var(--card);
      border-radius:var(--radius);
      padding:1rem;
      border:1px solid var(--border);
      box-shadow:none;
    }
    .calendar-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:1rem;
      gap:.6rem;
      flex-wrap:wrap;
    }
    .cal-left{
      display:flex; align-items:center; gap:.5rem; flex-wrap:wrap;
    }
    .cal-right{
      display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; justify-content:flex-end;
    }
    #monthTitle, #acadMonthTitle{ font-size:1.25rem; font-weight:800; letter-spacing:.2px; }
    .cal-nav-btn{
      padding:.4rem .75rem;
      border-radius:999px;
      background:transparent;
      color:var(--text);
      border:1px solid transparent;
      font-size:.86rem;
      box-shadow:none;
    }
    .cal-nav-btn:hover{ background:var(--primary-soft); color:var(--primary); }

    .grid{ display:grid; 
      grid-template-columns:repeat(7,minmax(0,1fr)); gap:10px;
      width:100%;
      min-width:0;
    }
    .grid > *{ min-width:0; }
    .dow{
      font-size:.78rem;
      color:var(--color-muted);
      text-align:center;
      padding:.25rem 0;
    }

    /* ===== ESTUDIO (fijo y simple) ===== */
    .day{
      min-height:110px;
      background:var(--card);
      border-radius:var(--radius-sm);
      padding:10px;
      cursor:pointer;
      font-size:.9rem;
      position:relative;
      border:1px solid var(--border);
      min-width:0;
      max-width:100%;
      overflow:hidden;
    }
    .day:hover{ border-color:var(--info-45); }
    .day-number{
      display:flex;
      align-items:center;
      justify-content:space-between;
      color:var(--text);
      font-weight:800;
      gap:.45rem;
      min-width:0;
    }
    .day-number span{ min-width:0; }
    .today-dot{
      width:8px; height:8px; border-radius:50%;
      background:var(--color-accent-2);
      opacity:0;
      transition:opacity .2s ease;
    }
    .day.is-today .today-dot{ opacity:1; }
    .day-muted{
      background:var(--border-50);
      border:1px dashed var(--border);
      cursor:default;
    }
body.light-mode .calendar-container,
body[data-theme="light"] .calendar-container{
  background:var(--card);
  border-color: var(--border);
  box-shadow:none;
}
body.light-mode .day,
body[data-theme="light"] .day{
  background:var(--card);
  border-color: var(--border);
}
body.light-mode .day-muted,
body[data-theme="light"] .day-muted{
  background:var(--border-50);
}
body.light-mode .event,
body[data-theme="light"] .event{
  background:var(--primary-soft);
  border-color: var(--info-35);
  color:var(--text);
  box-shadow:none;
}

    /* ESTAD√çSTICAS */
    .stats-card{
      background:var(--card);
      border-radius:var(--radius);
      padding:.9rem;
      border:1px solid var(--border);
      box-shadow:none;
    }
    .stats-title{ font-weight:700; margin-bottom:.4rem; }
    .stats-item{ color:var(--text); margin-bottom:.3rem; }

    /* MODAL ESTUDIO */
    .modal-bg{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,.35);
      backdrop-filter: blur(3px);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:1200;
      padding:1.5rem;
    }
    .modal{
      background: var(--color-surface-3);
      border-radius:18px;
      padding:1.25rem 1.35rem;
      min-width:320px;
      max-width:640px;
      width:100%;
      border:1px solid var(--border-70);
      box-shadow:0 18px 45px rgba(15,23,42,.12);
      display:flex;
      flex-direction:column;
      gap:1rem;
    }
    .modal h3{ margin:0; }
    .modal-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:.75rem;
    }
    .modal-close{
      border:none;
      background:var(--color-surface-3);
      color:var(--text);
      width:36px;
      height:36px;
      border-radius:50%;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      font-size:1.1rem;
    }
    .modal-body{
      display:flex;
      flex-direction:column;
      gap:.85rem;
    }
    .modal-field label{
      display:block;
      font-size:.85rem;
      color:var(--muted);
      margin-bottom:.35rem;
    }
    .modal input, .modal textarea, .modal select{
      width:100%;
      padding:.7rem .85rem;
      border-radius:12px;
      border:1px solid var(--border-60);
      background:#f4f6f9;
      color:var(--color-text);
      box-shadow:none;
      font-size:.95rem;
      box-sizing:border-box;
    }
    .modal textarea{ min-height:90px; resize:vertical; }
    .modal-inline-row{
      display:grid;
      grid-template-columns:repeat(2, minmax(0,1fr));
      gap:.75rem;
    }
    .modal-section-title{
      font-weight:700;
      margin-bottom:.35rem;
      color:var(--text);
      font-size:.9rem;
    }
    .modal-footer{
      position:sticky;
      bottom:0;
      display:flex;
      justify-content:flex-end;
      gap:.6rem;
      flex-wrap:wrap;
      padding-top:.5rem;
      background:inherit;
    }
    .btn-large{
      padding:.7rem 1.25rem;
      font-size:.95rem;
      border-radius:12px;
    }
    .pill-group{
      display:flex;
      flex-wrap:wrap;
      gap:.5rem;
    }
    .pill-btn{
      border:1px solid var(--border-60);
      background:#f1f3f7;
      color:var(--muted);
      padding:.35rem .9rem;
      border-radius:999px;
      font-size:.85rem;
      cursor:pointer;
      transition:all .15s ease;
    }
    .pill-btn.is-active{
      background:var(--primary-soft);
      border-color:var(--info-45);
      color:var(--primary);
      font-weight:600;
    }
    .sr-only{
      position:absolute;
      width:1px;
      height:1px;
      padding:0;
      margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;
      border:0;
    }
    .pwd-wrap{ position:relative; }
    .pwd-toggle{
      position:absolute;
      right:10px; top:50%;
      transform:translateY(-50%);
      padding:.3rem .45rem;
      font-size:.85rem;
      border-radius:var(--radius-sm);
    }
    .modal-help{
      max-width:720px;
      background:var(--surface-98);
      border:1px solid var(--accent-38);
      box-shadow:none;
    }
    .help-modal-body{
      background:var(--color-surface-3);
      border:1px solid var(--border-50);
      border-radius:var(--radius-md);
      padding:.75rem .85rem;
      line-height:1.45;
      color:var(--color-text);
      box-shadow:none;
    }
    .help-section-title{
      font-weight:800;
      margin-bottom:.35rem;
      color:var(--color-text);
    }
    .help-list{
      margin:0;
      padding-left:1.1rem;
      color:var(--text-soft);
    }
    .help-list li{ margin-bottom:.25rem; }
    .help-modal-actions{
      display:flex;
      justify-content:flex-end;
      gap:.5rem;
      margin-top:.8rem;
    }

    /* TAB ACADEMICO */
    .acad-layout{
      display:grid;
      grid-template-columns:minmax(0,2fr) minmax(0,1fr);
      gap:1rem;
    }
    @media(max-width:980px){ .acad-layout{ grid-template-columns:1fr; } }
    .acad-shell,
    .acad-detail,
    .acad-widgets,
    .planner-box{
      background:var(--card);
      border-radius:var(--radius);
      border:1px solid var(--border);
      padding:1rem;
      box-shadow:none;
      margin-bottom: 12px;
    }
    .acad-widgets{
      padding: 1rem;
    }
    .acad-help{
      font-size:.9rem;
      color:var(--muted);
      line-height:1.35;
      margin-bottom:.55rem;
    }
    .acad-widgets{
      width: auto;
    }
    .acad-shell .day{
      min-height:110px;
      display:flex;
      flex-direction:column;
      min-width:0;
      max-width:100%;
      overflow:hidden;
    }
    .acad-day-list{
      display:flex;
      flex-direction:column;
      gap:.4rem;
      margin-top:.4rem;
      flex:1;
      overflow-y:auto;
      overflow-x:hidden;
      padding-right:.15rem;
      max-width:100%;
      min-width:0;
    }
    .acad-day-item{
      display:grid;
      grid-template-columns:auto 1fr auto;
      gap:.6rem;
      align-items:center;
      padding:.55rem .65rem;
      border-radius:var(--radius-md);
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
      box-shadow:none;
      cursor:pointer;
      min-width:0;
      max-width:100%;
      overflow:hidden;
    }
    .acad-day-item:hover{ border-color:var(--accent-50); }
    .acad-item-left{
      display:flex;
      align-items:center;
      gap:.35rem;
      flex-wrap:wrap;
      min-width:0;
      max-width:100%;
      overflow:hidden;
    }
    .acad-item-title{
      font-weight:700;
      font-size:.95rem;
      max-width:100%;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .acad-item-meta{
      color:var(--muted);
      font-size:.82rem;
      max-width:100%;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .acad-item-right{
      font-size:.85rem;
      color:var(--muted);
    }
    .acad-detail-top{
      display:flex;
      justify-content:space-between;
      gap:.6rem;
      align-items:flex-start;
      flex-wrap:wrap;
      margin-bottom:.4rem;
    }
    .acad-detail-title{
      font-weight:800;
      letter-spacing:.1px;
    }
    .acad-detail-sub{
      color:var(--muted);
      font-size:.86rem;
    }
    .acad-detail-list{
      display:flex;
      flex-direction:column;
      gap:.45rem;
    }
    .acad-detail-row{
      display:flex;
      justify-content:space-between;
      gap:.55rem;
      align-items:flex-start;
      padding:.7rem .8rem;
      border-radius:var(--radius-sm);
      background:var(--card);
      border:1px solid var(--border);
      box-shadow:none;
    }
    .acad-detail-text{
      min-width:0;
    }
    .acad-detail-text strong{
      display:block;
      font-size:.9rem;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .acad-detail-meta{
      font-size:.82rem;
      color:var(--muted);
      margin-top:.15rem;
      line-height:1.25;
      max-width:100%;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .acad-detail-notes{
      margin-top:.35rem;
      font-size:.84rem;
      color:var(--muted);
      line-height:1.25;
      max-width:100%;
      overflow:hidden;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      white-space:pre-wrap;
    }
    .acad-detail-actions{
      display:flex;
      gap:.35rem;
      flex-wrap:wrap;
      justify-content:flex-end;
      flex:0 0 auto;
    }
    .acad-info-panel{
      display:flex;
      gap:.8rem;
      min-height:auto;
      flex-direction:column;
    }
    .acad-info-empty{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:1.5rem 1rem;
      border-radius:var(--radius);
      background:var(--primary-soft);
      border:1px dashed var(--info-25);
      min-height:180px;
      max-height:220px;
      min-width: 100%;
      gap:.6rem;
    }
    .acad-empty-logo img{
      width:96px;
      height:auto;
      filter:none;
    }
    .acad-empty-title{
      font-weight:800;
      color:var(--text);
    }
    .acad-empty-sub{
      color:var(--muted);
      font-size:.9rem;
    }
    .acad-next-row{
      font-size:.88rem;
      color:var(--color-text);
      margin-bottom:.25rem;
    }
    .acad-detail-empty{
      color:var(--text-soft);
      font-size:.9rem;
      padding:.35rem 0;
    }
    .acad-day-modal-top{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:.75rem;
      margin-bottom:.75rem;
      flex-wrap:wrap;
    }
    .acad-day-modal-actions{
      display:flex;
      justify-content:flex-end;
      margin-top:.8rem;
    }
    .acad-record-detail{
      margin-top:.75rem;
      padding:.75rem;
      border-radius:var(--radius-md);
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
      color:var(--color-text);
      font-size:.9rem;
      line-height:1.35;
    }
    .day.is-selected{
      border-color:var(--info-45);
      background:var(--info-06);
    }
    .badge-soft{
      display:inline-flex;
      align-items:center;
      padding:.12rem .55rem;
      border-radius:var(--radius-pill);
      border:1px solid var(--border);
      background:var(--primary-soft);
      font-size:.75rem;
      color:var(--muted);
    }

    /* AGENDA SEMANAL */
    .agenda-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:.6rem;
      gap:.6rem;
      flex-wrap:wrap;
    }
    .agenda-actions{
      display:flex;
      gap:.6rem;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
      width:100%;
    }
    .agenda-downloads{
      display:flex;
      gap:.35rem;
      flex-wrap:wrap;
    }
    .agenda-shell{
      grid-column: 1 / -1;
      /* esto controla el fondo del calendario  background:var(--surface-94);*/
      border-radius:var(--radius-lg);
      /*border:1px solid var(--border-85); */
      padding:.5rem;
      overflow:auto;
      box-shadow:none;
      height: 40rem;
    }
    .agenda-grid{
      display:grid;
      grid-template-columns:70px repeat(6,1fr);
      font-size:.8rem;
      min-width:660px;
      position:relative;
    }
    .agenda-hour-spacer{
      height: var(--agenda-header-h);
      border-bottom: 1px solid var(--border-85);
    }
    .agenda-hour-col{ display:flex; flex-direction:column; }
    .agenda-hour{
      height: var(--agenda-hour-h);
      border-bottom: 1px dashed var(--border-85);
      padding-right: .3rem;
      text-align: right;
      color: var(--text-soft);
      display: flex;

      align-items: flex-start;
      justify-content: flex-end;
      padding-top: 6px;
      padding-bottom: 0;
    }
    .agenda-hour-end{
      height: 0;
      border-bottom: none;
      padding-top: 6px;
      padding-bottom: 0;
    }
    .agenda-day-col{ border-left:1px solid var(--border-85); position:relative; }
    .agenda-day-header{
      position: sticky;
      top: 0;
      background: var(--surface-98);
      text-align: center;
      font-weight: 800;
      border-bottom: 1px solid var(--border-85);
      z-index: 3;

      height: var(--agenda-header-h);
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .agenda-day-inner{ position:relative; }
    .agenda-line{
      position:absolute;
      left:0; right:0;
      height:1px;
      background:var(--primary-22);
      opacity:.7;
    }
    .class-block{
      position:absolute;
      left:4px; right:4px;
      border-radius:var(--radius-sm);
      padding:4px 6px;
      color:var(--color-primary-strong);
      font-size:.75rem;
      box-shadow:none;
      border:1px solid var(--accent-605);
      cursor:pointer;
      overflow:hidden;
      background-color:var(--accent);
      font-weight:700;
    }
    .class-block strong{ display:block; font-size:.78rem; }
    .class-block small{ display:block; font-size:.72rem; opacity:.95; }

    /* TAB MATERIAS */
    .subjects-layout{
      display:grid;
      grid-template-columns:minmax(0,1.4fr) minmax(0,1fr);
      gap:1rem;
    }
    @media(max-width:820px){ .subjects-layout{ grid-template-columns:1fr; } }
    .subjects-list-box, .subject-form-box{
      background:var(--surface-94);
      border-radius:var(--radius-md);
      border:1px solid var(--border-85);
      padding:1rem;
      box-shadow:none;
      position:relative;
      overflow:hidden;
    }
    .subjects-list-box::before, .subject-form-box::before{
      content:"";
      position:absolute;
      inset:0 0 auto 0;
      height:4px;
      background:var(--accent-605);
      opacity:.6;
      pointer-events:none;
    }
    .subjects-list-header, .subject-form-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:.6rem;
      margin-bottom:.75rem;
    }
    .subjects-list{
      display:flex;
      flex-direction:column;
      gap:.5rem;
      margin-top:.2rem;
    }
    .subjects-empty-msg{
      font-size:.85rem;
      color:var(--color-muted-2);
      background:var(--color-surface-3);
      border-radius:var(--radius-sm);
      border:1px dashed var(--border-85);
      padding:.65rem .7rem;
      margin-top:.6rem;
    }
    .subject-row{
      display:flex;
      align-items:center;
      gap:.6rem;
      background:var(--color-surface-3);
      border-radius:var(--radius-md);
      border:1px solid var(--border-85);
      padding:.6rem .75rem;
      box-shadow:none;
      transition:transform .15s ease, border-color .15s ease;
    }
    .subject-row:hover{
      transform:translateY(-1px);
      border-color:var(--accent-50);
      box-shadow:none;
    }
    .subject-color-dot{
      width:18px; height:18px; border-radius:50%;
      border:1px solid var(--primary-90);
    }
    .subject-name{ flex:1; font-size:.92rem; font-weight:600; }
    .subject-actions{ display:flex; gap:.35rem; }
    .subject-form-field{
      display:flex;
      flex-direction:column;
      gap:.35rem;
      margin-bottom:.7rem;
    }
    #tab-planestudios{
      height: 101rem;
      overflow: hidden;
    }
    .plan-frame{
      width:100%;
     height: 100%;
      border: 0;

    }
    .subject-form-field label{
      font-size:.82rem;
      color:var(--color-muted-2);
      font-weight:600;
    }
    .subject-form-box select,
    .subject-form-box input[type="text"]{
      padding:.75rem 1rem;
      border-radius:999px;
      border:1px solid var(--border-85);
      background:var(--color-surface-3);
      font-size:.95rem;
      transition:border-color .2s ease, transform .2s ease;
    }
    .subject-form-box select:focus,
    .subject-form-box input[type="text"]:focus{
      border-color:var(--accent-80);
      outline:2px solid var(--accent-20);
      outline-offset:1px;
      box-shadow:none;
      transform:translateY(-1px);
    }
    .subject-color-row{
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      gap:.55rem;
      position:relative;
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
      border-radius:var(--radius-md);
      padding:.7rem .8rem;
      box-shadow:none;
    }
    .subject-color-palette{
      display:flex;
      gap:.5rem;
      flex-wrap:wrap;
    }
    .subject-color-swatch{
      width:34px;
      height:34px;
      border-radius:50%;
      border:2px solid transparent;
      background:var(--color-surface-3);
      cursor:pointer;
      box-shadow:none;
      transition:transform .15s ease, border-color .15s ease;
    }
    .subject-color-swatch[data-color]{
      background:var(--swatch-color, transparent);
    }
    .subject-color-swatch:hover{
      transform:translateY(-1px) scale(1.03);
      box-shadow:none;
      border-color:var(--accent-45);
    }
    .subject-color-swatch.is-selected{
      border-color:var(--accent-90);
      outline:2px solid var(--accent-25);
      outline-offset:2px;
      box-shadow:none;
    }
    .subject-color-swatch--custom{
      background:var(--accent-1);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    .subject-color-swatch__custom{
      width:60%;
      height:60%;
      border-radius:50%;
      border:2px solid var(--inverse-90);
      box-shadow:none;
      background:var(--surface-3);
    }
    .subject-color-input{
      position:absolute;
      opacity:0;
      pointer-events:none;
      width:1px;
      height:1px;
    }
    .subject-color-manual{
      display:flex;
      flex-direction:column;
      gap:.35rem;
      margin-top:.2rem;
    }
    .subject-color-text{
      border-radius:999px;
    }
    .subject-color-text.is-invalid{
      border-color:var(--danger-70);
      outline:2px solid var(--danger-18);
      outline-offset:1px;
      box-shadow:none;
    }
    .subject-color-text.is-valid{
      border-color:var(--ok-60);
      outline:2px solid var(--ok-18);
      outline-offset:1px;
      box-shadow:none;
    }
    .subject-color-hint{
      font-size:.78rem;
      color:var(--color-muted-2);
    }
    .subject-form-actions{
      margin-top:.2rem;
      display:flex;
      gap:.5rem;
      justify-content:flex-end;
    }
    .subject-form-note{
      margin-top:.75rem;
      font-size:.8rem;
      color:var(--color-muted-2);
      background:var(--accent-08);
      border-radius:var(--radius-sm);
      padding:.55rem .65rem;
      border:1px solid var(--accent-20);
    }

    /* TAB PERFIL */
    .profile-layout{
      display:grid;
      grid-template-columns:minmax(0,1.2fr) minmax(0,1fr);
      gap:1rem;
    }
    @media(max-width:980px){ .profile-layout{ grid-template-columns:1fr; } }
    .profile-card{
      background:var(--surface-94);
      border-radius:var(--radius-lg);
      border:1px solid var(--border-85);
      padding:1rem;
      box-shadow:none;
    }
    .profile-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:.6rem;
      margin-bottom:.8rem;
    }
    .profile-email{
      font-size:.85rem;
      color:var(--color-muted-2);
      padding:.35rem .6rem;
      border-radius:var(--radius-sm);
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
    }
    .profile-avatar{
      display:flex;
      align-items:center;
      gap:1rem;
      flex-wrap:wrap;
      margin-bottom:1rem;
    }
    .profile-avatar img{
      width:290px;
      height: 290px;
      border-radius:50%;
      object-fit:cover;
      border:2px solid var(--border-60);
      background:var(--color-surface-3);
    }
    .profile-avatar-actions{
      display:flex;
      flex-direction:column;
      gap:.5rem;
      flex:1;
      min-width:220px;
    }
    .profile-avatar-input{
      display:inline-flex;
      align-items:center;
      gap:.4rem;
      padding:.45rem .75rem;
      border-radius:var(--radius-sm);
      border:1px dashed var(--border-60);
      background:var(--color-surface-3);
      color:var(--color-muted-2);
      font-size:.85rem;
      cursor:pointer;
      width:fit-content;
    }
    .profile-avatar-input input{
      display:none;
    }
    .profile-avatar-buttons{
      display:flex;
      gap:.5rem;
      flex-wrap:wrap;
    }
    .profile-avatar-status{
      font-size:.82rem;
      color:var(--color-muted-2);
    }
    .profile-grid{
      display:grid;
      grid-template-columns:repeat(2, minmax(0,1fr));
      gap:.75rem;
    }
    @media(max-width:720px){ .profile-grid{ grid-template-columns:1fr; } }
    .profile-field{
      display:flex;
      flex-direction:column;
      gap:.35rem;
    }
    .profile-field-wide{ grid-column:1 / -1; }
    .profile-field label{
      font-size:.82rem;
      color:var(--color-muted-2);
      font-weight:600;
    }
    .profile-actions{
      margin-top:.9rem;
      display:flex;
      align-items:center;
      gap:.75rem;
      flex-wrap:wrap;
    }
    .profile-status{
      font-size:.85rem;
      color:var(--color-muted-2);
    }
    .profile-security{
      display:flex;
      flex-direction:column;
      gap:.6rem;
    }

    /* TAB PLANIFICADOR */
    .planner-layout{
      display: block;
      margin-bottom: 12px;
     /* display:grid;
      grid-template-columns:minmax(0,1.35fr) minmax(0,1fr);
      gap:1rem; */

    }
    @media(max-width:980px){ .planner-layout{ grid-template-columns:1fr; } }
    .planner-toolbar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:.6rem;
      flex-wrap:wrap;
    }
    .planner-toolbar-left{
      display:flex;
      align-items:center;
      gap:.5rem;
    }
    .planner-toolbar-right{
      display:flex;
      align-items:center;
      gap:.5rem;
      flex-wrap:wrap;
    }
    .planner-list{
      display:flex;
      flex-direction:column;
      gap:.5rem;
      margin-top:.6rem;
      max-height:360px;
      overflow:auto;
    }
    .hidden{
      display:none; 
    }
    .section-card{
      background:var(--color-surface-3);
      border-radius:var(--radius-md);
      border:1px solid var(--border-85);
      box-shadow:none;
      padding:.7rem .75rem;
      display:flex;
      flex-direction:column;
      gap:.45rem;
    }
    .section-card-top{
      display:flex;
      justify-content:space-between;
      gap:.6rem;
      align-items:flex-start;
      flex-wrap:wrap;
    }
    .section-title{
      font-weight:800;
      font-size:.95rem;
    }
    .section-sub{
      color:var(--text-soft);
      font-size:.82rem;
    }
    .section-actions{
      display:flex;
      gap:.4rem;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .section-days{
      display:flex;
      gap:.35rem;
      flex-wrap:wrap;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      padding:.2rem .55rem;
      border-radius:var(--radius-pill);
      background:var(--glass-soft);
      color:var(--color-text);
      font-size:.8rem;
      border:1px solid var(--border-18);
    }
    .pill-muted{
      color:var(--text-soft);
      border-color:var(--border-10);
      background:var(--primary-22);
    }
    .preset-item{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:.5rem;
      padding:.55rem .6rem;
      border-radius:var(--radius-md);
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
      margin-bottom:.4rem;
      box-shadow:none;
    }
    .preset-item.active{
      border-color:var(--accent-60);
      box-shadow:none;
    }
    .preset-name{
      font-weight:800;
    }
    .preset-meta{
      color:var(--text-soft);
      font-size:.82rem;
      margin-top:.1rem;
    }
    .preset-row{
      display:flex;
      gap:.4rem;
      flex-wrap:wrap;
    }
    .input-mini{
      padding:.48rem .65rem;
      border-radius:var(--radius-md);
      border:1px solid var(--border-60);
      background:var(--color-surface-3);
      color:var(--color-text);
      box-shadow:none;
      font-size:.9rem;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:.25rem .6rem;
      border-radius:var(--radius-sm);
      background:var(--accent-15);
      border:1px solid var(--accent-40);
      color:var(--color-text);
      font-weight:800;
      font-size:.8rem;
    }

/* ===== PROFESORES ===== */
.prof-layout{
  grid-template-columns: minmax(0,1.2fr) minmax(0,0.8fr);
  gap:1rem;
}
@media(max-width:1000px){
  .prof-layout{ grid-template-columns:1fr; }
}
.profDetail {
  margin-top: 1rem;
}
.prof-list-panel, .prof-detail-panel{
  display:flex;
  flex-direction:column;
  gap:.75rem;
}
.prof-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:1rem;
  flex-wrap:wrap;
}
.prof-filters{
  display:flex;
  gap:.6rem;
  flex-wrap:wrap;
}
.prof-filters select{
  background:var(--color-surface-3);
  border:1px solid var(--border-80);
  color:var(--color-text);
  border-radius:10px;
  padding:.45rem .65rem;
  min-width:160px;
}
.prof-list{
  display:flex;
  gap:.65rem;
}
.prof-card{
  background:var(--surface-94);
  border:1px solid var(--border-35);
  border-radius:var(--radius-lg);
  padding:.85rem;
  box-shadow:none;
  cursor:pointer;
  transition:transform .12s ease, border-color .12s ease;
}
.prof-card:hover{ transform:translateY(-1px); border-color:var(--accent-45); }
.prof-card.active{ border-color:var(--accent-605); box-shadow:none; }
.prof-card-title{
  font-size:1rem;
  font-weight:800;
}
.prof-card-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:.5rem;
  flex-wrap:wrap;
}
.prof-card-meta{ color:var(--muted); font-size:.9rem; }
.prof-badges{ display:flex; gap:.35rem; flex-wrap:wrap; margin-top:.3rem; }
.prof-badge{
  background:var(--glass-faint);
  border:1px solid var(--border-22);
  padding:.18rem .45rem;
  border-radius:var(--radius-sm);
  font-size:.82rem;
  color:var(--text-soft);
}
.prof-detail-card{
  background:var(--surface-94);
  border:1px solid var(--border-35);
  border-radius:var(--radius-lg);
  padding:1rem;
  box-shadow:none;
}
.prof-detail-head{
  display:flex;
  justify-content:space-between;
  gap:.75rem;
  flex-wrap:wrap;
  align-items:flex-start;
}
.prof-detail-name{ font-size:1.15rem; font-weight:800; }
.prof-detail-meta{ color:var(--muted); font-size:.9rem; }
.prof-score{
  text-align:right;
}
.prof-score-big{
  font-size:1.6rem;
  font-weight:800;
}
.stars{
  display:flex;
  gap:.1rem;
  align-items:center;
}
.star{ color:var(--color-primary-soft); font-size:1rem; }
.star.full{ color:var(--color-accent); text-shadow:0 0 6px var(--accent-35); }
.prof-criteria-grid{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:.6rem;
  margin-top:.8rem;
}
@media(max-width:760px){
  .prof-criteria-grid{ grid-template-columns:1fr; }
}
.prof-criteria{
  background:var(--glass-faint);
  border:1px solid var(--border-20);
  border-radius:var(--radius-md);
  padding:.75rem;
}
.prof-comments{
  margin-top:.9rem;
  display:flex;
  flex-direction:column;
  gap:.45rem;
}
.prof-comment{
  background:var(--glass-faint);
  border:1px solid var(--border-16);
  border-radius:var(--radius-md);
  padding:.7rem;
}
.prof-comment-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:.5rem;
  flex-wrap:wrap;
}
.prof-rate-card{
  background:var(--surface-94);
  border:1px solid var(--border-35);
  border-radius:var(--radius-lg);
  padding:1rem;
  box-shadow:none;
}
.prof-rate-grid{
  gap:.6rem;
  margin-bottom:.65rem;
  display: flex;
  justify-content: center;
  align-items: center;
}
@media(max-width:760px){
  .prof-rate-grid{ grid-template-columns:1fr; }
}
.prof-rate-field{
  background:var(--glass-faint);
  border:1px solid var(--border-16);
  border-radius:var(--radius-md);
  padding:.65rem;
}
.prof-rate-value{ color:var(--muted); margin-top:.2rem; }
.prof-rate-title{ margin:0 0 .35rem; }
.prof-rate-card textarea{
  width:100%;
  min-height:88px;
  background:var(--color-surface-3);
  border:1px solid var(--border-40);
  color:var(--color-text);
  border-radius:var(--radius-sm);
  padding:.6rem;
  font-family:inherit;
}
.prof-rate-check{
  display:flex;
  gap:.4rem;
  align-items:center;
  margin-top:.35rem;
  color:var(--text-soft);
  font-size:.9rem;
}

.muted{ color:var(--text-soft); font-size:.9rem; }

/* ==== plan de estudio ==== */

/* ===== MENSAJES ===== */
.messenger-dock{
  position:fixed;
  right:0.75rem;
  top:96px;
  bottom:0.75rem;
  max-width:480px;
  width:min(480px, 95vw);
  z-index:50;
}
.messenger-panel{
  height:100%;
  background:var(--surface-94);
  border:1px solid var(--border-35);
  border-radius:var(--radius-2xl);
  box-shadow:none;
  padding:.85rem;
  display:flex;
  flex-direction:column;
  gap:.75rem;
  backdrop-filter: blur(10px);
  transition:transform .2s ease, opacity .2s ease;
}
.messenger-dock.collapsed .messenger-panel{
  transform:translateX(110%);
  opacity:.25;
  pointer-events:none;
}
.messenger-toggle{
  position:absolute;
  left:-48px;
  top:1rem;
  width:42px;
  height:42px;
  border-radius:var(--radius-md);
  border:1px solid var(--border-28);
  background:var(--accent-18);
  color:var(--color-text);
  cursor:pointer;
  box-shadow:var(--shadow-btn);
}
.messenger-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.6rem;
  flex-wrap:wrap;
}
.messenger-title{
  display:flex;
  gap:.6rem;
  align-items:center;
}
.messenger-actions{ display:flex; gap:.4rem; }
.messenger-icon{
  width:42px;
  height:42px;
  border-radius:14px;
  background:var(--accent-16);
  border:1px solid var(--accent-40);
  display:grid;
  place-items:center;
  font-size:1.1rem;
}
.messenger-heading{ font-weight:800; font-size:1rem; }
.messenger-sub{ color:var(--color-muted); font-size:.88rem; }
.messenger-grid{
  display:grid;
  grid-template-columns: 1fr 1.15fr;
  gap:.75rem;
  height:100%;
}
@media(max-width:1200px){
  .messenger-grid{ grid-template-columns:1fr; height:auto; }
}
.messenger-left, .messenger-right{
  display:flex;
  flex-direction:column;
  gap:.75rem;
}
.card-block, .chat-card{
  background:var(--surface-94);
  border:1px solid var(--border-30);
  border-radius:14px;
  padding:.85rem;
  box-shadow:none;
}
.block-title{
  font-weight:700;
  margin-bottom:.35rem;
  letter-spacing:.1px;
}
.friend-form{
  display:flex;
  gap:.5rem;
  margin-top:.35rem;
  flex-wrap:wrap;
}
.friend-form input{
  flex:1;
  min-width:200px;
  padding:.55rem .7rem;
  border-radius:10px;
  border:1px solid var(--border-50);
  background:var(--color-surface-3);
  color:var(--color-text);
}
.requests-box, .friends-box, .messages-box{
  display:flex;
  flex-direction:column;
  gap:.6rem;
}
.requests-group, .friends-group{ margin-top:.4rem; }
.friends-sections{
  display:flex;
  flex-direction:column;
  gap:.5rem;
}
.requests-group:not(:first-child){
  padding-top:.45rem;
  border-top:1px dashed var(--border-20);
}
.requests-header, .friends-header{
  font-size:.86rem;
  color:var(--text-soft);
  margin-bottom:.35rem;
  letter-spacing:.05rem;
}
.request-card{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  border:1px solid var(--border-18);
  padding:.6rem .75rem;
  border-radius:12px;
  background:var(--glass-faint);
  gap:.4rem;
}
.req-email{ font-weight:700; }
.req-meta{ color:var(--text-soft); font-size:.85rem; }
.req-actions{ display:flex; gap:.45rem; }
.friends-box .muted, .requests-box .muted, .messages-box .muted{
  color:var(--text-soft);
  font-size:.9rem;
}
.friend-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border:1px solid var(--border-18);
  padding:.55rem .7rem;
  border-radius:12px;
  background:var(--glass-faint);
  transition:border-color .12s ease;
}
.friend-main{
  display:flex;
  align-items:center;
  gap:.6rem;
}
.friend-avatar{
  width:40px;
  height:40px;
  border-radius:50%;
  object-fit:cover;
  border:1px solid var(--border-45);
  background:var(--color-surface-3);
}
.friend-row.friend-online{
  border-color:var(--ok-5);
  box-shadow:none;
}
.friend-name{ font-weight:700; }
.friend-meta{ color:var(--text-soft); font-size:.85rem; display:flex; gap:.45rem; align-items:center; }
.status-dot{
  width:10px;
  height:10px;
  border-radius:999px;
  background:var(--border-80);
  box-shadow:none;
}
.status-dot.online{
  background:var(--color-ok);
  box-shadow:none;
}
.chat-card{ flex:1; display:flex; flex-direction:column; gap:.65rem; }
.chat-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:.6rem;
  flex-wrap:wrap;
}
.chat-title{
  font-weight:800;
  font-size:1.05rem;
}
.chat-subtitle{ color:var(--text-soft); font-size:.9rem; }
.toggle-line{
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  color:var(--text-soft);
  font-size:.9rem;
}
.messages-box{
  min-height:260px;
  max-height:420px;
  overflow:auto;
  border:1px solid var(--border-30);
  border-radius:14px;
  padding:.75rem;
  background:var(--color-surface-3);
  box-shadow:none;
}
.msg-row{
  display:flex;
  margin-bottom:.5rem;
}
.msg-row.me{ justify-content:flex-end; }
.msg-bubble{
  max-width:80%;
  padding:.55rem .65rem;
  border-radius:14px;
  background:var(--accent-18);
  border:1px solid var(--border-20);
  box-shadow:none;
}
.msg-row.other .msg-bubble{
  background:var(--border-12);
}
.msg-text{ white-space:pre-wrap; }
.msg-meta{ color:var(--text-soft); font-size:.78rem; margin-top:.25rem; }
.chat-input-row{
  display:flex;
  gap:.5rem;
  margin-top:auto;
}
.chat-input-row input{
  flex:1;
  padding:.65rem .75rem;
  border-radius:12px;
  border:1px solid var(--border-50);
  background:var(--color-surface-3);
  color:var(--color-text);
}
