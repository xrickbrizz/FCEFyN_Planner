
:root{
  --subj-1: #2EAF6F;
  --subj-2: #2D7FF9;
  --subj-3: #8B5CF6;
  --subj-4: #F59E0B;
  --subj-5: #EF4444;
  --subj-6: #14B8A6;
  --subj-7: #64748B;
}

/* =========================================================
   Layout
   ========================================================= */
   #logoPanel{
    width: 11rem;
    cursor:auto;
   }
header{
  position: relative;
  padding: 1rem 1.3rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: .8rem;
  border-bottom:1px solid var(--border-75);
  backdrop-filter: blur(10px);
  z-index: 100;
}
body.light-mode header,
body[data-theme="light"] header{
  background:var(--surface-3);
  border-bottom:1px solid var(--color-border);
  box-shadow:none;
  backdrop-filter:none;
}
.header-left{ display:flex; flex-direction:column; gap:.15rem; }
.header-title{ font-size:1.3rem; font-weight:700; letter-spacing:.12px; line-height:1.2; }
.header-sub{ font-size:.87rem; color:var(--muted); }
.header-right{ display:flex; align-items:center; gap:.75rem; flex-wrap:wrap; justify-content:flex-end; }
.user-panel{
  position:relative;
  display:flex;
  align-items:center;
  z-index: 1000;
}
.user-avatar{
  width: 3.125rem;
  height: 3.125rem;
  padding: 0;
  border-radius: 62.438rem;
  border:1px solid var(--border-85);
  background:var(--surface-94);
  box-shadow:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
.user-avatar img{
  width: 100%;
  height: 100%;
  border-radius: inherit;
  object-fit:cover;
  display:block;
}
.user-menu{
  position:absolute;
  right: 0;
  top: calc(100% + .55rem);
  min-width: 11.875rem;
  background:var(--surface-94);
  border:1px solid var(--border-80);
  border-radius: var(--radius-lg);
  padding: .35rem;
  box-shadow:none;
  opacity:0;
  transform:translateY(-8px);
  pointer-events:none;
  transition:opacity var(--transition-fast), transform var(--transition-fast);
  z-index:40;
}
.user-menu::before{
  content:"";
  position:absolute;
  top: -0.375rem;
  right: 1.125rem;
  width: 0.75rem;
  height: 0.75rem;
  background:var(--surface-94);
  border-left:1px solid var(--border-60);
  border-top:1px solid var(--border-60);
  transform:rotate(45deg);
}
.user-panel.open .user-menu{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}
.user-menu button,
.user-menu a{
  width: 100%;
  border:none;
  background:transparent;
  padding: .55rem .7rem;
  border-radius: var(--radius-md);
  color:var(--color-text);
  font-size: .9rem;
  text-align:left;
  display:flex;
  align-items:center;
  gap: .5rem;
  cursor:pointer;
}
.user-menu button:hover,
.user-menu a:hover{
  background:var(--accent-12);
}
.user-menu .menu-icon{
  font-size: 1rem;
  width: 1.1rem;
  text-align:center;
}
.account-box{
  padding: .55rem .85rem;
  border-radius: var(--radius-lg);
  background:var(--surface-94);
  border:1px solid var(--border-85);
  display:flex;
  flex-direction:column;
  gap: .12rem;
  min-width: 15rem;
  box-shadow:none;
}
.account-label{ font-size:.76rem; color:var(--muted); letter-spacing:.1px; }
.account-email{
  font-size: .88rem;
  color:var(--color-text);
  max-width: 16.25rem;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

button{

  border:none;
  border-radius: var(--radius-md);
  cursor:pointer;
  font-size: .92rem;
  font-weight:500;
  line-height:1.25;
  transition: transform var(--transition-fast), filter var(--transition-fast), box-shadow var(--transition-fast);
  user-select:none;
  letter-spacing: .02em;
}
.btn-blue{
  color:var(--color-primary-strong);
  box-shadow:var(--shadow-btn);
}
.btn-blue:hover{ filter:brightness(1.05); transform:translateY(-1px); }
.btn-gray{ background:var(--color-surface-2); color:var(--color-text); box-shadow:var(--shadow-btn); }
.btn-gray:hover{ filter:brightness(1.05); transform:translateY(-1px); }
.btn-outline{
  background:var(--glass-faint);
  color:var(--color-text);
  border:1px solid var(--border-90);
  box-shadow:var(--shadow-btn);
}
.btn-outline:hover{ border-color:var(--accent-805); background:var(--surface-95); }
.btn-danger{ background:var(--color-danger); color:var(--color-text-contrast);}
.btn-small{ padding:.24rem .68rem; font-size:.8rem; border-radius:var(--radius-sm);box-shadow: none; }

body.dark-mode .btn-blue,
body[data-theme="dark"] .btn-blue{
  background:var(--surface-9);
  color:var(--color-primary-strong);
  border:1px solid var(--inverse-70);
  border-radius: var(--radius-pill);
  box-shadow:none;
}
body.dark-mode .btn-blue:active,
body[data-theme="dark"] .btn-blue:active{
  transform:scale(0.98);
}
body.dark-mode .btn-gray,
body[data-theme="dark"] .btn-gray{
  background:var(--inverse-04);
  color:var(--color-text);
  border:1px solid var(--inverse-10);
  box-shadow:none;
}
body.dark-mode .btn-outline,
body[data-theme="dark"] .btn-outline{
  background:transparent;
  border-color:var(--inverse-12);
  box-shadow:none;
}

.section-label{
  display:inline-flex;
  align-items:center;
  gap: .55rem;
  font-weight:600;
  letter-spacing: .1px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius: 62.438rem;
  padding: .55rem 1rem;
  color:var(--text);
  box-shadow:none;
  width: fit-content;
}
body.dark-mode .section-label,
body[data-theme="dark"] .section-label{
  background:var(--card);
  border-color:var(--border);
  box-shadow:none;
}

.content-header{
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  gap: .75rem;
  position:static;
  top: 0;
  z-index:12;
  padding: .35rem .5rem;
  background:var(--card);
  border-radius: var(--radius);
  border:1px solid var(--border);
  box-shadow:none;
}
.top-actions{
  display:inline-flex;
  align-items:center;
  gap:.5rem;
  position:relative;
}
.heart-toggle-btn{
  font-size:1rem;
  line-height:1;
  position:relative;
}
.friend-requests-badge{
  position:absolute;
  top:-6px;
  right:-8px;
  min-width:18px;
  height:18px;
  padding:0 5px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:.68rem;
  font-weight:700;
  background:var(--danger, #d44);
  color:#fff;
  border:1px solid rgba(255,255,255,.75);
}
.add-amigo-header-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.5rem;
}
.friend-requests-modal-overlay{
  position:fixed;
  inset:0;
  background:rgba(10, 16, 22, .34);
  backdrop-filter:blur(4px);
  -webkit-backdrop-filter:blur(4px);
  z-index:1200;
  display:grid;
  place-items:center;
  padding:1.25rem;
  animation:fadeIn .2s ease;
}
.friend-requests-modal{
  width:min(42rem, 92vw);
  max-height:70vh;
  background:var(--surface-94);
  border:1px solid var(--border-40);
  border-radius:1.3rem;
  box-shadow:0 20px 50px rgba(15, 23, 42, .16);
  display:flex;
  flex-direction:column;
  overflow:hidden;
  animation:slideFadeUp .18s ease;
}
.friend-requests-modal-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.75rem;
  padding:1rem 1.1rem .8rem;
  border-bottom:1px solid var(--border-25);
}
.friend-requests-modal-header h3{
  margin:0;
}
.friend-requests-close{
  border:1px solid var(--border-35);
  background:var(--surface-96);
  color:var(--color-text);
  width:2rem;
  height:2rem;
  border-radius:50%;
  cursor:pointer;
  line-height:1;
  font-size:1.05rem;
}
.friend-requests-modal-body{
  overflow:auto;
  padding:.9rem 1.1rem 1.1rem;
}
.friend-requests-modal-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0,1fr));
  gap:.95rem;
}
.friend-requests-column{
  display:flex;
  flex-direction:column;
  gap:.55rem;
}
.friend-requests-column h4{
  margin:0;
  font-size:.84rem;
  font-weight:700;
  color:var(--text-soft);
  letter-spacing:.02em;
}
.modal-requests-list{
  display:flex;
  flex-direction:column;
  gap:.55rem;
  min-height:84px;
}
@media (max-width: 640px){
  .friend-requests-modal{
    width:min(42rem, 95vw);
  }
  .friend-requests-modal-grid{
    grid-template-columns:minmax(0,1fr);
  }
  .friend-requests-modal .req-actions{
    width:100%;
    justify-content:flex-start;
  }
}
.content-header .section-label{
  justify-self:center;
}
body.dark-mode .content-header,
body[data-theme="dark"] .content-header{
  background:var(--surface-92);
  border-color:var(--inverse-08);
  box-shadow:none;
}
.help-btn{
  border:1px solid var(--accent-75);
  background:var(--accent-bg);
  color:var(--color-primary-strong);
  width: 2.625rem;
  height: 2.625rem;
  border-radius: var(--radius-md);
  font-weight:800;
  font-size: 1.05rem;
  box-shadow:var(--shadow-btn);
}
body.dark-mode .help-btn,
body[data-theme="dark"] .help-btn{
  background:var(--inverse-06);
  border-color:var(--inverse-14);
  color:var(--color-text);
  box-shadow:none;
}
.help-btn:hover{ filter:brightness(1.05); }

.page-layout{
  --sidebar-expanded:150px;
  --sidebar-collapsed:96px;
  display:grid;
  grid-template-columns:var(--sidebar-expanded) minmax(0,1fr);
  gap: 1.35rem;
  max-width: none;
  width: calc(100% - 2rem);
  align-items:flex-start;
  transition:grid-template-columns .18s ease;
}
.page-layout.sidebar-collapsed{
  grid-template-columns:var(--sidebar-collapsed) minmax(0,1fr);
}
.page-content{
  display:flex;
  flex-direction:column;
  margin: 0;
  padding: 0;
  gap: .75rem;
}
.main-shell{
  max-width: none;
  width: 100%;
  margin: 0;
  padding: 0;
}
.main-shell > .tab-card{
  width: 100%;
}

@media(max-width:650px){
  .page-layout{ grid-template-columns:1fr; width:calc(100% - 1.6rem); padding:0 .8rem; }
}

@media (min-width:769px) and (max-width:1000px){
  .page-layout{
    display:block;
    grid-template-columns:none;
    width:calc(100% - 1.6rem);
    padding:0 .8rem;
    gap:0;
  }
  .page-content{
    width:100%;
    min-width:0;
    margin-left:0 !important;
    transform:none !important;
    transition:none !important;
    filter:none !important;
    backdrop-filter:none !important;
    opacity:1 !important;
  }
}

    .tabs-bar{
      display:flex;
      gap: .5rem;
      margin-bottom:1rem;
      flex-wrap:wrap;
      align-items:center;
    }
.tab-btn{
  flex:0 0 auto;
  padding: .5rem 1rem;
  border-radius: var(--radius-lg);
  background:var(--surface-94);
  color:var(--color-text);
  border:1px solid var(--border-85);
  font-size: .9rem;
  font-weight:500;
  line-height:1.25;
  box-shadow:none;
  letter-spacing: .02em;
}
.tab-btn.tab-active{
  background:var(--btn-primary-bg);
  border-color:var(--accent-805);
  box-shadow:none;
  color:var(--color-primary-strong);
  font-weight:700;
}
body.dark-mode .tab-btn,
body[data-theme="dark"] .tab-btn{
  background:var(--inverse-04);
  border-color:var(--inverse-10);
  box-shadow:none;
}
body.dark-mode .tab-btn.tab-active,
body[data-theme="dark"] .tab-btn.tab-active{
  background:var(--surface-9);
  color:var(--color-primary-strong);
  border-color:var(--inverse-70);
  box-shadow:none;
}
body.light-mode .tab-btn,
body[data-theme="light"] .tab-btn{
  background:var(--surface-3);
  border-color: var(--color-border);
  box-shadow:none;
}
body.light-mode .tab-btn.tab-active,
body[data-theme="light"] .tab-btn.tab-active{
  background:var(--btn-primary-bg);
  color:var(--surface-3);
  border-color:transparent;
  box-shadow:none;
}

.tab-card{
  background: var(--surface-98);
  border-radius: var(--radius-2xl);
  padding: 1.05rem;
  box-shadow:none;
  border:1px solid var(--border-30);
  backdrop-filter: blur(8px);
}
body.light-mode .tab-card,
body[data-theme="light"] .tab-card{
  background:var(--surface-3);
  border-color: var(--color-border);
  box-shadow:none;
  backdrop-filter:none;
}


.coming-view{
  min-height: calc(100vh - 16.25rem);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap: .6rem;
  padding: 1.2rem;
}
.coming-illustration{
  width: min(100%, 22.5rem);
  color:var(--color-text);
}
.coming-illustration svg{
  width: 100%;
  height: auto;
  display:block;
}
.coming-view h2{
  margin: .2rem 0 0;
  font-size: clamp(2rem, 2.8vw, 2.6rem);
  line-height: 1.12;
  color:var(--color-primary-strong);
}
.coming-view p{
  margin: 0;
  max-width: 38.75rem;
  color:var(--text-soft);
  font-size: 1.03rem;
  line-height: 1.45;
}
@media (max-width: 900px){
  .coming-view{
    min-height: calc(100vh - 13.75rem);
    padding: 1rem .7rem;
  }
  .coming-illustration{
    width: min(100%, 18.75rem);
  }
}
    .home-layout{
      display:grid;
      grid-template-columns:minmax(0,2.1fr) minmax(0,1fr);
      gap: 1rem;
      align-items:stretch;
      min-height: calc(100vh - 14.375rem);
    }
    @media(max-width:1100px){
      .home-layout{ grid-template-columns:1fr; min-height:auto; }
    }
    .home-title{ margin:0.1rem 0; font-size:1.6rem; font-weight:700; line-height:1.2; letter-spacing:-0.01em; }
    .home-sub{
      color:var(--text-soft);
      max-width: 48.75rem;
      line-height: 1.55;
    }
    .home-cards{
      margin-top:1.1rem;
      display:grid;
      gap: .85rem;
      grid-template-columns:repeat(3, minmax(0,1fr));
      grid-auto-rows:1fr;
    }
    @media(max-width:1024px){
      .home-cards{ grid-template-columns:repeat(2, minmax(0,1fr)); }
    }
    @media(max-width:650px){
      .home-cards{ grid-template-columns:1fr; }
    }
    .home-card{
      position:relative;
      display:flex;
      gap: .75rem;
      align-items:flex-start;
      width:100%;
      height:100%;
      text-align:left;
      background:#fff;
      border:1px solid var(--border-30);
      border-radius: var(--radius-lg);
      padding: .9rem;
      box-shadow:0 8px 22px rgba(15, 23, 42, 0.05);
      font-family:inherit;
      color:inherit;
      transition:transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
    }
    .home-card[data-coming-soon="false"]{
      cursor:pointer;
    }
    .home-card[data-coming-soon="false"]:hover{
      transform:translateY(-2px);
      box-shadow:0 14px 28px rgba(15, 23, 42, 0.1);
      border-color:var(--border-40);
    }
    .home-card[data-coming-soon="false"]:focus-visible{
      outline:2px solid var(--color-primary);
      outline-offset:2px;
    }
    .home-card[data-coming-soon="true"]{
      opacity:.65;
      cursor:default;
    }
    body.dark-mode .home-card,
    body[data-theme="dark"] .home-card{
      background:var(--surface-92);
      border-color:var(--inverse-10);
      box-shadow:none;
    }
    .home-card-icon{
      width: 2.75rem;
      height: 2.75rem;
      border-radius: 50%;
      background:var(--accent-12);
      border:1px solid var(--accent-35);
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--color-primary-strong);
      flex:0 0 auto;
    }
    body.dark-mode .home-card-icon,
    body[data-theme="dark"] .home-card-icon{
      color:var(--color-text);
      background:rgba(255,255,255,0.08);
      border-color:rgba(255,255,255,0.18);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
    }
    .home-card-icon svg{ width:22px; height:22px; }
    .home-card-body{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:.2rem;
    }
    .home-card-title{ font-weight:800; margin-bottom:.2rem; }
    .home-card-desc{ color:var(--text-soft); line-height:1.4; }
    .home-card-skeleton{
      pointer-events:none;
      opacity:.75;
    }
    .home-card-skeleton-icon{
      background:linear-gradient(90deg, #edf0f3 20%, #f8fafc 45%, #edf0f3 70%);
      background-size:200% 100%;
      border:none;
      animation:skeletonPulse 1.1s ease infinite;
    }
    .home-skeleton-line{
      height:.72rem;
      border-radius:999px;
      background:linear-gradient(90deg, #edf0f3 20%, #f8fafc 45%, #edf0f3 70%);
      background-size:200% 100%;
      animation:skeletonPulse 1.1s ease infinite;
      margin:.25rem 0;
      width:100%;
    }
    .home-skeleton-line-title{ width:65%; height:.9rem; }
    .home-card-badge{
      position:absolute;
      top:.55rem;
      right:.55rem;
      border-radius:var(--radius-pill);
      border:1px solid var(--border-30);
      background:var(--surface-3);
      color:var(--text-soft);
      font-size:.72rem;
      font-weight:700;
      padding:.1rem .45rem;
    }
    body.dark-mode .home-card-badge,
    body[data-theme="dark"] .home-card-badge{
      border-color:rgba(255,255,255,0.28);
      background:rgba(255,255,255,0.12);
      color:var(--color-text);
      padding:.16rem .56rem;
    }

    [hidden]{
      display:none !important;
    }

    .home-notices-panel{
      background:var(--surface-3);
      border:1px solid var(--border-30);
      border-radius: var(--radius-lg);
      padding: .85rem;
      display:flex;
      flex-direction:column;
      gap: .75rem;
      min-height: 0;
      height: 100%;
    }
    .home-notices-panel[data-mode="list"] #homeNoticesDetail{
      display:none !important;
    }
    .home-notices-panel[data-mode="detail"] #homeNoticesListing{
      display:none !important;
    }
    .home-notices-panel[data-mode="detail"] #homeNoticesBack{
      display:inline-flex !important;
    }
    .home-notices-panel[data-mode="list"] #homeNoticesBack{
      display:none !important;
    }
    .home-notices-panel[data-mode="detail"] #homeNoticesSearchWrap{
      display:none !important;
    }
    .home-notices-panel[data-mode="detail"] #homeNoticesNav{
      display:none !important;
    }
    body.dark-mode .home-notices-panel,
    body[data-theme="dark"] .home-notices-panel{
      background:var(--surface-92);
      border-color:var(--inverse-10);
    }
    .home-notices-header{
      display:flex;
      align-items:center;
      gap: .65rem;
      flex-wrap:wrap;
      justify-content:space-between;
    }
    .home-notices-title{
      font-weight:800;
      font-size: 1.05rem;
    }
    .home-notices-listing,
    .home-notices-detail{
      flex:1;
      min-height: 0;
    }
    .home-notices-search{
      display:flex;
      align-items:center;
      gap: .4rem;
      padding: .2rem .25rem .28rem .12rem;
      border-radius: 0.75rem;
      background:transparent;
      border:none;
      border-bottom:1px solid rgba(0,0,0,0.15);
      color:var(--text-soft);
      flex:1 1 180px;
      max-width: 15rem;
      transition:border-color var(--transition-fast);
    }
    body.dark-mode .home-notices-search,
    body[data-theme="dark"] .home-notices-search{
      border-bottom-color:rgba(255,255,255,0.26);
    }
    .home-notices-search:focus-within{
      border-bottom-color:rgba(0,0,0,0.4);
    }
    body.dark-mode .home-notices-search:focus-within,
    body[data-theme="dark"] .home-notices-search:focus-within{
      border-bottom-color:rgba(255,255,255,0.55);
    }
    .home-notices-search input{
      border:none;
      outline:none;
      box-shadow:none;
      appearance:none;
      -webkit-appearance:none;
      background:transparent;
      color:inherit;
      width: 100%;
      font-size: .9rem;
      font-family:inherit;
      padding-left:0;
    }
    .home-search-icon{
      width: 0.875rem;
      height: 0.875rem;
      border-radius: 50%;
      border:2px solid var(--text-soft);
      position:relative;
      display:inline-block;
      flex:0 0 auto;
    }
    .home-search-icon::after{
      content:"";
      position:absolute;
      width: 0.438rem;
      height: 2px;
      background:var(--text-soft);
      right: -0.25rem;
      bottom: -2px;
      transform:rotate(45deg);
      border-radius: 2px;
    }
    .home-notices-nav{
      display:flex;
      align-items:center;
      gap: .35rem;
    }
    .home-notices-range{
      font-size: .85rem;
      color:var(--text-soft);
    }
    .home-notices-btn{
      width: 1.75rem;
      height: 1.75rem;
      border-radius: var(--radius-pill);
      border:1px solid var(--border-30);
      background:var(--surface-5);
      font-size: 1rem;
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      transition:filter var(--transition-fast);
    }
    body.dark-mode .home-notices-btn,
    body[data-theme="dark"] .home-notices-btn{
      border-color:rgba(255,255,255,0.3);
      background:rgba(255,255,255,0.08);
      color:var(--color-text);
    }
    .home-notices-btn:disabled{
      opacity:.45;
      cursor:not-allowed;
    }
    .home-notices-btn:hover:not(:disabled){ filter:brightness(0.98); }
    body.dark-mode .home-notices-btn:hover:not(:disabled),
    body[data-theme="dark"] .home-notices-btn:hover:not(:disabled){
      filter:none;
      background:rgba(255,255,255,0.15);
      border-color:rgba(255,255,255,0.42);
    }
    body.dark-mode .home-notices-btn:focus-visible,
    body[data-theme="dark"] .home-notices-btn:focus-visible{
      outline:2px solid rgba(255,255,255,0.45);
      outline-offset:1px;
    }
    .home-notices-content{
      flex:1;
      min-height: 0;
      display:flex;
      flex-direction:column;
    }
    .home-notices-list{
      display:flex;
      flex-direction:column;
      gap: .45rem;
      overflow-y:auto;
      padding-right:.2rem;
    }
    .home-notices-empty{
      color:var(--text-soft);
      font-size: .9rem;
      padding: .6rem 0;
    }
    .home-notice-skeleton{
      height:3.4rem;
      border-radius:.9rem;
      background:linear-gradient(90deg, #edf0f3 20%, #f8fafc 45%, #edf0f3 70%);
      background-size:200% 100%;
      animation:skeletonPulse 1.1s ease infinite;
      border:1px solid var(--border-18);
    }
    .home-notice-item{
      display:grid;
      grid-template-columns:minmax(0,1fr) auto;
      gap: .6rem;
      padding: .6rem .7rem;
      border-radius: var(--radius-md);
      border:1px solid var(--border-18);
      background:var(--glass-faint);
      text-align:left;
      cursor:pointer;
      transition:border-color var(--transition-fast);
      font-family:inherit;
      color:var(--text);
    }
    .home-notice-item:hover{ border-color:var(--border-40); }
    .home-notice-title-row{
      display:flex;
      align-items:center;
      gap: .4rem;
      margin-bottom:.2rem;
    }
    .home-notice-preview{
      color:var(--text-soft);
      font-size: .85rem;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .home-notice-meta{
      font-size: .82rem;
      color:var(--text-soft);
      display:flex;
      align-items:flex-start;
      justify-content:flex-end;
      min-width: 3.75rem;
    }
    .notice-pin{
      width: 0.75rem;
      height: 0.75rem;
      border-radius: 50% 50% 50% 0;
      border:2px solid var(--text-soft);
      transform:rotate(-45deg);
      position:relative;
      flex:0 0 auto;
    }
    .notice-pin::after{
      content:"";
      position:absolute;
      width: 2px;
      height: 0.375rem;
      background:var(--text-soft);
      left: 0.25rem;
      top: 0.438rem;
      border-radius: 2px;
    }

    .home-notices-detail{
      display:flex;
      flex-direction:column;
      gap: .75rem;
      min-height: 0;
    }
    .home-notices-back{
      align-self:flex-start;
      border:none;
      background:none;
      color:var(--text);
      font-weight:700;
      cursor:pointer;
      padding: 0;
      font-size: .95rem;
      display:inline-flex;
      align-items:center;
    }
    .home-notices-detail-body{
      flex:1;
      overflow-y:auto;
      padding-right:.25rem;
    }
    .home-notices-detail-title{
      font-size: 1.2rem;
      font-weight:800;
      margin-bottom:.25rem;
    }
    .home-notices-detail-date{
      color:var(--text-soft);
      font-size: .9rem;
      margin-bottom:.75rem;
    }
    .home-notices-detail-text{
      color:var(--text);
      line-height: 1.5;
      white-space:pre-line;
    }

    .tab-estudio-layout{
      display:grid;
      grid-template-columns: minmax(19rem,1.45fr) minmax(0,2.55fr);
      gap: 1rem;
      position: relative;
      z-index: 0;
      align-items:start;
    }
    .study-main-column{
      width: 100%;
    }
    .study-main-column,
    .study-side-column{
      display:flex;
      flex-direction:column;
      gap:1rem;
      min-width:0;
    }
    .study-timer-card{
      display:flex;
      flex-direction:column;
      gap:.9rem;
      padding:1.25rem;
      border-radius: 1.125rem;
      background: color-mix(in srgb, var(--surface) 62%, var(--card) 38%);
      border:1px solid color-mix(in srgb, var(--border) 74%, transparent);
      box-shadow: 0 0.375rem 1.25rem rgba(15, 23, 42, 0.06);
      transition: box-shadow .25s ease, border-color .25s ease, background-color .25s ease;
      height: auto;
    }
    .study-timer-card.running{
      box-shadow: 0 .55rem 1.35rem rgba(59, 130, 246, 0.16);
      border-color: color-mix(in srgb, var(--primary) 35%, var(--border));
    }
    .study-timer-status{
      display:inline-flex;
      width: fit-content;
      align-items:center;
      gap:.35rem;
      padding:.28rem .7rem;
      border-radius:999px;
      font-size:.85rem;
      font-weight:600;
      color:var(--text-soft);
      background:var(--surface);
      border:1px solid var(--border);
    }
    .study-timer-status::before{
      content:"•";
      font-size:1rem;
      line-height:1;
    }
    .study-timer-status[data-state="running"]{ color:var(--ui-success); border-color:var(--ui-success); }
    .study-timer-status[data-state="paused"]{ color:var(--ui-warn); border-color:var(--ui-warn); }
    .study-timer-status[data-state="finished"]{ color:var(--info); border-color:var(--info-40); }
    .timer-header-dashboard{
      flex-direction:column;
      align-items:center;
      gap:1rem;
    }
    .timer-display-dashboard{
      font-size: clamp(2.45rem, 6vw, 3.45rem);
      font-family: inherit;
      font-weight: 700;
      font-variant-numeric: tabular-nums;
      letter-spacing: .16rem;
      color: var(--primary);
      text-align:center;
      line-height: 1;
      transition: color .25s ease, text-shadow .25s ease, transform .25s ease;
      animation: timer-display-pop .3s ease;
    }
    .timer-display-dashboard.running{
      text-shadow: 0 0 1.125rem color-mix(in srgb, var(--primary) 25%, transparent);
      transform: translateY(-1px);
    }
    .timer-display-dashboard.paused{
      color: var(--text-soft);
      text-shadow: none;
    }
    .timer-controls-dashboard{
      justify-content:center;
      width:100%;
      gap:.75rem;
    }
    .timer-controls-dashboard .icon-btn{
      width:2.75rem;
      height:2.75rem;
      border-radius:50%;
      border:1px solid color-mix(in srgb, var(--border) 76%, transparent);
      background: var(--surface);
      box-shadow: 0 .25rem .75rem rgba(15,23,42,.08);
      transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease, color .2s ease, border-color .2s ease;
    }
    .timer-controls-dashboard .icon-btn:hover{
      transform: translateY(-2px);
      box-shadow: 0 .5rem .95rem rgba(15,23,42,.15);
      background: color-mix(in srgb, var(--surface) 55%, var(--card));
    }
    #studyTimerStart{
      background: var(--primary);
      color: var(--text);
      border-color: color-mix(in srgb, var(--primary) 65%, transparent);
      box-shadow: 0 .35rem .85rem color-mix(in srgb, var(--primary) 32%, transparent);
    }
    #studyTimerStart:hover{
      background: color-mix(in srgb, var(--primary) 88%, #fff);
      color:#fff;
    }
    @keyframes timer-display-pop{
      from{ opacity:.85; transform: scale(.985); }
      to{ opacity:1; transform: scale(1); }
    }
    .timer-actions-dashboard{
      justify-content:center;
    }
    .study-calendar-compact{
      padding-top: 4.2rem;
    }
    .study-calendar-compact #calendarGrid{ margin-top: .5rem; }

    .streak-overlay{
      position:absolute;
      top:12px;
      left:12px;
      z-index:5;
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:8px 10px;
      border:1px solid #e5e7eb;
      border-radius:14px;
      backdrop-filter:blur(6px);
      box-shadow:0 6px 18px rgba(0,0,0,.06);
      pointer-events:auto;
      left: 29rem;
    }
    .streak-overlay__label{
      color:var(--text-soft);
      font-size:.8rem;
      font-weight:700;
      letter-spacing:.01em;
      white-space:nowrap;
    }
    .streak-overlay__value{
      color:var(--text);
      font-size:.9rem;
      font-weight:700;
      white-space:nowrap;
    }

    body.dark-mode .streak-overlay,
    body[data-theme="dark"] .streak-overlay{
      background:color-mix(in srgb, #0b1220 82%, transparent);
      border-color:color-mix(in srgb, #cbd5e1 32%, transparent);
      box-shadow:0 10px 24px rgba(0,0,0,.42);
    }
    body.dark-mode .streak-overlay__label,
    body[data-theme="dark"] .streak-overlay__label{
      color:rgba(248,250,252,.9);
    }
    body.dark-mode .streak-overlay__value,
    body[data-theme="dark"] .streak-overlay__value{
      color:#fff;
    }
    body.dark-mode .streak-overlay i,
    body.dark-mode .streak-overlay svg,
    body[data-theme="dark"] .streak-overlay i,
    body[data-theme="dark"] .streak-overlay svg{
      color:#f8fafc;
      fill:currentColor;
      opacity:.95;
    }

    .streak-tiles,
    .streak-strip,
    #streakBar{
      display:none !important;
    }

    .study-stats-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:.85rem;
    }
    .study-stat-card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:.85rem .9rem;
      display:flex;
      flex-direction:column;
      gap:.35rem;
      justify-content: space-between;
      flex-direction: column;
      align-items: center;
    }

    
.study-stat-card-clickable{
  cursor:pointer;
  transition: border-color .2s ease, box-shadow .2s ease;
}
.study-stat-card-clickable:hover,
.study-stat-card-clickable:focus-visible{
  border-color:var(--info-45);
  box-shadow:0 0 0 2px color-mix(in srgb, var(--info-45) 28%, transparent);
}

.study-stat-label{ color:var(--text-soft); font-size:.84rem; font-weight:600; }
    .study-stat-value{ color:var(--text); font-size:1.15rem; font-weight:700; }

    @media(max-width:900px){
      .tab-estudio-layout{ grid-template-columns:1fr; }
      .study-stats-grid{ grid-template-columns:1fr; }
      .study-recent-logs-list{ max-height:15.5rem; }
      .study-calendar-compact{
        padding-top: 4rem;
      }
      .streak-overlay{
        top:43px;
        left:8px;
        gap:8px;
        padding:6px 8px;
      }
      .streak-overlay__label,
      .streak-overlay__value{
        font-size:.78rem;
      }
    }

    .calendar-container{
      background:var(--card);
      border-radius: var(--radius);
      padding: 1rem;
      border:1px solid var(--border);
      box-shadow:none;
      position: relative;
      z-index: 2;
    }
    .calendar-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:1.5rem;
      gap: .6rem;
      flex-wrap:wrap;
    }
    .cal-left{
      display:flex; align-items:center; gap:.5rem; flex-wrap:wrap;
    }
    .cal-right{
      display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; justify-content:flex-end;
    }
    #monthTitle, #acadMonthTitle{ font-size:1.25rem; font-weight:700; letter-spacing:.12px; line-height:1.2; }
    .cal-nav-btn{
      padding: .4rem .75rem;
      border-radius: 62.438rem;
      background:transparent;
      color:var(--text);
      border:1px solid transparent;
      font-size: .86rem;
      box-shadow:none;
    }
    .cal-nav-btn:hover{ background:var(--primary-soft); color:var(--primary); }

    .grid{ display:grid; 
      grid-template-columns:repeat(7,minmax(0,1fr)); gap:10px;
      width: 100%;
      min-width: 0;
      position: relative;
      z-index: 2;
      pointer-events: auto;
    }
    .grid > *{ min-width:0; }
    .dow{
      font-size: .78rem;
      color:var(--color-muted);
      line-height:1.2;
      letter-spacing:.015em;
      text-align:center;
      padding: .25rem 0;
    }

    /* ===== ESTUDIO (fijo y simple) ===== */
    .day{
      min-height: 6.875rem;
      background:var(--card);
      border-radius: var(--radius-sm);
      padding: 0.625rem;
      cursor:pointer;
      font-size: .9rem;
      position:relative;
      border:1px solid var(--border);
      min-width: 0;
      max-width: 100%;
      overflow:hidden;
      z-index: 3;
      pointer-events: auto;
    }
    #calendarGrid .day > *{ pointer-events:none; }

    .study-detail-panel{
      position: relative;
      z-index: 1;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:.9rem;
      display:flex;
      flex-direction:column;
      gap:.75rem;
      height: 13.56rem;
    }

    .study-recent-logs-panel{
      grid-column: 1 / -1;
      width: 100%;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:.9rem;
      display:flex;
      flex-direction:column;
      gap:.75rem;
      min-height: 0;
      max-height: 16.5rem;
      overflow: hidden;
    }
    .study-recent-logs-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:.65rem;
    }
    .study-recent-logs-title{
      margin:0;
      font-size:1.01rem;
      font-weight:700;
      color:var(--text);
    }
    .study-recent-logs-subtitle{
      margin:.15rem 0 0;
      font-size:.82rem;
      color:var(--text-soft);
    }
    .study-recent-logs-body{
      flex: 1 1 auto;
      min-height: 0;
      overflow: hidden;
    }
    .study-recent-logs-list{
      display:flex;
      flex-direction:column;
      gap:.55rem;
      min-height: 0;
      height: 100%;
      max-height: 100%;
      overflow-y:auto;
      padding-right:.2rem;
    }
    .study-recent-log-item{
      border:1px solid var(--border);
      border-radius:var(--radius-sm);
      padding:.6rem .68rem;
      display:flex;
      justify-content:space-between;
      gap:.65rem;
      background:var(--surface);
      transition: border-color .2s ease, background-color .2s ease;
    }
    .study-recent-log-item:hover{
      border-color:var(--info-45);
      background:color-mix(in srgb, var(--card) 72%, var(--surface) 28%);
    }
    .study-recent-log-main{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:.15rem;
    }
    .study-recent-log-row{
      display:flex;
      justify-content:space-between;
      gap:.55rem;
      font-size:.85rem;
      color:var(--text);
    }
    .study-recent-log-meta{
      color:var(--text-soft);
      font-size:.77rem;
    }
    .study-recent-log-topic{
      font-size:.79rem;
      color:var(--text-soft);
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .day:hover{ border-color:var(--info-45); }
    .day-number{
      display:flex;
      align-items:center;
      justify-content:space-between;
      color:var(--text);
      font-weight:600;
      letter-spacing:.01em;
      line-height:1.2;
      gap: .45rem;
      min-width: 0;
    }
    .day-number span{ min-width:0; }
    .today-dot{
      width: 0.5rem; height:0.5rem; border-radius:50%;
      opacity:0;
      transition:opacity .2s ease;
    }
    .day.is-today .today-dot{ opacity:1; }
    .day-muted{
      background:var(--border-50);
      border:1px dashed var(--border);
      cursor:default;
    }
    .day-muted .day-number,
    .day-muted .day-number span,
    .day-muted .today-dot,
    .day-muted .event-dots,
    .day-muted .event-dot{
      opacity:.5;
    }
body.light-mode .calendar-container,
body[data-theme="light"] .calendar-container{
  background:var(--card);
  border-color: var(--border);
  box-shadow:none;
}
body.light-mode .day,
body[data-theme="light"] .day{
  background:var(--card);
}
body.light-mode .day-muted,
body[data-theme="light"] .day-muted{
  background:var(--border-50);
}
body.dark-mode .day-muted,
body[data-theme="dark"] .day-muted{
  background:color-mix(in srgb, var(--card) 70%, transparent);
  border-color:color-mix(in srgb, var(--border) 45%, transparent);
}
body.dark-mode .day-muted .day-number,
body.dark-mode .day-muted .day-number span,
body.dark-mode .day-muted .today-dot,
body.dark-mode .day-muted .event-dots,
body.dark-mode .day-muted .event-dot,
body[data-theme="dark"] .day-muted .day-number,
body[data-theme="dark"] .day-muted .day-number span,
body[data-theme="dark"] .day-muted .today-dot,
body[data-theme="dark"] .day-muted .event-dots,
body[data-theme="dark"] .day-muted .event-dot{
  opacity:.3;
}
body.light-mode .event,
body[data-theme="light"] .event{
  background:var(--primary-soft);
  border-color: var(--info-35);
  color:var(--text);
  box-shadow:none;
}

    /* ESTADÍSTICAS */
    .stats-card{
      background:var(--card);
      border-radius: var(--radius);
      padding: .9rem;
      border:1px solid var(--border);
      box-shadow:none;
    }
    .stats-title{ font-weight:600; letter-spacing:.01em; margin-bottom:.4rem; }
    .stats-item{ color:var(--text); margin-bottom:.3rem; }

    /* MODAL ESTUDIO */
    .modal-bg{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,.35);
      backdrop-filter: blur(3px);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:1200;
      padding: 1.5rem;
    }
    .modal{
      background: var(--color-surface-3);
      border-radius: 1.125rem;
      padding: 1.25rem 1.35rem;
      min-width: 20rem;
      max-width: 40rem;
      width: 100%;
      border:1px solid var(--border-70);
      box-shadow:0 18px 45px rgba(15,23,42,.12);
      display:flex;
      flex-direction:column;
      gap: 1rem;
    }
    .modal h3{ margin:0; font-weight:700; line-height:1.25; letter-spacing:-0.01em; }
    .modal-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: .75rem;
    }
    .modal-close{
      border:none;
      background:var(--color-surface-3);
      color:var(--text);
      width: 2.25rem;
      height: 2.25rem;
      border-radius: 50%;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      font-size: 1.1rem;
    }
    .modal-body{
      display:flex;
      flex-direction:column;
      gap: .85rem;
    }
    .modal-field label{
      display:block;
      font-size: .85rem;
      color:var(--muted);
      font-weight:500;
      line-height:1.3;
      letter-spacing:.02em;
      margin-bottom:.35rem;
    }
    .modal-field-hint{
      margin-top:.35rem;
      font-size:.78rem;
      line-height:1.35;
      color:var(--muted);
      letter-spacing:.01em;
    }
    .modal input, .modal textarea, .modal select{
      width: 100%;
      padding: .7rem .85rem;
      border-radius: 0.75rem;
      border:1px solid var(--input-border);
      background:var(--input-bg);
      color:var(--color-text);
      box-shadow:none;
      font-size: .95rem;
      box-sizing:border-box;
    }
    .modal textarea{ min-height:90px; resize:vertical; }
    .modal select,
    .subject-form-box select,
    .prof-filters select,
    #tab-perfil.profile-page .profile-field select{
      appearance:none;
      -webkit-appearance:none;
      -moz-appearance:none;
      background-image:
        linear-gradient(45deg, transparent 50%, currentColor 50%),
        linear-gradient(135deg, currentColor 50%, transparent 50%);
      background-position:
        calc(100% - 16px) calc(50% - 2px),
        calc(100% - 10px) calc(50% - 2px);
      background-size:6px 6px, 6px 6px;
      background-repeat:no-repeat;
      padding-right:2.1rem;
      caret-color:var(--color-text);
      color:var(--color-text);
    }
    .modal select option,
    .subject-form-box select option,
    .prof-filters select option,
    #tab-perfil.profile-page .profile-field select option{
      background:var(--card-bg);
      color:var(--color-text);
    }
    .modal select option:checked,
    .subject-form-box select option:checked,
    .prof-filters select option:checked,
    #tab-perfil.profile-page .profile-field select option:checked{
      background:var(--card-bg);
      color:var(--color-text);
    }
    /* Select option */
    #subjectNameSelect optgroup {
  background-color: var(--card-bg);
  color: var(--text-primary);
  }
  #studyTimerMateria option{
    background-color: var(--card-bg);
    color: var(--text-primary);
  }

   /* Select option */
    .modal select:disabled,
    .subject-form-box select:disabled,
    .prof-filters select:disabled,
    #tab-perfil.profile-page .profile-field select:disabled{
      opacity:.6;
      cursor:not-allowed;
    }
    .modal-inline-row{
      display:grid;
      grid-template-columns:repeat(2, minmax(0,1fr));
      gap: .75rem;
    }
    .modal-section-title{
      font-weight:700;
      margin-bottom:.35rem;
      color:var(--text);
      font-size: .9rem;
    }
    .modal-footer{
      position:sticky;
      bottom: 0;
      display:flex;
      justify-content:flex-end;
      gap: .6rem;
      flex-wrap:wrap;
      padding-top:.5rem;
      background:inherit;
    }
    .btn-large{
      padding: .7rem 1.25rem;
      font-size: .95rem;
      border-radius: 0.75rem;
    }
    .pill-group{
      display:flex;
      flex-wrap:wrap;
      gap: .5rem;
    }
    .pill-btn{
      border:1px solid var(--border-60);
      background:var(--input-bg);
      color:var(--muted);
      padding: .35rem .9rem;
      border-radius: 62.438rem;
      font-size: .85rem;
      cursor:pointer;
      transition:all .15s ease;
    }
    .pill-btn.is-active{
      background:var(--primary-soft);
      border-color:var(--info-45);
      color:var(--primary);
      font-weight:600;
    }
    .sr-only{
      position:absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;
      border:0;
    }
    .pwd-wrap{ position:relative; }
    .pwd-toggle{
      position:absolute;
      right: 0.625rem; top:50%;
      transform:translateY(-50%);
      padding: .3rem .45rem;
      font-size: .85rem;
      border-radius: var(--radius-sm);
    }
    .modal-help{
      max-width: 45rem;
      background:var(--surface-98);
      border:1px solid var(--accent-38);
      box-shadow:none;
    }
    .help-modal-body{
      background:var(--color-surface-3);
      border:1px solid var(--border-50);
      border-radius: var(--radius-md);
      padding: .75rem .85rem;
      line-height: 1.45;
      color:var(--color-text);
      box-shadow:none;
    }
    .help-section-title{
      font-weight:800;
      margin-bottom:.35rem;
      color:var(--color-text);
    }
    .help-list{
      margin: 0;
      padding-left:1.1rem;
      color:var(--text-soft);
    }
    .help-list li{ margin-bottom:.25rem; }
    .help-modal-actions{
      display:flex;
      justify-content:flex-end;
      gap: .5rem;
      margin-top:.8rem;
    }

    /* TAB ACADEMICO */
    .acad-layout{
      display:grid;
      grid-template-columns:minmax(0,70%) minmax(280px,30%);
      gap: 1.5rem;
    }
    @media(max-width:980px){ .acad-layout{ grid-template-columns:1fr; } .acad-widgets{ position:static; } }
    .acad-shell,
    .acad-detail,
    .acad-widgets,
    .planner-box{
      background:var(--card);
      border-radius: var(--radius);
      border:1px solid var(--border);
      padding: 1rem;
      box-shadow:none;
      margin-bottom: 12px;
    }
    .acad-widgets{
      padding: 1rem;
    }
    .acad-help{
      font-size: .9rem;
      color:var(--muted);
      line-height: 1.35;
      margin-bottom:.55rem;
    }
    .acad-widgets{
      width: auto;
      position:sticky;
      top:1rem;
      align-self:start;
    }
    .acad-shell .day{
      min-height: 6.875rem;
      display:flex;
      flex-direction:column;
      min-width: 0;
      max-width: 100%;
      overflow:hidden;
    }
    .acad-day-list{
      display:flex;
      flex-direction:column;
      gap: .4rem;
      margin-top:.4rem;
      flex:1;
      overflow-y:auto;
      overflow-x:hidden;
      padding-right:.15rem;
      max-width: 100%;
      min-width: 0;
    }
    .acad-day-item{
      display:grid;
      grid-template-columns:auto 1fr auto;
      gap: .6rem;
      align-items:center;
      padding: .55rem .65rem;
      border-radius: var(--radius-md);
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
      box-shadow:none;
      cursor:pointer;
      min-width: 0;
      max-width: 100%;
      overflow:hidden;
    }
    .acad-day-item:hover{ border-color:var(--accent-50); }
    .acad-item-left{
      display:flex;
      align-items:center;
      gap: .35rem;
      flex-wrap:wrap;
      min-width: 0;
      max-width: 100%;
      overflow:hidden;
    }
    .acad-item-title{
      font-weight:700;
      font-size: .95rem;
      max-width: 100%;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .acad-item-meta{
      color:var(--muted);
      font-size: .82rem;
      max-width: 100%;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .acad-item-right{
      font-size: .85rem;
      color:var(--muted);
    }
    .acad-detail-top{
      display:flex;
      justify-content:space-between;
      gap: .6rem;
      align-items:flex-start;
      flex-wrap:wrap;
      margin-bottom:.4rem;
    }
    .acad-detail-title{
      font-weight:800;
      letter-spacing: .1px;
    }
    .acad-detail-sub{
      color:var(--muted);
      font-size: .86rem;
    }
    .acad-detail-list{
      display:flex;
      flex-direction:column;
      gap: .45rem;
    }
    .acad-detail-row{
      display:flex;
      justify-content:space-between;
      gap: .55rem;
      align-items:flex-start;
      padding: .7rem .8rem;
      border-radius: var(--radius-sm);
      background:var(--card);
      border:1px solid var(--border);
      box-shadow:none;
    }
    .acad-detail-text{
      min-width: 0;
    }
    .acad-detail-text strong{
      display:block;
      font-size: .9rem;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .acad-detail-meta{
      font-size: .82rem;
      color:var(--muted);
      margin-top:.15rem;
      line-height: 1.25;
      max-width: 100%;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .acad-detail-notes{
      margin-top:.35rem;
      font-size: .84rem;
      color:var(--muted);
      line-height: 1.25;
      max-width: 100%;
      overflow:hidden;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      white-space:pre-wrap;
    }

    .activity-item{
      display:flex;
      align-items:flex-start;
      gap:.6rem;
    }
    .activity-check,
    .record-check {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, .15);
      background: var(--cardBg, var(--card, #fff));
      color: transparent;
      cursor: pointer;
      transition: background-color .2s ease, border-color .2s ease, color .2s ease;
      flex: 0 0 18px;
      margin-top: .2rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    .activity-check::after,
    .record-check::after {
      content: "✓";
      font-size: 15px;
      line-height: 1;
      font-weight: 700;
      color: transparent;
      transform: translateY(-0.5px);
    }
    .activity-check.completed,
    .activity-check.is-checked,
    .record-check.completed,
    .record-check.is-checked {
      border-color: rgba(28, 160, 90, .45);
      background: rgba(28, 160, 90, .08);
    }
    .activity-check.completed::after,
    .activity-check.is-checked::after,
    .record-check.completed::after,
    .record-check.is-checked::after {
      color: rgba(28, 160, 90, .95);
    }
    .activity-item.completed {
      opacity: 0.6;
    }
    .activity-item.completed .activity-content {
      text-decoration: line-through;
    }
    .acad-detail-actions{
      display:flex;
      gap: .35rem;
      flex-wrap:wrap;
      justify-content:flex-end;
      flex:0 0 auto;
    }
    .acad-info-panel{
      display:flex;
      gap: .8rem;
      min-height: auto;
      flex-direction:column;
    }
    .acad-info-empty{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding: 1.5rem 1rem;
      border-radius: var(--radius);
      background:var(--primary-soft);
      border:1px dashed var(--info-25);
      min-height: 11.25rem;
      max-height: 13.75rem;
      min-width: 100%;
      gap: .6rem;
    }
    .acad-empty-logo img{
      width: 6rem;
      height: auto;
      filter:none;
    }
    .acad-empty-title{
      font-weight:800;
      color:var(--text);
    }
    .acad-empty-sub{
      color:var(--muted);
      font-size: .9rem;
    }
    .acad-next-row{
      font-size: .88rem;
      color:var(--color-text);
      margin-bottom:.25rem;
    }
    .acad-detail-empty{
      color:var(--text-soft);
      font-size: .9rem;
      padding: .35rem 0;
    }
    .acad-day-modal-top{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap: .75rem;
      margin-bottom:.75rem;
      flex-wrap:wrap;
    }
    .acad-day-modal-actions{
      display:flex;
      justify-content:flex-end;
      margin-top:.8rem;
    }
    .acad-record-detail{
      margin-top:.75rem;
      padding: .75rem;
      border-radius: var(--radius-md);
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
      color:var(--color-text);
      font-size: .9rem;
      line-height: 1.35;
    }
    .day.is-selected{
      background:var(--info-06);
    }
    .badge-soft{
      display:inline-flex;
      align-items:center;
      padding: .12rem .55rem;
      border-radius: var(--radius-pill);
      border:1px solid var(--border);
      background:var(--primary-soft);
      font-size: .75rem;
      color:var(--muted);
    }

    /* AGENDA SEMANAL */
    .agenda-header-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:1rem;
      margin-bottom:1rem;
      flex-wrap:wrap;
    }
    .agenda-title{
      flex:1;
      min-width:220px;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .agenda-title h3{
      margin:0;
      font-size:1.05rem;
    }
    .agenda-presets-inline{
      display:flex;
      gap:.6rem;
      align-items:center;
      min-width:0;
    }
    .agenda-actions{
      display:flex;
      gap:.6rem;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .agenda-shell{
      grid-column: 1 / -1;
      /* esto controla el fondo del calendario  background:var(--surface-94);*/
      border-radius: var(--radius-lg);
      /*border:1px solid var(--border-85); */
      padding: .5rem;
      overflow:visible !important;
      box-shadow:none;
      height:auto !important;
      max-height:none !important;
    }

    #tab-agenda{
      overflow:visible !important;
      height: 60.327rem;

    }

    .main-shell{
      overflow:visible !important;
    }
    .agenda-grid{
      display:grid;
      grid-template-columns:70px repeat(6,1fr);
      font-size: .8rem;
      position:relative;
    }
    .agenda-hour-spacer{
      height: var(--agenda-header-h);
      border-bottom: 1px solid var(--border-85);
    }
    .agenda-hour-col{ display:flex; flex-direction:column; }
    .agenda-hour{
      height: var(--agenda-hour-h);
      border-bottom: 1px dashed var(--border-85);
      padding-right: .3rem;
      text-align: right;
      color: var(--text-soft);
      display: flex;

      align-items: flex-start;
      justify-content: flex-end;
      padding-top: 6px;
      padding-bottom: 0;
    }
    .agenda-hour-end{
      height: 0;
      border-bottom: none;
      padding-top: 6px;
      padding-bottom: 0;
    }
    .agenda-day-col{ border-left:1px solid var(--border-85); position:relative; }
    .agenda-day-header{
      /*position: sticky; */
      top: 0;
      background: var(--surface-98);
      text-align: center;
      font-weight: 700;
      letter-spacing: 0.01em;
      border-bottom: 1px solid var(--border-85);
      z-index: 3;

      height: var(--agenda-header-h);
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .agenda-day-inner{ position:relative; }
    .agenda-line{
      position:absolute;
      left: 0; right:0;
      height: 1px;
      background:var(--primary-22);
      opacity:.7;
    }
    .class-block{
      position:absolute;
      left: 0.25rem; right:0.25rem;
      border-radius: 0.5rem;
      padding: 0.375rem 0.5rem;
      /* color:var(--color-text); */
      color:black;

      
      font-size: .75rem;
      box-shadow:0 4px 10px color-mix(in srgb, var(--materia-color, var(--accent)) 16%, transparent);
      border:none;
      border-left:6px solid var(--materia-color, var(--accent));
      cursor:pointer;
      overflow:hidden;
      background-color:color-mix(in srgb, var(--materia-color, var(--accent)) 18%, white);
      font-weight:600;
    }
    .class-block strong{
      display:block;
      font-size: .8rem;
      line-height: 1.2;
      letter-spacing: .01em;
      color:var(--text);
    }
    .class-block small{
      display:block;
      font-size: .72rem;
      opacity:.9;
      color:color-mix(in srgb, var(--text) 82%, var(--muted));
    }

.calendar-event[data-color="0"],
.planner-card[data-color="0"]{ --accent: var(--subj-1); }
.calendar-event[data-color="1"],
.planner-card[data-color="1"]{ --accent: var(--subj-2); }
.calendar-event[data-color="2"],
.planner-card[data-color="2"]{ --accent: var(--subj-3); }
.calendar-event[data-color="3"],
.planner-card[data-color="3"]{ --accent: var(--subj-4); }
.calendar-event[data-color="4"],
.planner-card[data-color="4"]{ --accent: var(--subj-5); }
.calendar-event[data-color="5"],
.planner-card[data-color="5"]{ --accent: var(--subj-6); }
.calendar-event[data-color="6"],
.planner-card[data-color="6"]{ --accent: var(--subj-7); }

.calendar-event{
  border-left:6px solid var(--accent);
  background-color:color-mix(in srgb, var(--accent) 18%, var(--color-surface-33));
  box-shadow:0 4px 10px color-mix(in srgb, var(--accent) 16%, transparent);
  color:var(--text);
}
    /* TAB MATERIAS */
    .subjects-layout{
      display:grid;
      grid-template-columns:minmax(0,1.4fr) minmax(0,1fr);
      gap: 1rem;
    }
    @media(max-width:820px){ .subjects-layout{ grid-template-columns:1fr; } }
    .subjects-list-box, .subject-form-box{
      background:var(--surface-94);
      border-radius: var(--radius-md);
      border:1px solid var(--border-85);
      padding: 1rem;
      box-shadow:none;
      position:relative;
      overflow:hidden;
    }
    .subjects-list-box::before, .subject-form-box::before{
      content:"";
      position:absolute;
      inset:0 0 auto 0;
      height: 0.25rem;
      background:var(--accent-605);
      opacity:.6;
      pointer-events:none;
    }
    .subjects-list-header, .subject-form-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: .6rem;
      margin-bottom:.75rem;
    }
    .subjects-list{
      display:flex;
      flex-direction:column;
      gap: .5rem;
      margin-top:.2rem;
    }
    .subjects-empty-msg{
      font-size: .85rem;
      color:var(--color-muted-2);
      background:var(--color-surface-3);
      border-radius: var(--radius-sm);
      border:1px dashed var(--border-85);
      padding: .65rem .7rem;
      margin-top:.6rem;
    }
    .subject-row{
      display:flex;
      align-items:center;
      gap: .6rem;
      background:var(--color-surface-3);
      border-radius: var(--radius-md);
      border:1px solid var(--border-85);
      padding: .6rem .75rem;
      box-shadow:none;
      transition:transform .15s ease, border-color .15s ease;
    }
    .subject-row:hover{
      transform:translateY(-1px);
      border-color:var(--accent-50);
      box-shadow:none;
    }
    .subject-color-dot{
      width: 1.125rem; height:1.125rem; border-radius:50%;
      border:1px solid var(--primary-90);
    }
    .subject-name{ flex:1; font-size:.92rem; font-weight:600; }
    .subject-actions{ display:flex; gap:.35rem; }
    .subject-form-field{
      display:flex;
      flex-direction:column;
      gap: .35rem;
      margin-bottom:.7rem;
    }
    #tab-planestudios{
      overflow: hidden;
    }
    .plan-frame{
      width: 100%;
     height: 100%;
      border: 0;

    }
    .subject-form-field label{
      font-size: .82rem;
      color:var(--color-muted-2);
      font-weight:600;
    }
    .subject-form-box select,
    .subject-form-box input[type="text"]{
      padding: .75rem 1rem;
      border-radius: 62.438rem;
      border:1px solid var(--input-border);
      background:var(--input-bg);
      color:var(--color-text);
      font-size: .95rem;
      transition:border-color .2s ease, transform .2s ease;
    }
    .subject-form-box select:focus,
    .subject-form-box input[type="text"]:focus{
      border-color:var(--accent-80);
      outline:2px solid var(--accent-20);
      outline-offset:1px;
      box-shadow:none;
      transform:translateY(-1px);
    }
    .subject-color-row{
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      gap: .55rem;
      position:relative;
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
      border-radius: var(--radius-md);
      padding: .7rem .8rem;
      box-shadow:none;
    }
    .subject-color-palette{
      display:flex;
      gap: .5rem;
      flex-wrap:wrap;
    }
    .subject-color-swatch{
      width: 2.125rem;
      height: 2.125rem;
      border-radius: 50%;
      border:2px solid transparent;
      background:var(--color-surface-3);
      cursor:pointer;
      box-shadow:none;
      transition:transform .15s ease, border-color .15s ease;
    }
    .subject-color-swatch[data-color]{
      background:var(--swatch-color, transparent);
    }
    .subject-color-swatch:hover{
      transform:translateY(-1px) scale(1.03);
      box-shadow:none;
      border-color:var(--accent-45);
    }
    .subject-color-swatch.is-selected{
      border-color:var(--accent-90);
      outline:2px solid var(--accent-25);
      outline-offset:2px;
      box-shadow:none;
    }
    .subject-color-swatch--custom{
      background:var(--accent-1);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    .subject-color-swatch__custom{
      width: 60%;
      height: 60%;
      border-radius: 50%;
      border:2px solid var(--inverse-90);
      box-shadow:none;
      background:var(--surface-3);
    }
    .subject-color-input{
      position:absolute;
      opacity:0;
      pointer-events:none;
      width: 1px;
      height: 1px;
    }
    .subject-color-manual{
      display:flex;
  
      gap: .35rem;
      margin-top:.2rem;
    }
    .subject-color-text{
      border-radius: 62.438rem;
    }
    .subject-color-text.is-invalid{
      border-color:var(--danger-70);
      outline:2px solid var(--danger-18);
      outline-offset:1px;
      box-shadow:none;
    }
    .subject-color-text.is-valid{
      border-color:var(--ok-60);
      outline:2px solid var(--ok-18);
      outline-offset:1px;
      box-shadow:none;
    }
    .subject-color-hint{
      font-size: .78rem;
      color:var(--color-muted-2);
    }
    .subject-form-actions{
      margin-top:.2rem;
      display:flex;
      gap: .5rem;
      justify-content:flex-end;
    }
    .subject-form-note{
      margin-top:.75rem;
      font-size: .8rem;
      color:var(--color-muted-2);
      background:var(--accent-08);
      border-radius: var(--radius-sm);
      padding: .55rem .65rem;
      border:1px solid var(--accent-20);
    }

    /* TAB PERFIL */
    .profile-layout{
      display:grid;
      grid-template-columns:minmax(0,1.2fr) minmax(0,1fr);
      gap: 1rem;
    }
    @media(max-width:980px){ .profile-layout{ grid-template-columns:1fr; } }
    .profile-card{
      background:var(--surface-94);
      border-radius: var(--radius-lg);
      border:1px solid var(--border-85);
      padding: 1rem;
      box-shadow:none;
    }
    .profile-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: .6rem;
      margin-bottom:.8rem;
    }
    .profile-email{
      font-size: .85rem;
      color:var(--color-muted-2);
      padding: .35rem .6rem;
      border-radius: var(--radius-sm);
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
    }
    .profile-avatar{
      display:flex;
      align-items:center;
      gap: 1rem;
      flex-wrap:wrap;
      margin-bottom:1rem;
    }
    .profile-avatar img{
      width: 18.125rem;
      height: 18.125rem;
      border-radius: 50%;
      object-fit:cover;
      border:2px solid var(--border-60);
      background:var(--color-surface-3);
    }
    .profile-avatar-actions{
      display:flex;
      flex-direction:column;
      gap: .5rem;
      flex:1;
      min-width: 13.75rem;
    }
    .profile-avatar-input{
      display:inline-flex;
      align-items:center;
      gap: .4rem;
      padding: .45rem .75rem;
      border-radius: var(--radius-sm);
      border:1px dashed var(--border-60);
      background:var(--color-surface-3);
      color:var(--color-muted-2);
      font-size: .85rem;
      cursor:pointer;
      width: fit-content;
    }
    .profile-avatar-input input{
      display:none;
    }
    .profile-avatar-buttons{
      display:flex;
      gap: .5rem;
      flex-wrap:wrap;
    }
    .profile-avatar-status{
      font-size: .82rem;
      color:var(--color-muted-2);
    }
    .profile-grid{
      display:grid;
      grid-template-columns:repeat(2, minmax(0,1fr));
      gap: .75rem;
    }
    @media(max-width:650px){ .profile-grid{ grid-template-columns:1fr; } }
    .profile-field{
      display:flex;
      flex-direction:column;
      gap: .35rem;
    }
    .profile-field-wide{ grid-column:1 / -1; }
    .profile-field label{
      font-size: .82rem;
      color:var(--color-muted-2);
      font-weight:600;
    }
    .profile-actions{
      margin-top:.9rem;
      display:flex;
      align-items:center;
      gap: .75rem;
      flex-wrap:wrap;
    }
    .profile-status{
      font-size: .85rem;
      color:var(--color-muted-2);
    }
    /* TAB PLANIFICADOR */
    .planner-layout{
      display:grid;
      grid-template-columns:minmax(280px, 380px) minmax(0, 1fr);
      gap: 1rem;
      margin-bottom:12px;
    }
    @media(max-width:980px){ .planner-layout{ grid-template-columns:1fr; } }
    .planner-panel-left,
    .planner-panel-right{
      min-height: 0;
    }
    .planner-bottom-section{
      grid-column:1 / -1;
      margin-top: 1.5rem;
    }
    .planner-head-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: .55rem;
      flex-wrap:wrap;
    }
    .planner-toolbar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: .6rem;
      flex-wrap:wrap;
    }
    .planner-toolbar-left{
      display:flex;
      align-items:center;
      gap: .5rem;
    }
    .planner-toolbar-right{
      display:flex;
      align-items:center;
      gap: .5rem;
      flex-wrap:wrap;
    }
    .planner-list{
      display:grid;
      flex-direction:column;
      gap:.7rem;
      margin-top:.65rem;
      max-height:calc(85vh - 23rem);
      min-height:12rem;
      overflow:auto;
      padding-right:.2rem;
      grid-template-columns: repeat(3, 1fr);

    }
    #plannerModalBg .planner-list{
      flex:1;
      overflow-y:auto;
      max-height:none;
      padding-right:.5rem;
      margin-bottom:.5rem;
      grid-template-columns:1fr;
      align-content:start;
    }
    .planner-filters-row{
      display:grid;
      gap:.6rem;
      align-items:center;
      margin: .65rem 0 1rem;
    }
    .planner-filters-row select{
      flex:1;
    }
    .planner-filters-row input{
      flex:1.2;
      min-width:0;
      padding:.5rem .75rem;
      border-radius:10px;
      border:1px solid var(--border-soft, var(--border-85));
      background:var(--surface-soft, var(--surface-95));
      color:var(--color-text);
    }
    .planner-filters-row input:focus{
      outline:none;
      border-color:var(--primary, var(--accent-805));
      box-shadow:0 0 0 3px rgba(0, 0, 0, 0.05);
    }
    @media (max-width:880px){
      .planner-filters-row{
        flex-direction:column;
        align-items:stretch;
      }
      .planner-filters-row select,
      .planner-filters-row input{
        width:100%;
      }
    }
    .preset-actions-row .btn-small{
      flex:1 1 auto;
      min-width: 6.25rem;
    }
    .hidden{
      display:none; 
    }
    .section-card{
      background:#ffffff;
      border-radius:14px;
      border:1px solid #d9e2ec;
      box-shadow:0 5px 14px rgba(15,23,42,.07);
      padding:.75rem .9rem;
      width: 25rem;
    }
    .planner-card{
      border-left:6px solid var(--accent, #d9e2ec);
    }
    .subject-pill{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:1.1rem;
      height:1.1rem;
      border-radius:999px;
      margin-right:.45rem;
      background: color-mix(in srgb, var(--accent, var(--muted)) 15%, transparent);
      border: 1px solid color-mix(in srgb, var(--accent, var(--muted)) 35%, transparent);
      color: var(--accent, var(--muted));
      font-size:.74rem;
      line-height:1;
      vertical-align:middle;
    }
    .planner-card-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:.5rem;
    }
    .planner-card-title{
      font-size:.95rem;
      font-weight:600;
      margin:0;
      display:flex;
      align-items:center;
    }
    .section-card-layout{
      display:grid;
      grid-template-columns:minmax(0, 1fr) auto;
      gap:1rem;
      align-items:center;
    }
    .section-academic-info{ min-width:0; }
    .section-title{
      font-weight:900;
      font-size:1.08rem;
      letter-spacing:.01em;
      text-transform:uppercase;
      color:#15253d;
    }
    .section-sub{
      color:#2c3e57;
      font-size:.9rem;
      margin-top:.2rem;
    }
    .section-schedule-wrap{
      margin-top:.4rem;
      overflow-x:auto;
    }
    .planner-card table{
      margin-top:.4rem;
    }
    .section-schedule-table{
      width:100%;
      border-collapse:collapse;
      font-size:.88rem;
      color:#1f3047;
    }
    .section-schedule-table th,
    .section-schedule-table td{
      padding:.38rem .55rem;
      border-bottom:1px solid #e5eaf1;
      border-right:1px solid #edf1f6;
      text-align:left;
      white-space:nowrap;
    }
    .section-schedule-table th:last-child,
    .section-schedule-table td:last-child{ border-right:none; }
    .section-schedule-table thead th{
      font-weight:800;
      color:#16283d;
      background:#f8fafc;
    }
    .section-schedule-table tbody tr:last-child td{ border-bottom:none; }
    .section-schedule-empty{
      color:#617084;
      font-style:italic;
    }
    .section-actions{
      display:flex;
      gap:.4rem;
      justify-content:flex-end;
      align-items:center;
    }
    .planner-remove-btn{
      background:transparent;
      border:1px solid var(--color-border);
      padding:.25rem .6rem;
      border-radius:8px;
      font-size:.75rem;
      cursor:pointer;
      transition:all .2s ease;
    }
    .planner-remove-btn:hover{
      background:#ffeaea;
      border-color:#e53935;
      color:#e53935;
    }
    .section-days{
      display:flex;
      gap: .35rem;
      flex-wrap:wrap;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      padding: .2rem .55rem;
      border-radius: var(--radius-pill);
      background:var(--glass-soft);
      color:var(--color-text);
      font-size: .8rem;
      border:1px solid var(--border-18);
    }
    .pill-muted{
      color:var(--text-soft);
      border-color:var(--border-10);
      background:var(--primary-22);
    }
    .preset-item{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap: .5rem;
      padding: .55rem .6rem;
      border-radius: var(--radius-md);
      background:var(--color-surface-3);
      border:1px solid var(--border-85);
      margin-bottom:.4rem;
      box-shadow:none;
    }
    .preset-item.active{
      border-color:var(--accent-60);
      box-shadow:none;
    }
    .preset-name{
      font-weight:800;
    }
    .preset-meta{
      color:var(--text-soft);
      font-size: .82rem;
      margin-top:.1rem;
    }
    .preset-row{
      display:flex;
      gap: .4rem;
      flex-wrap:wrap;
    }
    .input-mini{
      padding: .48rem .65rem;
      border-radius: var(--radius-md);
      border:1px solid var(--border-85);
      background:var(--color-surface-1);
      color:var(--color-text);
      box-shadow:none;
      font-size: .9rem;
    }
    .input-mini:focus{
      outline:none;
      border-color:var(--accent-80);
      box-shadow:0 0 0 3px color-mix(in srgb, var(--accent-60) 30%, transparent);
    }
    .badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: .25rem .6rem;
      border-radius: var(--radius-sm);
      background:var(--accent-15);
      border:1px solid var(--accent-40);
      color:var(--color-text);
      font-weight:800;
      font-size: .8rem;
    }

/* ===== PROFESORES ===== */
.prof-directory-header{
  display:grid;
  grid-template-columns:minmax(260px, 1fr) minmax(280px, auto) minmax(190px, auto);
  align-items:end;
  gap:1rem;
}
.prof-directory-header h2{ margin:0; }
.prof-filters{ display:flex; gap:.6rem; flex-wrap:wrap; justify-self:end; }
.prof-search-input{
  border:1px solid var(--input-border);
  border-radius:.75rem;
  background:var(--input-bg);
  color:var(--color-text);
  min-width:14rem;
}
#profAdvancedFiltersBtn{
  min-height:2.45rem;
}

.prof-search-input{
  display:flex;
  align-items:center;
  gap:.45rem;
  padding:0 .7rem;
}
.prof-search-input input{
  border:0;
  outline:none;
  background:transparent;
  color:inherit;
  width:100%;
  padding:.6rem 0;
}
.prof-search-input > span{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  background:transparent !important;
  border:none !important;
  box-shadow:none !important;
  padding:0;
  line-height:1;
}

.prof-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(280px, 1fr));
  gap:.9rem;
  margin-top: 1rem;
}
.prof-card{
  display:grid;
  grid-template-columns:72px 1fr auto;
  gap:.8rem;
  border:1px solid var(--border-35);
  border-radius:var(--radius-lg);
  background:var(--surface-94);
  padding:.9rem;
  min-height:190px;
  height:100%;
  align-items:start;
}
.prof-photo{
  width:72px;
  height:72px;
  border-radius:1rem;
  object-fit:cover;
  background:var(--glass-faint);
}
.prof-card-content{ display:flex; flex-direction:column; gap:.3rem; min-width:0; }
.prof-card-name{ font-weight:800; font-size:1.05rem; line-height:1.25; }
.prof-card-rating{ font-weight:700; }
.prof-card-metrics{ color:var(--text-soft); font-size:.9rem; }
.prof-subjects{ display:flex; flex-wrap:wrap; gap:.35rem; margin-top:.2rem; }
.prof-subject-chip{
  background:color-mix(in srgb, var(--color-accent) 18%, var(--surface-94));
  border:1px solid color-mix(in srgb, var(--color-accent) 42%, var(--border-35));
  border-radius:999px;
  padding:.25rem .6rem;
  font-size:.78rem;
  font-weight:700;
  letter-spacing:.01em;
  color:var(--text-main);
}
.prof-card-action{ align-self:end; }

.prof-pagination{ display:flex; justify-content:center; align-items:center; gap:.8rem; margin: .65rem 0 0; }
#profTopPagination{ justify-self:center; }
#profTopPagination button{ min-width:2.3rem; }

.prof-detail-layout{ display:grid; grid-template-columns:minmax(290px, 360px) 1fr; gap:.85rem; align-items:start; }
.prof-detail-main,
.prof-detail-reviews{
  border:1px solid var(--border-35);
  border-radius:var(--radius-lg);
  background:var(--surface-94);
  padding:1rem;
  box-shadow:var(--shadow-card);
}
.prof-detail-reviews{
  display:flex;
  flex-direction:column;
  min-height:0;
  overflow:visible;
}
.prof-reviews-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:.75rem;
}
.prof-reviews-header h3{ margin:0; }
.prof-score-summary{
  display:flex;
  align-items:flex-end;
  gap:.3rem;
}
.prof-score-big{ font-size:3rem; font-weight:800; line-height:1; }
.prof-score-max{ font-size:1.6rem; color:var(--text-soft); line-height:1.2; }
.prof-score-underline{
  width:92px;
  height:5px;
  border-radius:999px;
  background:var(--color-text);
  margin:.4rem 0 .45rem;
}
.prof-reviews-count{ color:var(--color-text); font-size:1.05rem; font-weight:700; }
.prof-distribution-title{ margin:.9rem 0 .25rem; }
.prof-distribution-row{ display:grid; grid-template-columns:30px 1fr auto; gap:.45rem; align-items:center; margin-top:.3rem; }
.prof-distribution-bar{ height:8px; border-radius:99px; background:var(--glass-faint); overflow:hidden; }
.prof-distribution-bar > span{ display:block; height:100%; background:var(--color-accent); }
.prof-metric-list{ display:grid; gap:.55rem; margin:.85rem 0; padding:.1rem 0 .2rem; border-top:1px solid var(--border-25); border-bottom:1px solid var(--border-25); }
.prof-metric-item{ display:flex; align-items:flex-start; gap:.6rem; font-size:.92rem; }
.prof-metric-icon{ width:1.3rem; display:inline-flex; justify-content:center; opacity:.82; }
.prof-metric-copy{ display:grid; gap:.08rem; }
.prof-metric-copy span{ color:var(--text-soft); }
.prof-metric-copy strong{ font-size:.95rem; }
.prof-review-scroll{ flex:1; min-height:0; max-height:calc(100vh - 330px); overflow:auto; padding-right:.2rem; margin-top:.55rem; }
.prof-review-item{ border:1px solid var(--border-25); border-radius:var(--radius-md); padding:.75rem .8rem; margin-top:.55rem; background:var(--surface-98); box-shadow:0 5px 14px rgba(0,0,0,.06); }
.prof-review-head{ display:flex; justify-content:space-between; gap:.5rem; align-items:flex-start; }
.prof-review-head span{ color:var(--text-soft); font-size:.84rem; white-space:nowrap; }
.prof-review-comment{ margin:.4rem 0 0; color:var(--color-text); }

.prof-modal{ position:fixed; inset:0; z-index:1400; display:grid; place-items:center; padding:1rem; }
.prof-modal.hidden{ display:none !important; }
.prof-modal.hidden .prof-modal-backdrop{ display:none !important; }
.prof-modal-backdrop{ position:absolute; inset:0; background:rgba(8,12,24,.48); backdrop-filter:blur(10px); }
.prof-modal-content{
  position:relative;
  width:min(620px, calc(100vw - 2rem));
  max-height:calc(100vh - 2rem);
  overflow:auto;
  background:var(--surface-94);
  border:1px solid var(--border-35);
  border-radius:var(--radius-lg);
  padding:1rem;
  z-index:1;
}
.prof-modal-header{ display:flex; justify-content:space-between; align-items:center; gap:.5rem; }
.btn-icon{ border:0; background:transparent; color:var(--color-text); font-size:1rem; cursor:pointer; }
.prof-modal-professor{ font-weight:700; margin-bottom:.6rem; }
.prof-rating-group{ margin:.65rem 0; }
.prof-rating-group strong{ display:block; margin-bottom:.3rem; }
.star-picker{ display:flex; gap:.35rem; }
.star-btn{ border:0; background:transparent; color:var(--color-primary-soft); cursor:pointer; font-size:1.7rem; line-height:1; }
.star-btn.active{ color:var(--color-accent); }
.prof-modal-label{ display:block; margin-top:.55rem; }
.prof-modal-content textarea{
  width:100%;
  min-height:120px;
  border:1px solid var(--border-35);
  background:var(--input-bg);
  color:var(--color-text);
  border-radius:var(--radius-sm);
  padding:.65rem;
  resize:vertical;
}
.prof-rate-check{ display:flex; gap:.4rem; align-items:center; margin-top:.5rem; }
.prof-modal-actions{ display:flex; justify-content:flex-end; gap:.5rem; margin-top:.75rem; }

.prof-primary-btn{
  border-radius:999px;
  min-width:8.2rem;
  font-weight:700;
  margin-top:.95rem;
  width:100%;
}

.prof-comment-modal-content{
  width:min(640px, calc(100vw - 2rem));
}
.prof-comment-count{
  text-align:right;
  margin-top:.45rem;
}

.prof-comment-hint{
  margin-top:.45rem;
  font-size:.88rem;
  color:var(--text-soft);
}
.prof-comment-hint button{
  border:0;
  background:transparent;
  color:var(--color-accent);
  text-decoration:underline;
  cursor:pointer;
  font-weight:600;
  padding:0;
}
.prof-dark-btn{
  background:#111;
  color:#fff;
  border:1px solid #111;
  box-shadow:var(--shadow-btn);
  font-weight:700;
}
.prof-dark-btn:hover{
  filter:brightness(1.08);
}
.prof-dark-btn:active{
  filter:brightness(.92);
}
#openProfRatingModal{
  background:#111;
  color:#fff;
  border:1px solid #111;
}
#openProfRatingModal:hover{ filter:brightness(1.08); }
#openProfRatingModal:active{ filter:brightness(.92); }
#btnSubmitComment{
  border:1px solid var(--btn-primary-border);
  background:var(--btn-primary-bg);
  color:var(--btn-primary-text);
}
#btnSubmitComment:hover:not(:disabled){
  background:var(--btn-primary-hover-bg);
}
#btnSubmitComment:disabled{
  opacity:.55;
  cursor:not-allowed;
}

.prof-filters-modal-content{
  width:min(520px, calc(100vw - 2rem));
}
.prof-filter-field{
  display:grid;
  gap:.4rem;
  margin-top:.8rem;
}
.prof-filter-field label{
  font-weight:700;
}
.prof-filter-field select{
  border:1px solid var(--input-border);
  border-radius:.75rem;
  background:var(--input-bg);
  color:var(--color-text);
  padding:.65rem .75rem;
}

body.dark-mode #profAdvancedFiltersModal .prof-modal-content,
body[data-theme="dark"] #profAdvancedFiltersModal .prof-modal-content{
  color-scheme:dark;
}
body.dark-mode #profAdvancedFiltersModal .prof-filter-field select,
body[data-theme="dark"] #profAdvancedFiltersModal .prof-filter-field select{
  color-scheme:dark;
  background:var(--card-bg);
  color:var(--color-text);
  border:1px solid var(--color-border);
}
body.dark-mode #profAdvancedFiltersModal .prof-filter-field select:hover,
body[data-theme="dark"] #profAdvancedFiltersModal .prof-filter-field select:hover{
  border-color:color-mix(in srgb, var(--color-border) 50%, #fff 50%);
}
body.dark-mode #profAdvancedFiltersModal .prof-filter-field select:focus-visible,
body[data-theme="dark"] #profAdvancedFiltersModal .prof-filter-field select:focus-visible{
  outline:2px solid color-mix(in srgb, var(--color-accent) 45%, #fff 55%);
  outline-offset:2px;
}
body.dark-mode #profAdvancedFiltersModal .prof-filter-field select option,
body.dark-mode #profAdvancedFiltersModal .prof-filter-field select optgroup,
body[data-theme="dark"] #profAdvancedFiltersModal .prof-filter-field select option,
body[data-theme="dark"] #profAdvancedFiltersModal .prof-filter-field select optgroup{
  background:#151a20;
  color:#f5f7fa;
}
body.dark-mode .prof-subject-chip,
body[data-theme="dark"] .prof-subject-chip{
  background:color-mix(in srgb, var(--color-accent) 22%, #121821);
  border-color:color-mix(in srgb, var(--color-accent) 45%, #6f7f95);
  color:#f5f7fa;
}

@media(max-width:920px){
  .prof-directory-header{ grid-template-columns:1fr; }
  .prof-filters{ justify-self:stretch; }
  #profTopPagination{ justify-self:start; }
  .prof-detail-layout{ grid-template-columns:1fr; }
}

.muted{ color:var(--text-soft); font-size:.9rem; }

/* ==== plan de estudio ==== */

/* ===== MENSAJES ===== */
.messenger-dock{
  position:fixed;
  right: 0.75rem;
  top: 6rem;
  bottom: 0.75rem;
  max-width: 30rem;
  width: min(30rem, 95vw);
  z-index:50;
}
.messenger-panel{
  height: 100%;
  background:var(--surface-94);
  border:1px solid var(--border-35);
  border-radius: var(--radius-2xl);
  box-shadow:none;
  padding: .85rem;
  display:flex;
  flex-direction:column;
  gap: .75rem;
  backdrop-filter: blur(10px);
  transition:transform .2s ease, opacity .2s ease;
}
.messenger-dock.collapsed .messenger-panel{
  transform:translateX(110%);
  opacity:.25;
  pointer-events:none;
}
.messenger-toggle{
  position:absolute;
  left: -3rem;
  top: 1rem;
  width: 2.625rem;
  height: 2.625rem;
  border-radius: var(--radius-md);
  border:1px solid var(--border-28);
  background:var(--accent-18);
  color:var(--color-text);
  cursor:pointer;
  box-shadow:var(--shadow-btn);
}
.messenger-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: .6rem;
  flex-wrap:wrap;
}
.messenger-title{
  display:flex;
  gap: .6rem;
  align-items:center;
}
.messenger-actions{ display:flex; gap:.4rem; }
.messenger-icon{
  width: 2.625rem;
  height: 2.625rem;
  border-radius: 0.875rem;
  background:var(--accent-16);
  border:1px solid var(--accent-40);
  display:grid;
  place-items:center;
  font-size: 1.1rem;
}
.messenger-heading{ font-weight:800; font-size:1rem; }
.messenger-sub{ color:var(--color-muted); font-size:.88rem; }
.messenger-grid{
  display:grid;
  grid-template-columns: 1fr 1.15fr;
  gap: .75rem;
  height: 100%;
}
@media(max-width:1200px){
  .messenger-grid{ grid-template-columns:1fr; height:auto; }
}
.messenger-left, .messenger-right{
  display:flex;
  flex-direction:column;
  gap: .75rem;
}
.card-block, .chat-card{
  background:var(--surface-94);
  border:1px solid var(--border-30);
  border-radius: 0.875rem;
  padding: .85rem;
  box-shadow:none;
}
.block-title{
  font-weight:700;
  margin-bottom:.35rem;
  letter-spacing: .1px;
}
.friend-form{
  display:flex;
  gap: .5rem;
  margin-top:.35rem;
  flex-wrap:wrap;
}
.friend-form input{
  flex:1;
  min-width: 12.5rem;
  padding: .55rem .7rem;
  border-radius: 0.625rem;
  border:1px solid var(--border-50);
  background:var(--color-surface-3);
  color:var(--color-text);
}
.requests-box, .friends-box, .messages-box{
  display:flex;
  flex-direction:column;
  gap: .6rem;
}
.requests-group, .friends-group{ margin-top:.4rem; }
.friends-sections{
  display:flex;
  flex-direction:column;
  gap: .5rem;
}
.requests-group:not(:first-child){
  padding-top:.45rem;
  border-top:1px dashed var(--border-20);
}
.requests-header, .friends-header{
  font-size: .86rem;
  color:var(--text-soft);
  margin-bottom:.35rem;
  letter-spacing: .05rem;
}
.friend-requests-modal .request-card{
  display:block;
  align-items:center;
  gap:.7rem;
  border:1px solid var(--border-18);
  padding:.62rem .72rem;
  border-radius:.9rem;
  background:var(--glass-faint);
  transition:background .16s ease, transform .16s ease;
}
.friend-requests-modal .request-card:hover{
  background:var(--surface-94);
  transform:translateY(-1px);
}
.friend-requests-modal .req-main{
  display:flex;
  align-items:center;
  gap:.6rem;
  min-width:0;
  flex:1;
}
.friend-requests-modal .req-main .friend-avatar,
.friend-requests-modal .req-main .friend-avatar-fallback{
  width:2.3rem;
  height:2.3rem;
}
.friend-requests-modal .req-main .friend-avatar-fallback{
  border-radius:50%;
  border:1px solid var(--border-45);
  background:var(--accent-20);
  color:var(--accent-95);
  font-weight:800;
  display:grid;
  place-items:center;
}
.friend-requests-modal .req-user{
  min-width:0;
  flex:1;
}
.friend-requests-modal .req-email{
  font-weight:700;
  line-height:1.2;
}
.friend-requests-modal .req-meta{
  color:var(--text-soft);
  font-size:.8rem;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.friend-requests-modal .req-actions{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:.4rem;
  flex-wrap:wrap;
}
.friend-requests-modal .request-empty{
  color:var(--text-soft);
  font-size:.88rem;
  padding:.5rem .1rem;
}
.friend-requests-modal .request-empty--skeleton{
  min-height:2.1rem;
  border-radius:10px;
  background:linear-gradient(90deg,rgba(148,163,184,.16) 25%,rgba(148,163,184,.32) 50%,rgba(148,163,184,.16) 75%);
  background-size:200% 100%;
  animation:skeletonPulse 1.1s ease infinite;
}
.friend-requests-modal .request-state-pill,
.friend-requests-modal .btn-request,
.friend-requests-modal .btn-request-soft{
  border-radius:999px;
  font-size:.78rem;
  font-weight:700;
  padding:.36rem .78rem;
  border:1px solid transparent;
  white-space:nowrap;
}
.friend-requests-modal .btn-request,
.friend-requests-modal .btn-request-soft{
  cursor:pointer;
}
.friend-requests-modal .request-state-pill{
  background:#eef1f4;
  color:#6b7480;
  border-color:#dbe0e7;
}
.friend-requests-modal .btn-request{
  background:#dff6e8;
  color:#1c6c45;
  border-color:#b7e6ca;
}
.friend-requests-modal .btn-request-soft{
  background:var(--surface-96);
  color:var(--text-soft);
  border-color:var(--border-30);
}
.friend-requests-modal .btn-request:hover,
.friend-requests-modal .btn-request-soft:hover,
.friend-requests-close:hover{
  filter:brightness(1.03);
}
.friends-box .muted, .requests-box .muted, .messages-box .muted{
  color:var(--text-soft);
  font-size: .9rem;
}
.friend-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border:1px solid var(--border-18);
  padding: .55rem .7rem;
  border-radius: 0.75rem;
  background:var(--glass-faint);
  transition:border-color .12s ease;
}
.friend-main{
  display:flex;
  align-items:center;
  gap: .6rem;
}
.friend-avatar{
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  object-fit:cover;
  border:1px solid var(--border-45);
  background:var(--color-surface-3);
}
.friend-row.friend-online{
 /* border-color:var(--ok-5); */
  box-shadow:none;
}
.friend-name{ font-weight:700; }
.friend-meta{ color:var(--text-soft); font-size:.85rem; display:flex; gap:.45rem; align-items:center; }
.status-dot{
  width: 0.625rem;
  height: 0.625rem;
  border-radius: 62.438rem;
  background:var(--border-80);
  box-shadow:none;
}
.status-dot.online{
  background:var(--color-ok);
  box-shadow:none;
}
.chat-card{ flex:1; display:flex; flex-direction:column; gap:.65rem; }
.chat-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: .6rem;
  flex-wrap:wrap;
}
.chat-title{
  font-weight:800;
  font-size: 1.05rem;
}
.chat-subtitle{ color:var(--text-soft); font-size:.9rem; }
.toggle-line{
  display:inline-flex;
  align-items:center;
  gap: .4rem;
  color:var(--text-soft);
  font-size: .9rem;
}
/* CSS DEL TAMAÑO DE LA BANDEJA DE MSJ*/
.messages-box{
 /* min-height:260px;
  max-height: 26.25rem; */
  height: 60rem;
  overflow:auto;
  border:1px solid var(--border-30);
  border-radius: 0.875rem;
  padding: .75rem;
  background:var(--color-surface-3);
  box-shadow:none;
}
.msg-row{
  display:flex;
  margin-bottom:.5rem;
}
.msg-row.me{ justify-content:flex-end; }
.msg-bubble{
  max-width: 80%;
  padding: .55rem .65rem;
  border-radius: 0.875rem;
  background:var(--accent-18);
  border:1px solid var(--border-20);
  box-shadow:none;
}
.msg-row.other .msg-bubble{
  background:var(--border-12);
}
.msg-text{ white-space:pre-wrap; }
.msg-meta{ color:var(--text-soft); font-size:.78rem; margin-top:.25rem; }
.chat-input-row{
  display:flex;
  gap: .5rem;
  margin-top:auto;
}
.chat-input-row input{
  flex:1;
  padding: .65rem .75rem;
  border-radius: 0.75rem;
  border:1px solid var(--border-50);
  background:var(--color-surface-3);
  color:var(--color-text);
}
/* START Mensajería Styles */
.mensajeria-container{
  display:grid;
  grid-template-columns:minmax(280px, 360px) minmax(0, 1fr);
  gap: 1rem;
  align-items:start;
}

.sidebar-mensajes,
.panel-chat{
  display:flex;
  flex-direction:column;
  gap: .85rem;
}

.panel-chat{
  position:relative;
}

.add-amigo-form input{
  min-width: 0;
}

.requests-block .block-title,
.friends-title-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: .45rem;
  flex-wrap:wrap;
}

.friend-list{
  display:flex;
  flex-direction:column;
  gap: .55rem;
}

.friend-list-note{
  margin-bottom:.45rem;
}

.friend-item,
.friend-row{
  display:grid;
  grid-template-columns:minmax(0, 1fr) auto;
  gap: .6rem;
  align-items:center;
}

.friend-main{
  min-width: 0;
}

.friend-status{
  display:inline-flex;
  align-items:center;
  gap: .4rem;
}

.friend-status::before{
  content:"";
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 50%;
  background:var(--border-80);
}

.friend-item.online .friend-status::before,
.friend-row.friend-online .friend-status::before{
  background:var(--color-ok);
}

.friend-actions,
.req-actions{
  display:flex;
  align-items:center;
  gap: .4rem;
}

.panel-chat .chat-card{
  min-height: 33.75rem;
}

body.modal-open{
  overflow:hidden;
}

.btn-send-request{
  border-radius:999px;
  padding:.5rem 1rem;
  font-weight:700;
  background:var(--surface-96);
  box-shadow:0 8px 18px rgba(15, 23, 42, .08);
}

.friend-search-overlay{
  position:fixed;
  inset:0;
  background:rgba(10, 16, 22, .34);
  backdrop-filter:blur(4px);
  -webkit-backdrop-filter:blur(4px);
  z-index:120;
  display:grid;
  place-items:center;
  padding:1.25rem;
  animation:fadeIn .2s ease;
}

.friend-search-overlay.hidden{
  display:none;
}

.friend-search-modal{
  width:min(37.5rem, 92vw);
  max-height:70vh;
  background:var(--surface-94);
  border:1px solid var(--border-40);
  border-radius:1.3rem;
  box-shadow:0 20px 50px rgba(15, 23, 42, .16);
  display:flex;
  flex-direction:column;
  padding:1rem;
  gap:.75rem;
  overflow:hidden;
  animation:slideFadeUp .18s ease;
}

.friend-search-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.75rem;
  padding-bottom:.65rem;
  border-bottom:1px solid var(--border-25);
}

.friend-search-header h3{ margin:0; }

#closeFriendSearch{
  border:1px solid var(--border-35);
  background:var(--surface-96);
  width:2rem;
  height:2rem;
  border-radius:50%;
  cursor:pointer;
}

.friend-search-field{
  position:relative;
  display:flex;
  align-items:center;
}

.friend-search-icon{
  position:absolute;
  left:.72rem;
  color:var(--text-soft);
  font-size:.86rem;
}

#friendSearchInput{
  width:100%;
  padding:.75rem 2rem .75rem 2rem;
  border-radius:999px;
  border:1px solid var(--border-45);
  background:var(--color-surface-3);
  color:var(--color-text);
}

.friend-search-clear{
  position:absolute;
  right:.55rem;
  width:1.5rem;
  height:1.5rem;
  border-radius:50%;
  border:0;
  background:var(--border-20);
  color:var(--color-text);
  cursor:pointer;
}

.friend-search-helper{
  font-size:.78rem;
  color:var(--text-soft);
}

.friend-search-error{
  border:1px solid #f2b8b8;
  background:#fff1f1;
  color:#a23a3a;
  border-radius:.6rem;
  font-size:.82rem;
  padding:.45rem .6rem;
}

.friend-search-results{
  display:flex;
  flex-direction:column;
  gap:.55rem;
  overflow:auto;
  padding-right:.2rem;
}

.friend-search-item{
  display:flex;
  align-items:center;
  gap:.75rem;
  border:1px solid var(--border-18);
  padding:.6rem .7rem;
  border-radius:.9rem;
  background:var(--glass-faint);
  transition:background .16s ease, transform .16s ease;
}

.friend-search-item:hover{ background:var(--surface-94); transform:translateY(-1px); }

.friend-search-avatar{
  width:2.5rem;
  height:2.5rem;
  border-radius:50%;
  background:var(--accent-20);
  color:var(--accent-95);
  display:grid;
  place-items:center;
  font-weight:800;
  flex:0 0 auto;
}

.friend-search-item .friend-search-user{ min-width:0; flex:1; }
.friend-search-item .friend-search-name{ font-weight:700; }
.friend-search-item .friend-search-email{ color:var(--text-soft); font-size:.85rem; }

.friend-search-pill{ border-radius:999px; padding:.4rem .8rem; font-weight:700; }
.friend-search-pill.invite{ background:#dff6e8; color:#1c6c45; border:1px solid #b7e6ca; }
.friend-search-pill.pending{ background:#eef1f4; color:#6b7480; border:1px solid #dbe0e7; }

.friend-search-state.friend{ color:#7b848f; font-size:.86rem; font-weight:600; }

.friend-search-empty{
  min-height:14rem;
  display:grid;
  place-items:center;
  text-align:center;
  color:var(--text-soft);
  gap:.35rem;
}

.friend-search-empty-icon{ font-size:1.6rem; opacity:.7; }
.friend-search-empty-title{ font-weight:600; }

.friend-search-skeleton-row{
  height:3.4rem;
  border-radius:.9rem;
  background:linear-gradient(90deg, #edf0f3 20%, #f8fafc 45%, #edf0f3 70%);
  background-size:200% 100%;
  animation:skeletonPulse 1.1s ease infinite;
}

.chat-placeholder{
  min-height: 13.75rem;
  display:grid;
  place-items:center;
  text-align:center;
  color:var(--text-soft);
  border:1px dashed var(--border-30);
  border-radius: 0.75rem;
  background:var(--surface-94);
  padding: 1rem;
}

@media (max-width: 1080px){
  .mensajeria-container{
    grid-template-columns:1fr;
  }

  .panel-chat .chat-card{
    min-height: 27.5rem;
  }
}
/* END Mensajería Styles */
/* =========================================================
   Mensajería encapsulada + botón de header
   ========================================================= */
.header-msg-btn{
  width: 2.625rem;
  height: 2.625rem;
  padding: 0;
  border-radius: 62.438rem;
  border:1px solid var(--border-85);
  background:var(--surface-94);
  color:var(--color-text);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.header-msg-btn svg{
  width: 1.25rem;
  height: 1.25rem;
}
.header-msg-btn:hover{
  border-color:var(--accent-805);
}

#tab-mensajes{
  position:relative;
  z-index:2;
  min-height: calc(100vh - 14.375rem);
}

#tab-mensajes .mensajeria-layout{
  display:grid;
  grid-template-columns:minmax(300px, 380px) minmax(0, 1fr);
  gap: 1rem;
  align-items:stretch;
  min-height: calc(100vh - 16.25rem);
  height: 58rem;
}

#tab-mensajes .mensajeria-sidebar,
#tab-mensajes .mensajeria-chat{
  min-width: 0;
  display:flex;
  flex-direction:column;
  gap: .85rem;
}

#tab-mensajes .mensajeria-card{
  overflow:hidden;
}

#tab-mensajes .mensajeria-chat-card{
  flex:1;
  min-height: 35rem;
  display:flex;
  flex-direction:column;
}

#tab-mensajes .messages-box{
  flex:1;
  min-height: 17.5rem;
  max-height: none;
  height: auto;
  overflow:auto;
}

#tab-mensajes .chat-input-row{
  margin-top:.65rem;
}

@media (max-width: 1080px){
  #tab-mensajes .mensajeria-layout{
    grid-template-columns:1fr;
    min-height: auto;
  }

  #tab-mensajes .mensajeria-chat-card{
    min-height: 28.75rem;
  }
}

/* =========================================================
   PERFIL · LAVADO VISUAL (aislado)
   Scope: #tab-perfil.profile-page
   ========================================================= */
#tab-perfil.profile-page{
  background:var(--card);
  border-radius: 1.5rem;
  padding: 1rem;
}

#tab-perfil.profile-page .profile-page-shell{
  width: min(100%, 61.25rem);
  margin: 0 auto;
  display:grid;
  gap: 1rem;
}

#tab-perfil.profile-page .profile-card{
  background:var(--card-bg);
  border:1px solid var(--card-border);
  border-radius: 1.375rem;
  box-shadow:var(--shadow-soft);
  padding: 1.25rem;
}

#tab-perfil.profile-page .profile-header{
  margin-bottom:.75rem;
}

#tab-perfil.profile-page .profile-header strong{
  font-size: 1.35rem;
  line-height: 1.2;
  color:var(--accent-gold);
}

#tab-perfil.profile-page .profile-header .small-muted,
#tab-perfil.profile-page .profile-status,
#tab-perfil.profile-page .profile-avatar-status{
  color:var(--text-soft);
  font-size: .92rem;
}

.small-muted{
  margin-bottom: 0px;
}

#tab-perfil.profile-page .profile-header-center{
  text-align:center;
}

#tab-perfil.profile-page .profile-avatar-centered{
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
  gap: .7rem;
  margin-bottom:1.15rem;
}

#tab-perfil.profile-page .profile-avatar img{
  width: 8.25rem;
  height: 8.25rem;
  border-radius: 50%;
  object-fit:cover;
  border:4px solid var(--surface-98);
  box-shadow:var(--shadow-soft);
  background:var(--surface-6);
}

#tab-perfil.profile-page .profile-avatar .profile-header{
  width:min(100%, 41rem);
  min-height:8.25rem;
  margin:0 auto;
}

#tab-perfil.profile-page .profile-avatar .profile-header-main{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:.8rem;
}

#tab-perfil.profile-page .profile-account-actions{
  width:min(100%, 24rem);
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:.6rem;
}

#tab-perfil.profile-page .social-links-panel{
  width:min(100%, 21rem);
  text-align:left;
  background:var(--surface-98);
  border:1px solid var(--border-35);
  border-radius:.95rem;
  box-shadow:var(--shadow-soft);
  padding:.75rem;
  display:flex;
  flex-direction:column;
  gap:.6rem;
  margin-left: auto;
}

#tab-perfil.profile-page .social-links-title{
  font-size:.86rem;
  font-weight:700;
  color:var(--text-main);
}

#tab-perfil.profile-page .social-row{
  display:grid;
  grid-template-columns:1.25rem minmax(0, 1fr);
  align-items:center;
  gap:.55rem;
}

#tab-perfil.profile-page .social-icon{
  width:1.25rem;
  height:1.25rem;
  color:var(--text-soft);
  display:flex;
  align-items:center;
  justify-content:center;
  transition:color .2s ease;
}

#tab-perfil.profile-page .social-icon svg{
  width:100%;
  height:100%;
  display:block;
  fill:currentColor;
}

#tab-perfil.profile-page .social-row.is-active .social-icon{
  color:var(--accent-border-strong);
}

#tab-perfil.profile-page .social-input{
  width:100%;
  min-height:2.3rem;
  border-radius:.62rem;
  border:1px solid var(--input-border);
  background:var(--input-bg);
  color:var(--color-text);
  padding:.45rem .65rem;
  font-size:.88rem;
}

#tab-perfil.profile-page .social-input:focus{
  outline:none;
  border-color:var(--accent-border-strong);
  box-shadow:0 0 0 3px var(--accent-outline);
}

@media (min-width:900px){
  #tab-perfil.profile-page .profile-avatar .profile-header{
    display:flex;
    align-items:flex-start;
    justify-content:center;
    gap:1rem;
  }
}

@media (max-width:899px){
  #tab-perfil.profile-page .profile-avatar .profile-header{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:.75rem;
  }

  #tab-perfil.profile-page .social-links-panel{
    width:min(100%, 26rem);
  }
}

#tab-perfil.profile-page .profile-email{
  background:var(--accent-bg);
  border:1px solid var(--accent-30);
  color:var(--text-main);
  font-size: .86rem;
  border-radius: 62.438rem;
  padding: .4rem .9rem;
}

#tab-perfil.profile-page .profile-avatar-actions{
  width: 100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: .65rem;
}

#tab-perfil.profile-page .profile-avatar-input{
  width: min(100%, 20rem);
  justify-content:center;
  padding: .7rem 1rem;
  border:1px dashed var(--border-60);
  border-radius: 0.75rem;
  background:var(--input-bg);
  color:var(--text-main);
  font-weight:600;
}

#tab-perfil.profile-page .profile-avatar-buttons{
  width: min(100%, 20rem);
  display:grid;
  grid-template-columns:1fr 1fr;
  gap: .6rem;
}

#tab-perfil.profile-page .profile-section{
  margin-top:.25rem;
  border-top:1px solid var(--border-35);
  padding-top:1rem;
}

#tab-perfil.profile-page .profile-section-title{
  font-size: 1rem;
  font-weight:700;
  color:var(--accent-gold);
  margin-bottom:.85rem;
}

#tab-perfil.profile-page .profile-grid{
  display:grid;
  grid-template-columns:1fr;
  gap: .9rem;
}

#tab-perfil.profile-page .profile-field{
  gap: .45rem;
}

#tab-perfil.profile-page .profile-field label{
  color:var(--text-main);
  font-size: .9rem;
  font-weight:600;
}

body.dark-mode #tab-perfil.profile-page .profile-field label,
body[data-theme="dark"] #tab-perfil.profile-page .profile-field label,
body.dark-mode #tab-perfil.profile-page .profile-grid .form-group label,
body[data-theme="dark"] #tab-perfil.profile-page .profile-grid .form-group label{
  color:var(--accent-gold);
}

#tab-perfil.profile-page .profile-field input,
#tab-perfil.profile-page .profile-field select{
  width: 100%;
  min-height: 3rem;
  border-radius: 0.75rem;
  border:1px solid var(--input-border);
  background:var(--input-bg);
  padding: .7rem .85rem;
  color:var(--color-text);
  font-size: 1rem;
  transition:border-color .2s ease, box-shadow .2s ease;
}

#tab-perfil.profile-page .profile-field input::placeholder{
  color:var(--text-soft);
}

#tab-perfil.profile-page .profile-field input:focus,
#tab-perfil.profile-page .profile-field select:focus{
  outline:none;
  border-color:var(--accent-border-strong);
  box-shadow:0 0 0 3px var(--accent-outline);
}

#tab-perfil.profile-page .profile-actions{
  margin-top:1.15rem;
  display:flex;
  flex-direction:column;
  gap: .65rem;
}

#tab-perfil.profile-page .profile-actions-buttons{
  display:flex;
  align-items:center;
  gap:.65rem;
  flex-wrap:wrap;
}

#tab-perfil.profile-page #btnProfileSave{
  width: 100%;
  min-height: 3.125rem;
  border-radius: 0.75rem;
  border:1px solid var(--btn-primary-border);
  background:var(--btn-primary-bg);
  color:var(--btn-primary-text);
  font-size: 1rem;
  font-weight:700;
  box-shadow:var(--shadow-btn);
}

#tab-perfil.profile-page .profile-actions-buttons #btnPasswordReset{
  min-height: 3.125rem;
  padding-inline:1.4rem;
}

#tab-perfil.profile-page #btnProfileSave:hover{
  background:var(--btn-primary-hover-bg);
}

#tab-perfil.profile-page #btnPasswordReset,
#tab-perfil.profile-page #btnUploadAvatar,
#tab-perfil.profile-page #btnRemoveAvatar,
#tab-perfil.profile-page #btnProfileLogout{
  min-height: 2.75rem;
  border-radius: 0.625rem;
  font-weight:600;
  background:var(--btn-ghost-bg);
  border:1px solid var(--btn-ghost-border);
  color:var(--color-text);
}

#tab-perfil.profile-page #btnPasswordReset:hover,
#tab-perfil.profile-page #btnUploadAvatar:hover,
#tab-perfil.profile-page #btnRemoveAvatar:hover,
#tab-perfil.profile-page #btnProfileLogout:hover{
  background:var(--btn-soft-bg);
  border-color:var(--btn-soft-border);
}

#tab-perfil.profile-page #btnProfileLogout{
  background:#ff4d4d;
  border-color:#ff4d4d;
  color:#fff;
}
#tab-perfil.profile-page #btnProfileLogout{
  flex:1 1 12rem;
}

#tab-perfil.profile-page #btnProfileLogout:hover{
  background:#e60000;
  border-color:#e60000;
}

/* Desktop */
@media (min-width:768px){
  #tab-perfil.profile-page{
    padding: 1.4rem;
  }

  #tab-perfil.profile-page .profile-page-shell{
    gap: 1.25rem;
  }


  #tab-perfil.profile-page .profile-main-card{
    padding: 1.5rem;
  }

  #tab-perfil.profile-page .profile-grid{
    grid-template-columns:repeat(2, minmax(0,1fr));
  }

  #tab-perfil.profile-page .profile-field-wide{
    grid-column:1 / -1;
  }

  #tab-perfil.profile-page .profile-avatar-buttons,
  #tab-perfil.profile-page .profile-avatar-input{
    width: min(100%, 22.5rem);
  }

  #tab-perfil.profile-page .profile-actions{
    align-items:flex-start;
  }

  #tab-perfil.profile-page #btnProfileSave{
    width: auto;
    min-width: 15rem;
    padding-inline:1.8rem;
  }

  #tab-perfil.profile-page .profile-actions-buttons #btnPasswordReset{
    width:auto;
    min-width: 13.5rem;
  }
}

/* =========================================================
   Header sticky + scroll top + icono mensajería
   ========================================================= */
html{
  font-size: 80%;
  scroll-behavior:smooth;
}

/* =========================================================
   Escala global compacta (equivalente visual a zoom 80% real)
   ========================================================= */
:root{
  --layout-compact-padding-x:1rem;
  --layout-compact-gap:1rem;
  --layout-compact-content-gap:.62rem;
  --layout-compact-card-padding:.9rem;
  --layout-compact-max-width:1400px;
}

header{
  padding: .82rem 1rem;
  gap: .62rem;
}

.page-layout{
  gap: var(--layout-compact-gap);
  width: calc(100% - (var(--layout-compact-padding-x) * 2));
  max-width: var(--layout-compact-max-width);
  margin: 0 auto;
  padding-top:.35rem;
}

.page-content{
  gap: var(--layout-compact-content-gap);
}

.main-shell{
  max-width: var(--layout-compact-max-width);
}

.tabs-bar{
  gap: .4rem;
  margin-bottom:.72rem;
}

.tab-card{
  padding: var(--layout-compact-card-padding);
}

@media(max-width:1024px){
  .page-layout{
    width: calc(100% - 1.2rem);
    padding: 0 .6rem;
    max-width: none;
  }
}

@media(max-width:650px){
  html{
    font-size: 88%;
  }

  header{
    padding: .78rem .82rem;
  }

  .tab-card{
    padding: .82rem;
  }
}

header{
  position:sticky;
  top: 0;
  z-index:1100;
  /*background:var(--header-bg); */
}

.page-layout{
  padding-top:.35rem;
  display: grid; 
}

.header-msg-btn{
  color:var(--color-text);
  opacity:1;
  border-color:var(--border-85);
  box-shadow:var(--shadow-btn);
  transition:transform var(--transition-fast), border-color var(--transition-fast), background-color var(--transition-fast), color var(--transition-fast), opacity var(--transition-fast);
}

.header-msg-btn:hover,
.header-msg-btn:focus-visible{
  color:var(--color-text);
  opacity:1;
  border-color:var(--accent-805);
  transform:translateY(-1px);
}

.header-msg-btn:active{
  transform:translateY(0) scale(.98);
}

.header-msg-btn svg{
  opacity:1;
  stroke:currentColor;
}

.scroll-top-btn{
  position:fixed;
  right: 1.25rem;
  bottom: 1.25rem;
  width: 2.875rem;
  height: 2.875rem;
  border-radius: 62.438rem;
  border:1px solid var(--border-85);
  background:var(--surface-94);
  color:var(--color-text);
  box-shadow:var(--shadow-btn);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size: 1.4rem;
  line-height: 1;
  z-index:1200;
  opacity:0;
  visibility:hidden;
  transform:translateY(8px);
  pointer-events:none;
  transition:opacity var(--transition-fast), transform var(--transition-fast), border-color var(--transition-fast), background-color var(--transition-fast);
}

.scroll-top-btn.is-visible{
  opacity:1;
  visibility:visible;
  transform:translateY(0);
  pointer-events:auto;
}

.scroll-top-btn:hover,
.scroll-top-btn:focus-visible{
  border-color:var(--accent-805);
  transform:translateY(-2px);
}

.scroll-top-btn:active{
  transform:translateY(0) scale(.98);
}

@media (max-width: 650px){
  .scroll-top-btn{
    right: 1rem;
    bottom: calc(1rem + env(safe-area-inset-bottom) + 3.75rem);
  }
}
.prof-list{
 display: grid;
  grid-template-columns: repeat(2, 1fr); /* 3 columnas */
  grid-template-rows: repeat(3, auto);   /* 2 filas */
  gap: 0.5rem; /* espacio entre botones */
}

.quick-sidebar .qs-footer{
  display: none;
}
/* Planner modal + chips sobre agenda */
.preset-chips-row{ display:flex; flex-wrap:wrap; gap: 0.5em; }
.preset-chip{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  border:1px solid var(--border-60);
  background:var(--surface-94);
  color:var(--color-text);
  border-radius:20px;
  padding:0rem 0.5rem;
  font-size:0.9rem;
  font-weight:700;
  cursor:pointer;
  transition:all .2s ease;
}
.preset-chip.active{ background:var(--accent-15); border-color:var(--accent-60); }
.preset-chip.add{ width:2rem; min-width:2rem; padding:.36rem 0; justify-content:center; text-align:center; border-radius:999px; }
.preset-chip.add:disabled{ opacity:.45; cursor:not-allowed; }
.preset-name{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; line-height:1; }
.preset-x{
  display:inline-grid;
  place-items:center;
  width:18px;
  height:18px;
  border-radius:999px;
  opacity:.7;
  cursor:pointer;
  color:inherit;
  transition:opacity .2s ease, background-color .2s ease;
}
.preset-x:hover,
.preset-x:focus-visible{
  opacity:1;
  background:rgba(255,0,0,.10);
}
.preset-x svg{ width:12px; height:12px; }
.preset-rename-input{
  width:8.5rem;
  border:1px solid var(--accent-60);
  border-radius:999px;
  padding:.2rem .55rem;
  font-size:14px;
  font-weight:700;
  background:#fff;
  color:var(--color-text);
}
.preset-rename-dialog{
  width:min(92vw, 360px);
  border:none;
  border-radius:14px;
  padding:0;
  box-shadow:0 18px 48px rgba(20, 20, 30, 0.24);
}
.preset-rename-dialog::backdrop{
  background:transparent;
  backdrop-filter:none;
}
.preset-rename-form{ padding:1rem 1rem .9rem; }
.preset-rename-title{ margin:0 0 .45rem; font-size:1.02rem; }
.preset-rename-label{ display:block; font-size:.85rem; color:var(--text-soft); margin-bottom:.32rem; }
.preset-rename-form .preset-rename-input{
  width:100%;
  border-radius:10px;
  padding:.56rem .7rem;
  font-size:.95rem;
  font-weight:600;
}
.preset-rename-error{ margin:.4rem 0 0; color:#c62828; font-size:.8rem; }
.preset-rename-actions{
  display:flex;
  justify-content:flex-end;
  gap:.5rem;
  margin-top:.85rem;
}
.preset-chip-edit{ border:1px solid var(--border-60); background:transparent; color:var(--text-soft); border-radius:999px; padding:.2rem .45rem; }
.preset-delete{
  background:transparent;
  border:none;
  color:#9e9e9e;
  font-size:14px;
  cursor:pointer;
  transition:color .2s ease, transform .2s ease;
}
.preset-delete:hover{ color:#e53935; transform:scale(1.1); }

body.dark-mode .preset-chip,
body[data-theme="dark"] .preset-chip,
body.dark-mode .preset-btn,
body[data-theme="dark"] .preset-btn{
  background:rgba(255, 255, 255, 0.12);
  border-color:rgba(255, 255, 255, 0.34);
  color:rgba(248, 250, 252, 0.94);
}

body.dark-mode .preset-chip:hover,
body[data-theme="dark"] .preset-chip:hover,
body.dark-mode .preset-btn:hover,
body[data-theme="dark"] .preset-btn:hover{
  background:rgba(255, 255, 255, 0.18);
  border-color:rgba(255, 255, 255, 0.5);
}

body.dark-mode .preset-chip:focus-visible,
body[data-theme="dark"] .preset-chip:focus-visible,
body.dark-mode .preset-btn:focus-visible,
body[data-theme="dark"] .preset-btn:focus-visible{
  outline:2px solid rgba(173, 216, 255, 0.95);
  outline-offset:2px;
}

body.dark-mode .preset-chip.active,
body[data-theme="dark"] .preset-chip.active,
body.dark-mode .preset-btn.active,
body[data-theme="dark"] .preset-btn.active{
  background:rgba(111, 179, 255, 0.28);
  border-color:rgba(139, 195, 255, 0.9);
  color:#ffffff;
}

#plannerModalBg{
  position:fixed;
  inset:0;
  padding:0;
  align-items:stretch;
  justify-content:flex-end;
  z-index:150;
  background:transparent;
  backdrop-filter:none;
  animation:plannerFadeIn .2s ease;
}

#plannerModalBg .planner-modal{
  position:fixed;
  top:0;
  right:0;
  width:29rem;
  max-width:29rem;
  height:100vh;
  max-height:100vh;
  background:var(--color-surface);
  border:1px solid var(--color-border);
  border-radius:0;
  box-shadow:-8px 0 30px rgba(0,0,0,.08);
  padding:1rem 1rem .9rem;
  display:flex;
  flex-direction:column;
  overflow:hidden;
  margin:0;
  z-index:200;
  animation:slideInRight .25s ease;
}

.planner-modal{
  position:relative;
  width:min(74vw, 1120px);
  max-width:1120px;
  max-height:85vh;
  height:auto;
  overflow:auto;
  background:#ffffff;
  border-radius:22px;
  border:1px solid #d5ddeb;
  box-shadow:0 18px 44px rgba(10,16,30,.2);
  padding:1rem 1rem .9rem;
  animation: plannerModalIn .24s ease;
  margin:auto;
}
body.light-mode .planner-modal,
body[data-theme="light"] .planner-modal{
  background:#ffffff;
  border-color:#d9e2ec;
}

.planner-modal-header{ display:flex; justify-content:space-between; gap:.75rem; align-items:flex-start; }
.planner-header{ display:flex; align-items:center; justify-content:space-between; gap:.8rem; flex:1; }
.planner-title{ min-width:0; }
.planner-modal-title{ margin:0 0 .1rem; font-size:1.65rem; font-weight:900; color:var(--text-strong);margin-top: 4.5rem; }

.section-status{ margin-top:.3rem; font-size:.78rem; font-weight:700; }
.section-status.warn{ color:#b36d00; }
.section-card.blocked{ opacity:.86; }


.planner-modal-footer{
  border-top:1px solid var(--color-border);
  margin-top:.75rem;
  padding:1rem;
  display:flex;
  justify-content:space-between;
  gap:.75rem;
  align-items:center;
  flex-wrap:wrap;
  background:var(--color-surface);
}
#plannerModalBg .planner-modal-footer{
  margin-top:auto;
  flex-shrink:0;
}
.planner-summary{ color:var(--text-soft); font-size:.9rem; display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
.planner-footer-actions{ display:flex; gap:.5rem; }


.subject-modal-form-box{
  margin-top:.85rem;
  border-radius:var(--radius-md);
  border:1px solid var(--border-85);
  background:var(--card-bg, var(--surface-94));
  padding:1rem;
}
.subject-modal-form-box .subject-color-row{
  background:var(--surface-95);
}


@media (max-width:780px){
  #plannerModalBg .planner-modal{ width:20rem; }
  .planner-modal{ width:min(94vw,1120px); max-height:90vh; }
  .planner-modal-title{ font-size:1.45rem; }
  .planner-header{ flex-direction:column; align-items:flex-start; }
    .section-card-layout{ grid-template-columns:1fr; }
  .section-actions{ justify-content:flex-start; }
  .planner-list{ max-height:calc(90vh - 23rem); }
}


.btn-plan-add{
  border:1px solid color-mix(in srgb, var(--success, #146b60) 68%, var(--black) 12%);
  background:color-mix(in srgb, var(--success, #146b60) 86%, var(--surface-94) 14%);
  color:#ffffff;
  border-radius:12px;
  padding:.42rem .82rem;
  font-weight:800;
  display:inline-flex;
  align-items:center;
  gap:.28rem;
}
.btn-plan-add.btn-small{ font-size:.84rem; }
.btn-plan-add:hover{ background:color-mix(in srgb, var(--success, #146b60) 94%, #000 6%); }
.btn-plan-apply{
  border:1px solid color-mix(in srgb, var(--success, #146b60) 70%, var(--black) 12%);
  background:color-mix(in srgb, var(--success, #146b60) 88%, var(--surface-94) 12%);
  color:#ffffff;
  border-radius:14px;
  padding:.72rem 1.3rem;
  font-weight:900;
  letter-spacing:.01em;
  box-shadow:0 10px 20px color-mix(in srgb, var(--success, #146b60) 34%, transparent);
  transition:filter var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
}
.btn-plan-add:hover,
.btn-plan-add:focus-visible,
.btn-plan-apply:hover,
.btn-plan-apply:focus-visible{
  background:color-mix(in srgb, var(--success, #146b60) 76%, var(--black) 24%);
  color:#ffffff;
  transform:translateY(-1px);
}
.btn-plan-apply:active,
.btn-plan-add:active{ transform:translateY(0); }
.btn-plan-apply:disabled{
  opacity:.65;
  cursor:default;
  transform:none;
}

@keyframes plannerModalIn{
  from{ opacity:0; transform:translateY(8px) scale(.985); }
  to{ opacity:1; transform:translateY(0) scale(1); }
}
@keyframes plannerFadeIn{
  from{ opacity:0; }
  to{ opacity:1; }
}
@keyframes slideInRight{
  from{
    transform:translateX(100%);
    opacity:.6;
  }
  to{
    transform:translateX(0);
    opacity:1;
  }
}


.acad-pending-list{ display:flex; flex-direction:column; gap:.6rem; }
.widget-title-row{ display:flex; justify-content:space-between; align-items:center; gap:.6rem; }
.acad-pending-item{ position:relative; border-radius:var(--radius-md); border:1px solid var(--border-85); background:var(--card-bg, var(--card)); padding:.65rem .75rem .65rem 2.35rem; }
.acad-pending-item .activity-check{ position:absolute; top:.62rem; left:.62rem; }
.acad-pending-item-head{ display:flex; align-items:flex-start; justify-content:space-between; gap:.45rem; }
.acad-pending-item-title{ font-weight:700; color:var(--color-text); }
.acad-pending-item-meta,.acad-pending-item-time{ color:var(--text-soft); font-size:.82rem; }

.badge-overdue,.acad-overdue-badge{ display:inline-flex; align-items:center; background:#FEE2E2; color:#991B1B; border:1px solid #FCA5A5; font-size:12px; padding:2px 8px; border-radius:999px; font-weight:600; white-space:nowrap; }
.acad-pending-item.priority-alta{ border-color: color-mix(in srgb, #c44 35%, var(--border)); background: color-mix(in srgb, #c44 10%, var(--card-bg, var(--card))); }
.acad-pending-item.priority-media{ border-color: color-mix(in srgb, #d6ab3b 45%, var(--border)); background: color-mix(in srgb, #d6ab3b 10%, var(--card-bg, var(--card))); }
.widget-link{ border:0; background:none; color:var(--accent-80); cursor:pointer; text-align:left; padding:0; font-weight:700; }
body:not(.dark-mode):not([data-theme="dark"]) #acadCompletedLink.widget-link,
body.light-mode #acadCompletedLink.widget-link,
body[data-theme="light"] #acadCompletedLink.widget-link{
  color:var(--color-primary-strong);
  font-weight:600;
  text-decoration:underline;
  text-decoration-thickness:1px;
  text-underline-offset:0.14em;
}
body:not(.dark-mode):not([data-theme="dark"]) #acadCompletedLink.widget-link:hover,
body.light-mode #acadCompletedLink.widget-link:hover,
body[data-theme="light"] #acadCompletedLink.widget-link:hover{
  color:color-mix(in srgb, var(--color-primary-strong) 78%, #000 22%);
  text-decoration-thickness:2px;
}
body:not(.dark-mode):not([data-theme="dark"]) #acadCompletedLink.widget-link:focus-visible,
body.light-mode #acadCompletedLink.widget-link:focus-visible,
body[data-theme="light"] #acadCompletedLink.widget-link:focus-visible{
  outline:2px solid color-mix(in srgb, var(--color-primary-strong) 70%, #fff 30%);
  outline-offset:3px;
  border-radius:0.3rem;
}
#tab-materias,#tab-profesores,#tab-comunidad,#tab-recreo,#tab-biblioteca,#tab-transporte,#tab-mensajes, #tab-perfil{
  height: 60.327rem;
}
body.dark-mode .coming-view h2,
body[data-theme="dark"] .coming-view h2,
body.dark-mode .home-card[data-coming-soon="true"] .home-card-title,
body[data-theme="dark"] .home-card[data-coming-soon="true"] .home-card-title{
  color:rgba(255,255,255,0.72);
}
body.dark-mode .coming-view p,
body[data-theme="dark"] .coming-view p,
body.dark-mode .home-card[data-coming-soon="true"] .home-card-desc,
body[data-theme="dark"] .home-card[data-coming-soon="true"] .home-card-desc{
  color:rgba(255,255,255,0.55);
}

body.dark-mode #tab-perfil.profile-page .profile-header strong,
body[data-theme="dark"] #tab-perfil.profile-page .profile-header strong,
body.dark-mode #tab-perfil.profile-page .profile-email,
body[data-theme="dark"] #tab-perfil.profile-page .profile-email,
body.dark-mode #tab-perfil.profile-page .social-links-title,
body[data-theme="dark"] #tab-perfil.profile-page .social-links-title,
body.dark-mode #tab-perfil.profile-page .profile-avatar-input,
body[data-theme="dark"] #tab-perfil.profile-page .profile-avatar-input,
body.dark-mode #tab-perfil.profile-page .profile-avatar-input span,
body[data-theme="dark"] #tab-perfil.profile-page .profile-avatar-input span,
body.dark-mode #tab-perfil.profile-page .profile-section-title,
body[data-theme="dark"] #tab-perfil.profile-page .profile-section-title,
body.dark-mode #tab-perfil.profile-page .profile-section h2,
body[data-theme="dark"] #tab-perfil.profile-page .profile-section h2,
body.dark-mode #tab-perfil.profile-page .profile-section h3,
body[data-theme="dark"] #tab-perfil.profile-page .profile-section h3,
body.dark-mode #tab-perfil.profile-page .profile-section legend,
body[data-theme="dark"] #tab-perfil.profile-page .profile-section legend{
  color:var(--accent-gold);
}
.upcoming-row--timeline{ align-items:center; }
.upcoming-date-block{ min-width:3rem; text-align:center; display:flex; flex-direction:column; }
.upcoming-date-month{ font-size:.72rem; color:var(--text-soft); text-transform:uppercase; letter-spacing:.05em; }
.upcoming-date-day{ font-size:1.3rem; color:var(--color-text); }
#volverListaProfesores{
  margin-bottom: 1rem;
}

.subjects-modern-layout{
  display:grid;
  grid-template-columns:minmax(280px, 38%) minmax(360px, 1fr);
  gap:1rem;
}
.subjects-catalog-panel,
.subjects-active-panel{
  background:var(--surface-94);
  border:1px solid var(--border-85);
  border-radius:16px;
  padding:1rem;
  height: 58rem;
}
.subjects-modern-header h3{ margin:0; font-size:1.1rem; }
.subjects-modern-header p{ margin:.2rem 0 .75rem; }
.subject-catalog-search-wrap input{
  width:100%; border:1px solid var(--input-border); background:var(--input-bg); color:var(--color-text);
  border-radius:999px; padding:.65rem .95rem;
}
.subject-plan-inline-hint{ margin:.6rem 0; }
.subject-catalog-list{ max-height:55vh; overflow:auto; padding-right:.2rem; }
.catalog-semester{ margin:.75rem 0 1rem; }
.catalog-semester-header{
  width:100%;
  display:flex;
  align-items:center;
  gap:.45rem;
  border:0;
  background:transparent;
  padding:0;
  margin-bottom:.45rem;
  cursor:pointer;
  text-align:left;
}
.catalog-semester-tag{
  display:inline-flex; font-size:.72rem; font-weight:800; padding:.18rem .55rem; border-radius:999px;
  background:var(--accent-20); color:var(--accent-90);
}
.catalog-semester-summary{ font-size:.75rem; color:var(--color-muted-2); font-weight:700; }
.catalog-semester-status{ margin-left:auto; font-size:.76rem; font-weight:700; color:var(--color-muted-2); }
.catalog-semester-status.is-complete{ color:#1c8f4b; }
.catalog-semester-body[hidden]{ display:none; }
.semester-block.semester-approved .catalog-semester-status{
  color:var(--ok, #2eaf6f);
}

.catalog-semester-tag.sem-1{ background:#def3e4; color:#235a3e; }
.catalog-semester-tag.sem-2{ background:#dfeeff; color:#2a4f7f; }
.catalog-semester-tag.sem-3{ background:#ece6ff; color:#4a3b7e; }
.catalog-semester-tag.sem-4{ background:#f4ecdf; color:#6d5537; }
.catalog-semester-tag.sem-5{ background:#e4ebf5; color:#3f5067; }
.catalog-semester-tag.sem-6{ background:#f8e2ea; color:#7f4156; }
.catalog-semester-tag.sem-7{ background:#faefd2; color:#7b5c1e; }
.catalog-semester-tag.sem-8{ background:#dff5f1; color:#1f6158; }
.catalog-semester-tag.sem-9{ background:#ede8fb; color:#504383; }
.catalog-semester-tag.sem-10{ background:#f8eddc; color:#765c36; }
.catalog-semester-tag.sem-11{ background:#e3e9f1; color:#455467; }
.catalog-subject-row{
  display:flex; justify-content:space-between; align-items:center; gap:.5rem;
  border:1px solid var(--border-85); border-radius:12px; padding:.55rem .65rem; background:var(--color-surface-3); margin:.4rem 0;
}
.catalog-item.is-approved{
  opacity:.95;
  border-left:6px solid var(--ok, #2eaf6f);
  background:rgba(46,175,111,.10);
}
.catalog-subject-actions{ display:flex; align-items:center; gap:.4rem; }
.catalog-subject-name{ font-weight:700; font-size:.92rem; }
.catalog-subject-area{ font-size:.77rem; color:var(--color-muted-2); }
.catalog-add-btn{
 border-radius:50%; border:1px solid var(--accent-35); background:var(--accent-12);
  color:var(--accent-95); font-weight:800; cursor:pointer;
}
.catalog-add-btn.is-disabled,
.catalog-add-btn:disabled{
  border-color:var(--border-85);
  background:var(--surface-94);
  color:var(--color-muted-2);
  cursor:not-allowed;
}
.catalog-state-chip{
  display:inline-flex;
  align-items:center;
  gap:.2rem;
  font-size:.74rem;
  font-weight:700;
  border-radius:999px;
  padding:.1rem .5rem;
  margin-top:.28rem;
  width:fit-content;
}
.catalog-state-chip.is-promoted{
  background:#def3e4;
  color:#1c8f4b;
}
.catalog-item .approved-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 10px;
  border-radius:999px;
  font-weight:600;
  font-size:.85rem;
  color:#1f8f57;
  background:rgba(46,175,111,.14);
  border:1px solid rgba(46,175,111,.25);
  white-space:nowrap;
}
.subjects-modern-header--row{ display:flex; justify-content:space-between; align-items:flex-start; gap:.5rem; }
.subjects-active-total{ text-align:right; text-transform:uppercase; font-size:.64rem; color:var(--color-muted-2); letter-spacing:.04em; }
.subjects-active-total strong{ display:block; font-size:1.2rem; color:var(--accent-90); line-height:1.1; }
.subjects-active-list{ display:flex; flex-direction:column; gap:.55rem; }
.subject-modern-row{
  display:grid; grid-template-columns:6px 1fr auto; gap:.7rem; align-items:center;
  border:1px solid var(--border-85); border-radius:12px; background:var(--color-surface-3); padding:.6rem .7rem;
}
.subject-modern-marker{ width:6px; min-height:44px; border-radius:999px; }
.subject-modern-name{ font-weight:700; font-size:.93rem; }
.subject-modern-sub{ font-size:.76rem; color:var(--color-muted-2); margin-top:.15rem; }
.subject-modern-controls{ display:flex; align-items:center; gap:.45rem; }
.subject-inline-colors{ display:flex; gap:.3rem; }
.subject-inline-color{
  width:14px; height:14px; border-radius:50%; border:1px solid transparent; cursor:pointer; padding:0;
}
.subject-inline-color.is-selected{ border-color:var(--text-strong); box-shadow:0 0 0 2px var(--accent-15); }
.subject-remove-btn{
  width:30px;
  height:30px;
  border:1px solid transparent;
  background:transparent;
  border-radius:10px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  color:rgba(60, 60, 60, 0.55);
  padding:0;
  transition:background .15s ease, border-color .15s ease, color .15s ease, transform .15s ease;
}
.subject-remove-btn:hover{
  background:rgba(0, 0, 0, 0.04);
  border-color:rgba(0, 0, 0, 0.06);
  color:rgba(60, 60, 60, 0.85);
}
.subject-remove-btn:active{
  transform:scale(0.98);
}
.subject-remove-btn .icon-x{
  width:16px;
  height:16px;
  display:block;
}
.subjects-apply-hint{
  margin-top:.7rem; border:1px dashed var(--border-85); border-radius:12px; padding:.75rem;
  color:var(--color-muted-2); font-size:.82rem; text-align:center;
}
.subjects-modern-footer{ margin-top:.8rem; display:flex; justify-content:space-between; gap:.6rem; }
.subjects-autosave-label{
  align-self:center;
  font-size:.8rem;
  font-weight:600;
  color:var(--color-muted-2);
}
@media (max-width: 980px){
  .subjects-modern-layout{ grid-template-columns:1fr; }
}

/* Mensajería refresh minimal */
#tab-mensajes .mensajeria-card{
  border-radius: 1.25rem;
  box-shadow: 0 10px 28px rgba(18, 28, 22, .06);
}

#tab-mensajes .chat-filter-chips{
  display:flex;
  gap:.45rem;
  margin:.4rem 0 .55rem;
}

#tab-mensajes .chip-filter{
  border:1px solid var(--border-30);
  background:var(--surface-94);
  border-radius:999px;
  padding:.33rem .78rem;
  font-size:.82rem;
  cursor:pointer;
  transition:all .16s ease;
}

#tab-mensajes .chip-filter.active{
  background:color-mix(in srgb, var(--chat-accent, #7CC7A0) 20%, var(--color-surface-3));
  border-color:#bfe7d6;
}

#tab-mensajes .friends-search{
  display:flex;
  align-items:center;
  gap:.35rem;
  border:1px solid var(--border-30);
  border-radius:999px;
  padding:.4rem .7rem;
  margin-bottom:.5rem;
}

#tab-mensajes .friends-search input{
  width:100%;
  border:0;
  outline:none;
  background:transparent;
}

#tab-mensajes .friend-row{
  border-radius:1rem;
  transition:all .16s ease;
}

#tab-mensajes .friend-row:hover{
  border-color:var(--accent-30);
}


#tab-mensajes .friend-row.selected{
  background:color-mix(in srgb, var(--chat-accent, #7CC7A0) 20%, var(--color-surface-3));
  border-color:color-mix(in srgb, var(--chat-accent, #7CC7A0) 45%, #d8e2dc);
}

body.dark-mode #tab-mensajes .friend-row.selected,
body[data-theme="dark"] #tab-mensajes .friend-row.selected{
  background:color-mix(in srgb, var(--chat-accent, #7CC7A0) 18%, var(--card-bg, var(--glass-soft)));
  border-color:color-mix(in srgb, var(--chat-accent, #7CC7A0) 50%, var(--border-40));
  color:var(--color-text);
}

body.dark-mode #tab-mensajes .friend-row.selected .friend-name,
body.dark-mode #tab-mensajes .friend-row.selected .friend-meta,
body.dark-mode #tab-mensajes .friend-row.selected .friend-chat-btn,
body[data-theme="dark"] #tab-mensajes .friend-row.selected .friend-name,
body[data-theme="dark"] #tab-mensajes .friend-row.selected .friend-meta,
body[data-theme="dark"] #tab-mensajes .friend-row.selected .friend-chat-btn{
  color:var(--color-text);
}

#tab-mensajes .friend-copy{ min-width:0; }
#tab-mensajes .friend-name-line{
  display:flex;
  align-items:center;
  gap:.4rem;
}

#tab-mensajes .friend-actions{ gap:.55rem; position:relative; }
#tab-mensajes .friend-actions-menu-btn{
  border-radius:999px;
  min-width:2rem;
  min-height:2rem;
  padding:.25rem;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
#tab-mensajes .friend-actions-menu-btn svg{
  width:1rem;
  height:1rem;
  fill:currentColor;
}
#tab-mensajes .friend-row-menu,
#friend-row-floating-menu.friend-row-menu{
  position:fixed;
  min-width:10rem;
  border:1px solid var(--border-30);
  border-radius:.8rem;
  background:var(--color-surface-3);
  box-shadow:0 10px 22px rgba(15,23,42,.14);
  padding:.35rem;
  display:flex;
  flex-direction:column;
  z-index:2600;
  opacity:0;
  visibility:hidden;
  pointer-events:none;
  transform:translateY(-2px);
  transition:opacity .12s ease, transform .12s ease, visibility .12s ease;
}

#tab-mensajes .friend-row-menu.is-open,
#friend-row-floating-menu.friend-row-menu.is-open{
  opacity:1;
  visibility:visible;
  pointer-events:auto;
  transform:translateY(0);
}

#tab-mensajes .friend-row-menu button,
#friend-row-floating-menu.friend-row-menu button{
  border:0;
  background:transparent;
  text-align:left;
  padding:.45rem .55rem;
  border-radius:.6rem;
  cursor:pointer;
}
#tab-mensajes .friend-row-menu button:hover,
#friend-row-floating-menu.friend-row-menu button:hover{
  background:color-mix(in srgb, var(--chat-accent, #7CC7A0) 20%, var(--color-surface-3));
}
#tab-mensajes .friend-unread-badge{
  min-width:1.25rem;
  height:1.25rem;
  border-radius:999px;
  padding:0 .35rem;
  display:grid;
  place-items:center;
  background:#1f9d67;
  color:#fff;
  font-size:.72rem;
  font-weight:700;
}

#tab-mensajes .friend-chat-btn,
#tab-mensajes .btn-send-pill{ border-radius:999px; }

#tab-mensajes .chat-header-main{
  display:flex;
  align-items:center;
  gap:.7rem;
}

#tab-mensajes .chat-avatar{
  width:2.35rem;
  height:2.35rem;
  border-radius:50%;
  object-fit:cover;
  border:1px solid var(--border-40);
}

#tab-mensajes .chat-header-actions{ position:relative; }
#tab-mensajes .chat-menu-button{
  border:1px solid var(--border-30);
  background:#fff;
  color:var(--text-color, #111827);
  border-radius:999px;
  font-size:1.1rem;
  min-width:2.1rem;
  min-height:2.1rem;
  padding:0 .55rem;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  transition:background .2s ease, border-color .2s ease, box-shadow .2s ease, transform .2s ease;
}

#tab-mensajes .chat-menu-button:hover{
  background:#f8fafc;
  border-color:var(--border-40);
  box-shadow:0 6px 16px rgba(15,23,42,.1);
}

#tab-mensajes .chat-menu-button:focus-visible{
  outline:2px solid color-mix(in srgb, var(--chat-accent, #7CC7A0) 35%, #ffffff);
  outline-offset:2px;
}

#tab-mensajes .chat-context-menu{
  position:absolute;
  top:2.2rem;
  right:0;
  width:13rem;
  border:1px solid var(--border-30);
  border-radius:1rem;
  background:var(--color-surface-3);
  box-shadow:0 12px 32px rgba(17,24,39,.12);
  padding:.35rem;
  display:flex;
  flex-direction:column;
  z-index:30;
}
#tab-mensajes .chat-context-menu.hidden{ display:none; }
#tab-mensajes .chat-context-menu button{
  border:0;
  background:transparent;
  text-align:left;
  padding:.48rem .58rem;
  border-radius:.65rem;
  cursor:pointer;
}
#tab-mensajes .chat-context-menu button:hover{    background: 
color-mix(in srgb, var(--chat-accent, #7CC7A0) 20%, var(--color-surface-3)); }

#tab-mensajes .messages-box{
  border-radius:1.25rem;
  padding:1rem;
}

#tab-mensajes .chat-empty-state{
  min-height:100%;
  display:grid;
  place-items:center;
  text-align:center;
  border-radius:1.25rem;
  border:1px solid #dbece3;
  box-shadow:0 10px 28px rgba(25, 70, 48, .08);
  padding:2rem 1rem;
}
#tab-mensajes .chat-empty-icon{
  width:3rem;
  height:3rem;
  color:#6dbb95;
}
#tab-mensajes .chat-empty-icon svg{ width:100%; height:100%; }

#tab-mensajes .msg-row.grouped{ margin-top:-.25rem; }
#tab-mensajes .msg-bubble{
  border-radius:1rem;
  box-shadow:0 3px 12px rgba(15,23,42,.05);
}
#tab-mensajes .msg-row.other .msg-bubble{ background:var(--color-surface-3); }
#tab-mensajes .msg-meta{ font-size:.74rem; }

#tab-mensajes .chat-input-row.disabled{ opacity:.55; pointer-events:none; }
#tab-mensajes .emoji-button{
  border-radius:999px;
  min-width:2.2rem;
}

#tab-mensajes .chat-settings-overlay{
  position:fixed;
  inset:0;
  background:rgba(18, 24, 28, .3);
  backdrop-filter:blur(3px);
  display:grid;
  place-items:center;
  z-index:130;
  animation:fadeIn .18s ease;
}
#tab-mensajes .chat-settings-overlay.hidden{ display:none; }
#tab-mensajes .chat-settings-modal{
  width:min(36rem, 92vw);
  max-height:78vh;
  overflow:auto;
  background:#fff;
  border-radius:1.2rem;
  border:1px solid var(--border-30);
  box-shadow:0 22px 45px rgba(0,0,0,.14);
  padding:1rem;
  animation:slideFadeUp .18s ease;
}

body.dark-mode .friend-search-overlay,
body.dark-mode .friend-requests-modal-overlay,
body.dark-mode #tab-mensajes .chat-settings-overlay,
body[data-theme="dark"] .friend-search-overlay,
body[data-theme="dark"] .friend-requests-modal-overlay,
body[data-theme="dark"] #tab-mensajes .chat-settings-overlay{
  background:var(--overlay-soft);
}

body.dark-mode .friend-search-modal,
body.dark-mode .friend-requests-modal,
body.dark-mode #tab-mensajes .chat-settings-modal,
body[data-theme="dark"] .friend-search-modal,
body[data-theme="dark"] .friend-requests-modal,
body[data-theme="dark"] #tab-mensajes .chat-settings-modal{
  background:var(--card-bg);
  color:var(--color-text);
  border-color:var(--border-50);
}

body.dark-mode .friend-search-header,
body.dark-mode .friend-requests-modal-header,
body.dark-mode #tab-mensajes .chat-settings-header,
body[data-theme="dark"] .friend-search-header,
body[data-theme="dark"] .friend-requests-modal-header,
body[data-theme="dark"] #tab-mensajes .chat-settings-header{
  border-color:var(--border-35);
}

body.dark-mode #closeFriendSearch,
body.dark-mode .friend-requests-close,
body.dark-mode #tab-mensajes #closeChatSettings,
body[data-theme="dark"] #closeFriendSearch,
body[data-theme="dark"] .friend-requests-close,
body[data-theme="dark"] #tab-mensajes #closeChatSettings{
  background:var(--glass-soft);
  color:var(--color-text);
  border-color:var(--border-45);
}

body.dark-mode #friendSearchInput,
body.dark-mode #tab-mensajes .theme-option,
body[data-theme="dark"] #friendSearchInput,
body[data-theme="dark"] #tab-mensajes .theme-option{
  background:var(--glass-soft);
  border-color:var(--border-45);
  color:var(--color-text);
}

body.dark-mode #tab-mensajes .theme-option.active,
body[data-theme="dark"] #tab-mensajes .theme-option.active{
  background:color-mix(in srgb, var(--chat-accent, #7CC7A0) 20%, var(--glass-soft));
  border-color:color-mix(in srgb, var(--chat-accent, #7CC7A0) 45%, var(--border-45));
}

body.dark-mode #tab-mensajes .chat-settings-section label,
body.dark-mode #tab-mensajes .chat-settings-section small,
body.dark-mode #tab-mensajes .chat-settings-modal h3,
body[data-theme="dark"] #tab-mensajes .chat-settings-section label,
body[data-theme="dark"] #tab-mensajes .chat-settings-section small,
body[data-theme="dark"] #tab-mensajes .chat-settings-modal h3{
  color:var(--color-text);
}

body.dark-mode #tab-mensajes .chat-settings-section input[type="checkbox"],
body[data-theme="dark"] #tab-mensajes .chat-settings-section input[type="checkbox"]{
  accent-color:var(--chat-accent, #7CC7A0);
}

body.dark-mode #tab-mensajes .chat-menu-button,
body[data-theme="dark"] #tab-mensajes .chat-menu-button{
  background:var(--glass-soft);
  border:1px solid var(--color-border);
  color:var(--color-text);
  box-shadow:0 8px 22px rgba(0, 0, 0, .22);
}

body.dark-mode #tab-mensajes .chat-menu-button:hover,
body[data-theme="dark"] #tab-mensajes .chat-menu-button:hover{
  background:color-mix(in srgb, var(--glass-soft) 80%, #ffffff 20%);
  border-color:color-mix(in srgb, var(--color-border) 70%, #ffffff 30%);
}

body.dark-mode #tab-mensajes .chat-menu-button:focus-visible,
body[data-theme="dark"] #tab-mensajes .chat-menu-button:focus-visible{
  outline:2px solid color-mix(in srgb, var(--chat-accent, #7CC7A0) 45%, #ffffff 55%);
}

body.dark-mode #tab-mensajes .msg-row.other .msg-bubble,
body[data-theme="dark"] #tab-mensajes .msg-row.other .msg-bubble{
  background:color-mix(in srgb, var(--card-bg) 92%, #ffffff 8%);
  border:1px solid var(--color-border);
  color:var(--color-text);
}

body.dark-mode #tab-mensajes .msg-row.other .msg-meta,
body[data-theme="dark"] #tab-mensajes .msg-row.other .msg-meta{
  color:var(--color-muted);
}
#tab-mensajes .chat-settings-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding-bottom:.6rem;
  border-bottom:1px solid var(--border-20);
}
#tab-mensajes .chat-settings-header h3{ margin:0; }
#tab-mensajes #closeChatSettings{
  border:1px solid var(--border-30);
  background:#fff;
  border-radius:999px;
  width:2rem;
  height:2rem;
}
#tab-mensajes .chat-settings-section{ margin-top:.95rem; }
#tab-mensajes .theme-options{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:.45rem;
}
#tab-mensajes .theme-option{
  display:flex;
  align-items:center;
  justify-content:flex-start;
  gap:.55rem;
  border:1px solid var(--border-25);
  background:#fff;
  border-radius:.7rem;
  padding:.45rem .55rem;
  transition:background .15s ease, border-color .15s ease;
}
#tab-mensajes .theme-option.active{ border-color:#9ed0b8; background:#eff9f3; }
#tab-mensajes .theme-dot{
  width:1.5rem;
  height:1.5rem;
  border-radius:50%;
  display:grid;
  place-items:center;
  font-size:.68rem;
  color:#1e3d2c;
}
#tab-mensajes .btn-danger-soft{
  border:1px solid #efb9b9;
  background:#fff8f8;
  color:#9a2626;
  border-radius:999px;
  padding:.42rem .85rem;
}

@keyframes fadeIn{ from{opacity:0} to{opacity:1} }
@keyframes slideFadeUp{ from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
@keyframes skeletonPulse{ from{background-position:200% 0;} to{background-position:-200% 0;} }


/* ===== Correlativas: estilo tipo Plans ===== */
.correlativas-plans{
  position:relative;
  --cor-plan-card:var(--plan-glass);
  --cor-plan-border:var(--border-35);
  --cor-plan-muted:var(--color-muted-2);
  --cor-plan-shadow:0 16px 36px rgba(0,0,0,.24);
}

.correlativas-plans .plans-embedded-host{
  width:100%;
  min-height:70vh;
}

.correlativas-plans .plans-embedded-root{
  position:relative;
  width:100%;
  height:auto;
  max-height:none;
  overflow:visible;
  padding:.25rem;
}

.correlativas-plans .plans-embedded-root .msg{
  display:block;
  width:100%;
  max-width:100rem;
  padding:.875rem 1rem;
  border-radius:.875rem;
  border:1px solid var(--accent-22);
  background:var(--accent-08);
  color:var(--color-text);
  margin-bottom:.7rem;
}

.correlativas-plans .plans-embedded-root .grid-wrap{ width:100%; max-width:100rem; display:grid; grid-template-columns:repeat(3,1fr); gap:1rem; }
.correlativas-plans .plans-embedded-root .cell{ background:var(--glass-faint); border-radius:.875rem; padding:.9rem; border:1px solid var(--cor-plan-border); display:flex; flex-direction:column; }
.correlativas-plans .plans-embedded-root .cell h2{ margin:0 0 .6rem; color:var(--color-accent); font-size:1rem; text-align:center; padding-bottom:.35rem; border-bottom:2px solid var(--accent-18); }
.correlativas-plans .plans-embedded-root .subjects{ display:flex; flex-direction:column; gap:.35rem; margin-top:.45rem; overflow:visible; padding-right:0; }
.correlativas-plans .plans-embedded-root .subject{ background:var(--cor-plan-card); padding:.55rem .6rem; border-radius:.625rem; font-weight:700; font-size:.92rem; text-align:center; cursor:pointer; transition:transform .12s, background .18s, border-color .12s; color:var(--color-text); border:1px solid transparent; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; display:inline-flex; align-items:center; justify-content:center; gap:7px; }
.correlativas-plans .plans-embedded-root .subject:hover{ transform:translateY(-4px); background:var(--primary-12); border-color:var(--accent-25); }
.correlativas-plans .plans-embedded-root .subject.locked{opacity:.62; transform:none; background:var(--primary-06); color:var(--cor-plan-muted); border-color:transparent; }
.correlativas-plans .plans-embedded-root .subject-inline-row{ display:flex; flex-direction:column; align-items:center; }
.correlativas-plans .plans-embedded-root .subject-inline-row .subject{ width:100%; }
.correlativas-plans .plans-embedded-root .status-chips{ display:none; align-items:center; gap:8px; flex-wrap:wrap; padding:6px 8px; border-radius:999px; border:1px solid var(--cor-plan-border); background:var(--card-bg); box-shadow:0 6px 20px rgba(15,23,42,.16); }
.correlativas-plans .plans-embedded-root .promocionada{ background:var(--color-ok)!important; color:var(--color-primary-strong); }
.correlativas-plans .plans-embedded-root .regular{ background:var(--color-warn)!important; color:var(--color-primary-strong)!important; }
.correlativas-plans .plans-embedded-root .libre{ background:var(--color-danger)!important; color:var(--color-text-contrast); }
.correlativas-plans .plans-embedded-root .en_curso{ background:var(--color-accent)!important; color:var(--color-primary-strong)!important; }
.correlativas-plans .plans-embedded-root .subject.subject-approved{position:relative; }
.correlativas-plans .plans-embedded-root .subject.subject-approved::after{ content:"✓"; position:absolute; top:.22rem; right:.4rem; font-size:.75rem; font-weight:700; opacity:.85; }
.correlativas-plans .plans-embedded-root .lock-icon{ width:15px; height:15px; color:#9AA3AF; display:inline-flex; flex:0 0 auto; }
.correlativas-plans .plans-embedded-root .lock-icon svg{ width:100%; height:100%; display:block; }

.correlativas-plans .plans-embedded-root .stats{ display:flex; flex-direction:column; gap:.8rem; }
.correlativas-plans .plans-embedded-root .stats-grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; }
.correlativas-plans .plans-embedded-root .stats-meta{ display:flex; flex-direction:column; gap:.7rem; }
.correlativas-plans .plans-embedded-root .stats-actions{ display:flex; gap:8px; justify-content:space-between; align-items:center; flex-wrap:wrap; }
.correlativas-plans .plans-embedded-root .stat-card{ background:var(--cor-plan-card); padding:.6rem; border-radius:.625rem; text-align:center; border:1px solid var(--cor-plan-border); }
.correlativas-plans .plans-embedded-root .stat-card strong{ display:block; font-size:1.05rem; color:var(--color-text); }
.correlativas-plans .plans-embedded-root .stat-label{ color:var(--cor-plan-muted); font-size:.85rem; margin-top:.3rem; }
.correlativas-plans .plans-embedded-root .progress-wrap{ background:var(--cor-plan-card); border-radius:.75rem; padding:.5rem; border:1px solid var(--cor-plan-border); }
.correlativas-plans .plans-embedded-root .progress{ height:1.125rem; background:var(--primary-12); border-radius:.75rem; overflow:hidden; }
.correlativas-plans .plans-embedded-root .progress > .fill{ height:100%; width:0%; background:var(--color-ok); border-radius:.75rem; transition:width .6s ease-in-out; }
.correlativas-plans .plans-embedded-root .progress-caption{ display:flex; justify-content:space-between; font-size:.85rem; color:var(--cor-plan-muted); margin-top:.35rem; }
.correlativas-plans .plans-embedded-root .plans-embedded-reset-wrap{ display:flex; gap:8px; justify-content:space-between; align-items:center; }
.correlativas-plans .plans-embedded-root .status-pill-modal{ position:absolute; inset:0; z-index:40; display:flex; align-items:flex-start; justify-content:flex-start; padding:0; }
.correlativas-plans .plans-embedded-root .status-pill-modal[hidden]{ display:none !important; }
.correlativas-plans .plans-embedded-root .status-pill-overlay{ position:absolute; inset:0; background:transparent; }
.correlativas-plans .plans-embedded-root .status-pill-content{ position:absolute; z-index:2; display:flex; flex-direction:column; gap:.45rem; border-radius:999px; border:1px solid var(--cor-plan-border); background:var(--card-bg); box-shadow:0 10px 28px rgba(0,0,0,.22); padding:.4rem .5rem; }
.correlativas-plans .plans-embedded-root .status-pill-subject{ margin:0; font-size:.72rem; text-align:center; color:var(--cor-plan-muted); font-weight:600; }
.correlativas-plans .plans-embedded-root .status-pill-actions{ display:inline-flex; align-items:center; gap:8px; flex-wrap:wrap; }
.correlativas-plans .plans-embedded-root .status-pill-option{ border:none; border-radius:999px; padding:6px 10px; font-size:.76rem; font-weight:800; letter-spacing:.02em; cursor:pointer; transition:transform .12s ease, filter .12s ease, box-shadow .12s ease; }
.correlativas-plans .plans-embedded-root .status-pill-option:hover{ transform:translateY(-1px); filter:saturate(1.05); box-shadow:0 2px 8px rgba(15,23,42,.18); }
.correlativas-plans .plans-embedded-root .status-pill-option:disabled{ cursor:not-allowed; opacity:.45; box-shadow:none; transform:none; }
.correlativas-plans .plans-embedded-root .status-pill-pro{ background:#DCFCE7; color:#166534; }
.correlativas-plans .plans-embedded-root .status-pill-reg{ background:#FEF9C3; color:#854D0E; }
.correlativas-plans .plans-embedded-root .status-pill-lib{ background:#FEE2E2; color:#991B1B; }
.correlativas-plans .plans-embedded-root .status-pill-cur{ background:#DBEAFE; color:#1D4ED8; }
.correlativas-plans .plans-embedded-root .status-pill-clear{ background:#F3F4F6; color:#374151; border:1px solid #E5E7EB; }

@media (max-width:1200px){
  .correlativas-plans .plans-embedded-root .grid-wrap{ grid-template-columns:repeat(2,1fr); }
}
@media (max-width:900px){
  .correlativas-plans .plans-embedded-root .grid-wrap{ grid-template-columns:1fr; width:100%; }
  .correlativas-plans .plans-embedded-root .cell{ min-height:auto; padding:.7rem; }
  .correlativas-plans .plans-embedded-root .stats-grid{ grid-template-columns:1fr; }
}
@media (max-width:1000px) and (min-width:901px){
  .correlativas-plans .plans-embedded-root .stats-v1{ display:flex; flex-direction:column; width:100%; min-width:0; }
  .correlativas-plans .plans-embedded-root .stats-cards{ grid-template-columns:repeat(2,minmax(0,1fr)); }
  .correlativas-plans .plans-embedded-root .stats-actions{ margin-top:12px; }
}
@media (max-width:520px){
  .correlativas-plans .plans-embedded-root .status-pill-content{ width:min(100%,calc(100% - 1.5rem)); border-radius:1rem; }
}

.stats-v1{
 display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  align-items: stretch;
}


.streak-icon{
  position:absolute;
  top:.35rem;
  right:.35rem;
  width:1rem;
  height:1rem;
  color:#ff7a00;
  pointer-events:none;
  opacity:.95;
}
.streak-icon svg{ width:100%; height:100%; display:block; }

.streak-day{
  color:#ff7a00;
  text-shadow:0 0 8px rgba(255,122,0,.6);
  font-weight:700;
}
.streak-day-cell{
  border:2px solid #ff7a00;
  box-shadow:0 0 6px rgba(255,122,0,.5);
}
.streak-icon{
  position:absolute;
  top:10px;
  right:10px;
  width:22px;
  height:22px;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}
.streak-icon .flame{
  width:22px;
  height:22px;
}
.streak-icon .flame-outer{ fill:#ff4b3a; }
.streak-icon .flame-inner{ fill:#ff9a3a; }
.friend-requests-modal .request-empty--skeleton{
  min-height:2.1rem;
  border-radius:10px;
  background:linear-gradient(90deg,rgba(148,163,184,.16) 25%,rgba(148,163,184,.32) 50%,rgba(148,163,184,.16) 75%);
  background-size:200% 100%;
  animation:skeletonPulse 1.1s ease infinite;
}

/* <= 1000px: 2 columnas (izq cards / der cronómetro) */
@media (max-width: 1000px){
  #tab-perfil.profile-page .profile-avatar .profile-header{
  display: block;
}
  .study-top-layout{
    display: grid;
    grid-template-columns: 1fr minmax(260px, 360px);
    grid-template-areas: "left right";
    gap: 12px;
    align-items: start;
  }

  .study-top-left{
    grid-area: left;
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
  }

  /* si tu .study-stats-grid en desktop es multi-columna, acá lo forzamos a 1 columna
     SOLO dentro de este wrapper (no afecta el resto del sitio) */
  .study-top-left.study-stats-grid{
    grid-template-columns: 1fr;
  }

  .study-top-right{
    grid-area: right;
    align-self: start;
  }
  .study-top-layout{
    grid-template-columns: 1fr;
    grid-template-areas:
      "right"
      "left";
      margin: auto;
  }
  .home-left{
  width: 39rem;
}
}

@media (max-width:650px) {
  .agenda-day-col{
    /*width: 3rem; */

  }
 .agenda-hour-col{
    width: 3rem;


}
  .weather-widget{
    width: 27rem;

  }
  .home-cards,.home-left,.page-layout,.home-card[data-coming-soon="false"],.home-card[data-coming-soon="true"] {
    width: 27rem;
  }
  #tab-inicio{
    width: 29rem;

  }
  .page-layout{
    margin : 0px ;
  }
  
}




#friendsListSection1{
      height: 48rem;
}
